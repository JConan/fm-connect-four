import{s as M,e as H,c as L,o as ne,n as le,E as X,r as Ie}from"../chunks/scheduler.Bp73tsFP.js";import{S as j,i as O,e as C,k as P,c as E,a as S,l as V,d as g,g as T,o as A,p as _,B as F,q as k,C as Se,r as B,w as fe,v as Y,z as Z,x,n as w,s as z,t as U,f as N,b as W,h as p,j as de,D as De,m as re}from"../chunks/index.WTjgDaL3.js";import{d as Pe,w as K}from"../chunks/index.CpYc9ZES.js";import{f as ee,a as be}from"../chunks/index.BXk-0J-c.js";import{I as R,r as Ve}from"../chunks/Image.E2hpyyT2.js";import{b as Ae}from"../chunks/paths.Bhtqa46J.js";function me(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}const ye=Array(7*6).fill(void 0),ke="red",ae=K(ke),se=K(ye),oe=K(0),we=K(0),J=Pe([se,ae,oe],([n,e,t])=>({grid:n,turn:e,activeColumn:t}));function Be(n){return new Promise(e=>{se.update(t=>{const a=[...t],s=t.map((l,r)=>({value:l,column:r%7,index:r})).filter(l=>l.column===n.indexColumn&&l.value===void 0).pop();return s?(ae.update(l=>(a[s.index]=l,l==="red"?"yellow":"red")),e(!0),a):(e(!1),t)})})}function Ce(){se.set(ye),ae.set(ke),oe.set(0),we.update(n=>n+1)}function ze(n){oe.set(n%7)}function Ne(n){let e,t,a,s,l;return t=new R({props:{name:`counter-${n[0]}`}}),{c(){e=C("div"),P(t.$$.fragment)},l(r){e=E(r,"DIV",{});var o=S(e);V(t.$$.fragment,o),o.forEach(g)},m(r,o){T(r,e,o),A(t,e,null),l=!0},p(r,[o]){const i={};o&1&&(i.name=`counter-${r[0]}`),t.$set(i)},i(r){l||(_(t.$$.fragment,r),r&&H(()=>{l&&(s&&s.end(1),a=F(e,ee,{y:-1e3,duration:600}),a.start())}),l=!0)},o(r){k(t.$$.fragment,r),a&&a.invalidate(),r&&(s=Se(e,be,{})),l=!1},d(r){r&&g(e),B(t),r&&s&&s.end()}}}function Te(n,e,t){let{color:a}=e;return n.$$set=s=>{"color"in s&&t(0,a=s.color)},[a]}class qe extends j{constructor(e){super(),O(this,e,Te,Ne,M,{color:0})}}function $e(n){let e,t=n[2].current,a,s=pe(n);return{c(){e=C("div"),s.c(),this.h()},l(l){e=E(l,"DIV",{class:!0});var r=S(e);s.l(r),r.forEach(g),this.h()},h(){w(e,"class","board-cursor svelte-7k3e")},m(l,r){T(l,e,r),s.m(e,null),a=!0},p(l,r){r&4&&M(t,t=l[2].current)?(Z(),k(s,1,1,le),x(),s=pe(l),s.c(),_(s,1),s.m(e,null)):s.p(l,r)},i(l){a||(_(s),a=!0)},o(l){k(s),a=!1},d(l){l&&g(e),s.d(l)}}}function pe(n){let e,t,a,s,l;return t=new R({props:{name:`marker-${n[3].turn}`}}),{c(){e=C("div"),P(t.$$.fragment),this.h()},l(r){e=E(r,"DIV",{style:!0});var o=S(e);V(t.$$.fragment,o),o.forEach(g),this.h()},h(){w(e,"style",a=`grid-area: cell-${n[2].current}`)},m(r,o){T(r,e,o),A(t,e,null),l=!0},p(r,o){n=r;const i={};o&8&&(i.name=`marker-${n[3].turn}`),t.$set(i),(!l||o&4&&a!==(a=`grid-area: cell-${n[2].current}`))&&w(e,"style",a)},i(r){l||(_(t.$$.fragment,r),r&&(s||H(()=>{s=F(e,ee,{x:-n[0],duration:200,opacity:1}),s.start()})),l=!0)},o(r){k(t.$$.fragment,r),l=!1},d(r){r&&g(e),B(t)}}}function Me(n){let e,t,a,s;H(n[5]);let l=n[1]>1079&&$e(n);return{c(){l&&l.c(),e=fe()},l(r){l&&l.l(r),e=fe()},m(r,o){l&&l.m(r,o),T(r,e,o),t=!0,a||(s=Y(window,"resize",n[5]),a=!0)},p(r,[o]){r[1]>1079?l?(l.p(r,o),o&2&&_(l,1)):(l=$e(r),l.c(),_(l,1),l.m(e.parentNode,e)):l&&(Z(),k(l,1,1,()=>{l=null}),x())},i(r){t||(_(l),t=!0)},o(r){k(l),t=!1},d(r){r&&g(e),l&&l.d(r),a=!1,s()}}}function Ge(n,e,t){let a,s;L(n,J,d=>t(3,s=d));let l=0;const r=K({});L(n,r,d=>t(2,a=d)),ne(()=>{r.subscribe(({current:d,previous:u})=>{if(d!==void 0&&u!==void 0){const $=document.getElementById(`board-cell-${u}`).getClientRects()[0],h=document.getElementById(`board-cell-${d}`).getClientRects()[0];t(0,l=h.x-$.x)}}),J.subscribe(d=>{r.update(u=>u.current!==d.activeColumn?{current:d.activeColumn,previous:u.current}:u)})});let o;function i(){t(1,o=window.innerWidth)}return[l,o,a,s,r,i]}class Re extends j{constructor(e){super(),O(this,e,Ge,Me,M,{})}}function je(n){let e,t,a,s,l,r,o,i,d,u,$,h;return t=new R({props:{name:`turn-background-${n[0].turn}`}}),{c(){e=C("div"),P(t.$$.fragment),a=z(),s=C("span"),l=U(n[2]),r=U(" turn"),o=z(),i=C("span"),d=U(n[1]),u=U("s"),this.h()},l(c){e=E(c,"DIV",{class:!0});var f=S(e);V(t.$$.fragment,f),a=N(f),s=E(f,"SPAN",{});var v=S(s);l=W(v,n[2]),r=W(v," turn"),v.forEach(g),o=N(f),i=E(f,"SPAN",{});var D=S(i);d=W(D,n[1]),u=W(D,"s"),D.forEach(g),f.forEach(g),this.h()},h(){w(e,"class",$=X(`display-turn ${n[0].turn}`)+" svelte-1vn90zz")},m(c,f){T(c,e,f),A(t,e,null),p(e,a),p(e,s),p(s,l),p(s,r),p(e,o),p(e,i),p(i,d),p(i,u),h=!0},p(c,[f]){const v={};f&1&&(v.name=`turn-background-${c[0].turn}`),t.$set(v),(!h||f&4)&&de(l,c[2]),(!h||f&2)&&de(d,c[1]),(!h||f&1&&$!==($=X(`display-turn ${c[0].turn}`)+" svelte-1vn90zz"))&&w(e,"class",$)},i(c){h||(_(t.$$.fragment,c),h=!0)},o(c){k(t.$$.fragment,c),h=!1},d(c){c&&g(e),B(t)}}}function Oe(n,e,t){let a,s,l;L(n,J,i=>t(0,s=i)),L(n,we,i=>t(4,l=i));let r="red",o=30;return ne(()=>{const i=setInterval(()=>{t(1,o=o-1)},1e3);return()=>{clearInterval(i)}}),n.$$.update=()=>{n.$$.dirty&16&&l&&t(3,r="red"),n.$$.dirty&9&&s.turn!==r&&(t(3,r=s.turn),t(1,o=30)),n.$$.dirty&8&&t(2,a=r==="red"?"Player 1's":"Player 2's")},[s,o,a,r,l]}class Ue extends j{constructor(e){super(),O(this,e,Oe,je,M,{})}}function ge(n,e,t){const a=n.slice();return a[4]=e[t],a[6]=t,a}function he(n){let e,t;return e=new qe({props:{color:n[0].grid[n[6]]}}),{c(){P(e.$$.fragment)},l(a){V(e.$$.fragment,a)},m(a,s){A(e,a,s),t=!0},p(a,s){const l={};s&1&&(l.color=a[0].grid[a[6]]),e.$set(l)},i(a){t||(_(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){B(e,a)}}}function ve(n){let e,t,a,s,l,r=n[0].grid[n[6]]&&he(n);return{c(){e=C("button"),r&&r.c(),t=z(),this.h()},l(o){e=E(o,"BUTTON",{class:!0,id:!0,role:!0,tabindex:!0});var i=S(e);r&&r.l(i),t=N(i),i.forEach(g),this.h()},h(){w(e,"class","cell svelte-1d4iqeb"),w(e,"id",`board-cell-${n[6]}`),w(e,"role","cell"),w(e,"tabindex","0")},m(o,i){T(o,e,i),r&&r.m(e,null),p(e,t),a=!0,s||(l=[Y(e,"mouseenter",n[1](n[6])),Y(e,"click",n[2](n[6]))],s=!0)},p(o,i){n=o,n[0].grid[n[6]]?r?(r.p(n,i),i&1&&_(r,1)):(r=he(n),r.c(),_(r,1),r.m(e,t)):r&&(Z(),k(r,1,1,()=>{r=null}),x())},i(o){a||(_(r),a=!0)},o(o){k(r),a=!1},d(o){o&&g(e),r&&r.d(),s=!1,Ie(l)}}}function We(n){let e,t,a,s,l,r,o,i,d,u,$,h,c,f,v,D,Q;s=new R({props:{class:"shadow",name:"board-layer-black"}});let G=me(Array(7*6)),b=[];for(let m=0;m<G.length;m+=1)b[m]=ve(ge(n,G,m));const Ee=m=>k(b[m],1,1,()=>{b[m]=null});return i=new R({props:{class:"overlay",name:"board-layer-white"}}),$=new Re({}),v=new Ue({}),{c(){e=C("div"),t=C("div"),a=C("div"),P(s.$$.fragment),l=z(),r=C("div");for(let m=0;m<b.length;m+=1)b[m].c();o=z(),P(i.$$.fragment),d=z(),u=C("div"),P($.$$.fragment),c=z(),f=C("div"),P(v.$$.fragment),this.h()},l(m){e=E(m,"DIV",{class:!0});var I=S(e);t=E(I,"DIV",{class:!0});var y=S(t);a=E(y,"DIV",{class:!0});var q=S(a);V(s.$$.fragment,q),l=N(q),r=E(q,"DIV",{class:!0});var ie=S(r);for(let te=0;te<b.length;te+=1)b[te].l(ie);ie.forEach(g),o=N(q),V(i.$$.fragment,q),d=N(q),u=E(q,"DIV",{});var ue=S(u);V($.$$.fragment,ue),ue.forEach(g),q.forEach(g),y.forEach(g),c=N(I),f=E(I,"DIV",{});var ce=S(f);V(v.$$.fragment,ce),ce.forEach(g),I.forEach(g),this.h()},h(){w(r,"class","cells svelte-1d4iqeb"),w(a,"class","board-grid svelte-1d4iqeb"),w(t,"class","board"),w(e,"class","board-container svelte-1d4iqeb")},m(m,I){T(m,e,I),p(e,t),p(t,a),A(s,a,null),p(a,l),p(a,r);for(let y=0;y<b.length;y+=1)b[y]&&b[y].m(r,null);p(a,o),A(i,a,null),p(a,d),p(a,u),A($,u,null),p(e,c),p(e,f),A(v,f,null),Q=!0},p(m,[I]){if(I&7){G=me(Array(7*6));let y;for(y=0;y<G.length;y+=1){const q=ge(m,G,y);b[y]?(b[y].p(q,I),_(b[y],1)):(b[y]=ve(q),b[y].c(),_(b[y],1),b[y].m(r,null))}for(Z(),y=G.length;y<b.length;y+=1)Ee(y);x()}},i(m){if(!Q){_(s.$$.fragment,m);for(let I=0;I<G.length;I+=1)_(b[I]);_(i.$$.fragment,m),_($.$$.fragment,m),m&&(h||H(()=>{h=F(u,be,{delay:1e3}),h.start()})),_(v.$$.fragment,m),m&&(D||H(()=>{D=F(f,ee,{delay:1e3,y:300}),D.start()})),Q=!0}},o(m){k(s.$$.fragment,m),b=b.filter(Boolean);for(let I=0;I<b.length;I+=1)k(b[I]);k(i.$$.fragment,m),k($.$$.fragment,m),k(v.$$.fragment,m),Q=!1},d(m){m&&g(e),B(s),De(b,m),B(i),B($),B(v)}}}function He(n,e,t){let a;L(n,J,o=>t(0,a=o)),ne(()=>{Ce()});let s;function l(o){return()=>{clearTimeout(s),s=setTimeout(()=>{ze(o)},150)}}function r(o){return()=>{Be({indexColumn:o%7})}}return[a,l,r]}class Le extends j{constructor(e){super(),O(this,e,He,We,M,{})}}function Fe(n){let e,t,a="Menu",s,l,r,o,i="Restart",d,u,$;return l=new R({props:{class:"logo",name:"logo"}}),{c(){e=C("div"),t=C("a"),t.textContent=a,s=z(),P(l.$$.fragment),r=z(),o=C("button"),o.textContent=i,this.h()},l(h){e=E(h,"DIV",{class:!0});var c=S(e);t=E(c,"A",{href:!0,class:!0,"data-svelte-h":!0}),re(t)!=="svelte-axxoo7"&&(t.textContent=a),s=N(c),V(l.$$.fragment,c),r=N(c),o=E(c,"BUTTON",{class:!0,"data-svelte-h":!0}),re(o)!=="svelte-1akbaj5"&&(o.textContent=i),c.forEach(g),this.h()},h(){w(t,"href",`${Ae}${Ve("/")}`),w(t,"class","flat-button button-purple"),w(o,"class","flat-button button-purple"),w(e,"class","menu svelte-1bcp1gc")},m(h,c){T(h,e,c),p(e,t),p(e,s),A(l,e,null),p(e,r),p(e,o),d=!0,u||($=Y(o,"click",n[0]),u=!0)},p:le,i(h){d||(_(l.$$.fragment,h),d=!0)},o(h){k(l.$$.fragment,h),d=!1},d(h){h&&g(e),B(l),u=!1,$()}}}function Je(n){return[()=>{Ce()}]}class Ke extends j{constructor(e){super(),O(this,e,Je,Fe,M,{})}}function Qe(n){let e;return{c(){e=U("Player 2")},l(t){e=W(t,"Player 2")},m(t,a){T(t,e,a)},d(t){t&&g(e)}}}function Xe(n){let e;return{c(){e=U("Player 1")},l(t){e=W(t,"Player 1")},m(t,a){T(t,e,a)},d(t){t&&g(e)}}}function Ye(n){let e,t,a,s,l,r,o="12",i,d,u;t=new R({props:{class:`${n[0]===n[1].turn?"active":""} icon ${n[0]}`,name:n[0]==="red"?"player-one":"player-two"}});function $(f,v){return f[0]==="red"?Xe:Qe}let h=$(n),c=h(n);return{c(){e=C("div"),P(t.$$.fragment),a=z(),s=C("span"),c.c(),l=z(),r=C("span"),r.textContent=o,this.h()},l(f){e=E(f,"DIV",{class:!0});var v=S(e);V(t.$$.fragment,v),a=N(v),s=E(v,"SPAN",{class:!0});var D=S(s);c.l(D),D.forEach(g),l=N(v),r=E(v,"SPAN",{class:!0,"data-svelte-h":!0}),re(r)!=="svelte-dbx7z1"&&(r.textContent=o),v.forEach(g),this.h()},h(){w(s,"class","svelte-ukks6l"),w(r,"class","svelte-ukks6l"),w(e,"class",i=X(`score-board ${n[0]}`)+" svelte-ukks6l")},m(f,v){T(f,e,v),A(t,e,null),p(e,a),p(e,s),c.m(s,null),p(e,l),p(e,r),u=!0},p(f,[v]){n=f;const D={};v&3&&(D.class=`${n[0]===n[1].turn?"active":""} icon ${n[0]}`),v&1&&(D.name=n[0]==="red"?"player-one":"player-two"),t.$set(D),h!==(h=$(n))&&(c.d(1),c=h(n),c&&(c.c(),c.m(s,null))),(!u||v&1&&i!==(i=X(`score-board ${n[0]}`)+" svelte-ukks6l"))&&w(e,"class",i)},i(f){u||(_(t.$$.fragment,f),f&&(d||H(()=>{d=F(e,ee,{x:300*(n[0]==="red"?-1:1),delay:1e3}),d.start()})),u=!0)},o(f){k(t.$$.fragment,f),u=!1},d(f){f&&g(e),B(t),c.d()}}}function Ze(n,e,t){let a;L(n,J,l=>t(1,a=l));let{player:s}=e;return n.$$set=l=>{"player"in l&&t(0,s=l.player)},[s,a]}class _e extends j{constructor(e){super(),O(this,e,Ze,Ye,M,{player:0})}}function xe(n){let e,t,a,s,l,r,o,i,d;return t=new Ke({}),s=new _e({props:{player:"red"}}),r=new _e({props:{player:"yellow"}}),i=new Le({}),{c(){e=C("main"),P(t.$$.fragment),a=z(),P(s.$$.fragment),l=z(),P(r.$$.fragment),o=z(),P(i.$$.fragment),this.h()},l(u){e=E(u,"MAIN",{class:!0});var $=S(e);V(t.$$.fragment,$),a=N($),V(s.$$.fragment,$),l=N($),V(r.$$.fragment,$),o=N($),V(i.$$.fragment,$),$.forEach(g),this.h()},h(){w(e,"class","svelte-1rup6ek")},m(u,$){T(u,e,$),A(t,e,null),p(e,a),A(s,e,null),p(e,l),A(r,e,null),p(e,o),A(i,e,null),d=!0},p:le,i(u){d||(_(t.$$.fragment,u),_(s.$$.fragment,u),_(r.$$.fragment,u),_(i.$$.fragment,u),d=!0)},o(u){k(t.$$.fragment,u),k(s.$$.fragment,u),k(r.$$.fragment,u),k(i.$$.fragment,u),d=!1},d(u){u&&g(e),B(t),B(s),B(r),B(i)}}}class st extends j{constructor(e){super(),O(this,e,null,xe,M,{})}}export{st as component};

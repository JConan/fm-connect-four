import{s as J,b as H,c as O,o as pe,n as se,D as Q,E as ue,r as Ne,j as Oe}from"../chunks/scheduler.AzDCfVhA.js";import{S as te,i as ne,e as k,k as U,c as w,a as P,l as j,d as h,g as A,o as M,p as I,B as x,q as S,C as ve,r as G,w as ie,v as W,z as ae,x as oe,n as C,s as D,t as Y,f as N,b as Z,D as ke,h as v,j as me,m as q,E as Ue}from"../chunks/index.B8-DSJg-.js";import{d as je,w as K,g as Me}from"../chunks/entry.Hlu7fcNk.js";import{f as F,a as Be}from"../chunks/index.CD0jvZvz.js";import{I as ee,r as Ge}from"../chunks/Image.BKdHXaIC.js";import{b as Re}from"../chunks/paths.rSDBIFYW.js";import{p as qe}from"../chunks/stores.BPQUTemd.js";function we(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}const Ae=Array(7*6).fill(void 0),Ve="red",ge=K(Ve),_e=K(Ae),he=K(0),ze=K(0),fe=K(),L=K(!1),de=K(!1),le=je([_e,ge,he],([r,e,t])=>({grid:r,turn:e,activeColumn:t}));function We(r){return new Promise(e=>{_e.update(t=>{const l=[...t],s=t.map((a,n)=>({value:a,column:n%7,index:n})).filter(a=>a.column===r.indexColumn&&a.value===void 0).pop();return s?(ge.update(a=>(l[s.index]=a,a==="red"?"yellow":"red")),e(!0),l):(e(!1),t)})})}function $e(){_e.set(Ae),ge.set(Ve),he.set(0),ze.update(r=>r+1),fe.set(void 0)}function Le(r){he.set(r%7)}function Qe(r){let e,t,l,s,a;return t=new ee({props:{name:`counter-${r[0]}`}}),{c(){e=k("div"),U(t.$$.fragment)},l(n){e=w(n,"DIV",{});var u=P(e);j(t.$$.fragment,u),u.forEach(h)},m(n,u){A(n,e,u),M(t,e,null),a=!0},p(n,[u]){const o={};u&1&&(o.name=`counter-${n[0]}`),t.$set(o)},i(n){a||(I(t.$$.fragment,n),n&&H(()=>{a&&(s&&s.end(1),l=x(e,F,{y:-1e3,duration:600}),l.start())}),a=!0)},o(n){S(t.$$.fragment,n),l&&l.invalidate(),n&&(s=ve(e,Be,{})),a=!1},d(n){n&&h(e),G(t),n&&s&&s.end()}}}function He(r,e,t){let{color:l}=e;return r.$$set=s=>{"color"in s&&t(0,l=s.color)},[l]}class Fe extends te{constructor(e){super(),ne(this,e,He,Qe,J,{color:0})}}function Ee(r){let e,t=r[2].current,l,s=Ie(r);return{c(){e=k("div"),s.c(),this.h()},l(a){e=w(a,"DIV",{class:!0});var n=P(e);s.l(n),n.forEach(h),this.h()},h(){C(e,"class","board-cursor svelte-7k3e")},m(a,n){A(a,e,n),s.m(e,null),l=!0},p(a,n){n&4&&J(t,t=a[2].current)?(ae(),S(s,1,1,se),oe(),s=Ie(a),s.c(),I(s,1),s.m(e,null)):s.p(a,n)},i(a){l||(I(s),l=!0)},o(a){S(s),l=!1},d(a){a&&h(e),s.d(a)}}}function Ie(r){let e,t,l,s,a;return t=new ee({props:{name:`marker-${r[3].turn}`}}),{c(){e=k("div"),U(t.$$.fragment),this.h()},l(n){e=w(n,"DIV",{style:!0});var u=P(e);j(t.$$.fragment,u),u.forEach(h),this.h()},h(){C(e,"style",l=`grid-area: cell-${r[2].current}`)},m(n,u){A(n,e,u),M(t,e,null),a=!0},p(n,u){r=n;const o={};u&8&&(o.name=`marker-${r[3].turn}`),t.$set(o),(!a||u&4&&l!==(l=`grid-area: cell-${r[2].current}`))&&C(e,"style",l)},i(n){a||(I(t.$$.fragment,n),n&&(s||H(()=>{s=x(e,F,{x:-r[0],duration:200,opacity:1}),s.start()})),a=!0)},o(n){S(t.$$.fragment,n),a=!1},d(n){n&&h(e),G(t)}}}function Je(r){let e,t,l,s;H(r[5]);let a=r[1]>1079&&Ee(r);return{c(){a&&a.c(),e=ie()},l(n){a&&a.l(n),e=ie()},m(n,u){a&&a.m(n,u),A(n,e,u),t=!0,l||(s=W(window,"resize",r[5]),l=!0)},p(n,[u]){n[1]>1079?a?(a.p(n,u),u&2&&I(a,1)):(a=Ee(n),a.c(),I(a,1),a.m(e.parentNode,e)):a&&(ae(),S(a,1,1,()=>{a=null}),oe())},i(n){t||(I(a),t=!0)},o(n){S(a),t=!1},d(n){n&&h(e),a&&a.d(n),l=!1,s()}}}function Ke(r,e,t){let l,s;O(r,le,f=>t(3,s=f));let a=0;const n=K({});O(r,n,f=>t(2,l=f)),pe(()=>{n.subscribe(({current:f,previous:i})=>{if(f!==void 0&&i!==void 0){const c=document.getElementById(`board-cell-${i}`).getClientRects()[0],T=document.getElementById(`board-cell-${f}`).getClientRects()[0];t(0,a=T.x-c.x)}}),le.subscribe(f=>{n.update(i=>i.current!==f.activeColumn?{current:f.activeColumn,previous:i.current}:i)})});let u;function o(){t(1,u=window.innerWidth)}return[a,u,l,s,n,o]}class Xe extends te{constructor(e){super(),ne(this,e,Ke,Je,J,{})}}function Ye(r){let e,t,l,s,a,n,u,o,f,i,c,T,d,p;return t=new ee({props:{name:`turn-background-${r[1].turn}`}}),{c(){e=k("div"),U(t.$$.fragment),l=D(),s=k("span"),a=Y(r[2]),n=Y(" turn"),u=D(),o=k("span"),f=Y(r[0]),i=Y("s"),this.h()},l(m){e=w(m,"DIV",{class:!0});var g=P(e);j(t.$$.fragment,g),l=N(g),s=w(g,"SPAN",{});var $=P(s);a=Z($,r[2]),n=Z($," turn"),$.forEach(h),u=N(g),o=w(g,"SPAN",{});var V=P(o);f=Z(V,r[0]),i=Z(V,"s"),V.forEach(h),g.forEach(h),this.h()},h(){ke(o,"pause",r[3]),C(e,"class",c=ue(`display-turn ${r[1].turn}`)+" svelte-19chnvg")},m(m,g){A(m,e,g),M(t,e,null),v(e,l),v(e,s),v(s,a),v(s,n),v(e,u),v(e,o),v(o,f),v(o,i),p=!0},p(m,g){const $={};g&2&&($.name=`turn-background-${m[1].turn}`),t.$set($),(!p||g&4)&&me(a,m[2]),(!p||g&1)&&me(f,m[0]),(!p||g&8)&&ke(o,"pause",m[3]),(!p||g&2&&c!==(c=ue(`display-turn ${m[1].turn}`)+" svelte-19chnvg"))&&C(e,"class",c)},i(m){p||(I(t.$$.fragment,m),m&&H(()=>{p&&(d&&d.end(1),T=x(e,F,{delay:1e3,y:300}),T.start())}),p=!0)},o(m){S(t.$$.fragment,m),T&&T.invalidate(),m&&(d=ve(e,F,{duration:300,y:300})),p=!1},d(m){m&&h(e),G(t),m&&d&&d.end()}}}function Ze(r){let e,t,l=r[4]==="red"?"player 1":"player 2",s,a,n,u="Wins",o,f,i="Play again",c,T,d,p,m;return{c(){e=k("div"),t=k("span"),s=Y(l),a=D(),n=k("span"),n.textContent=u,o=D(),f=k("button"),f.textContent=i,this.h()},l(g){e=w(g,"DIV",{class:!0});var $=P(e);t=w($,"SPAN",{});var V=P(t);s=Z(V,l),V.forEach(h),a=N($),n=w($,"SPAN",{"data-svelte-h":!0}),q(n)!=="svelte-1r2u0sx"&&(n.textContent=u),o=N($),f=w($,"BUTTON",{class:!0,"data-svelte-h":!0}),q(f)!=="svelte-axctrz"&&(f.textContent=i),$.forEach(h),this.h()},h(){C(f,"class","flat-button button-dark-purple"),C(e,"class","end-game svelte-19chnvg")},m(g,$){A(g,e,$),v(e,t),v(t,s),v(e,a),v(e,n),v(e,o),v(e,f),d=!0,p||(m=W(f,"click",r[8]),p=!0)},p(g,$){(!d||$&16)&&l!==(l=g[4]==="red"?"player 1":"player 2")&&me(s,l)},i(g){d||(g&&H(()=>{d&&(T&&T.end(1),c=x(e,F,{delay:300,y:300,duration:300}),c.start())}),d=!0)},o(g){c&&c.invalidate(),g&&(T=ve(e,F,{y:300,duration:300})),d=!1},d(g){g&&h(e),g&&T&&T.end(),p=!1,m()}}}function xe(r){let e,t,l,s;const a=[Ze,Ye],n=[];function u(o,f){return o[4]?0:1}return e=u(r),t=n[e]=a[e](r),{c(){t.c(),l=ie()},l(o){t.l(o),l=ie()},m(o,f){n[e].m(o,f),A(o,l,f),s=!0},p(o,[f]){let i=e;e=u(o),e===i?n[e].p(o,f):(ae(),S(n[i],1,1,()=>{n[i]=null}),oe(),t=n[e],t?t.p(o,f):(t=n[e]=a[e](o),t.c()),I(t,1),t.m(l.parentNode,l))},i(o){s||(I(t),s=!0)},o(o){S(t),s=!1},d(o){o&&h(l),n[e].d(o)}}}function et(r,e,t){let l,s,a,n,u,o;O(r,L,d=>t(3,s=d)),O(r,le,d=>t(1,a=d)),O(r,fe,d=>t(4,n=d)),O(r,de,d=>t(6,u=d)),O(r,ze,d=>t(7,o=d));let f="red",i=30;function c(d){t(0,i=3),d&&(Q(L,s=!0,s),setTimeout(()=>{Q(L,s=!1,s)},d))}pe(()=>{c(3e3);const d=setInterval(()=>{s||t(0,i=i-1)},1e3);return()=>{clearInterval(d)}});const T=()=>$e();return r.$$.update=()=>{r.$$.dirty&192&&o&&(t(5,f="red"),c(u?2e3:1e3),Q(de,u=!1,u)),r.$$.dirty&34&&a.turn!==f&&(t(5,f=a.turn),c(1e3)),r.$$.dirty&32&&t(2,l=f==="red"?"Player 1's":"Player 2's"),r.$$.dirty&3&&i<=0&&(Q(de,u=!0,u),Q(L,s=!0,s),Q(fe,n=a.turn==="red"?"yellow":"red",n))},[i,a,l,s,n,f,u,o,T]}class tt extends te{constructor(e){super(),ne(this,e,et,xe,J,{})}}function Te(r,e,t){const l=r.slice();return l[6]=e[t],l[8]=t,l}function Se(r){let e,t;return e=new Fe({props:{color:r[0].grid[r[8]]}}),{c(){U(e.$$.fragment)},l(l){j(e.$$.fragment,l)},m(l,s){M(e,l,s),t=!0},p(l,s){const a={};s&1&&(a.color=l[0].grid[l[8]]),e.$set(a)},i(l){t||(I(e.$$.fragment,l),t=!0)},o(l){S(e.$$.fragment,l),t=!1},d(l){G(e,l)}}}function Pe(r){let e,t,l,s,a,n=r[0].grid[r[8]]&&Se(r);return{c(){e=k("button"),n&&n.c(),t=D(),this.h()},l(u){e=w(u,"BUTTON",{class:!0,id:!0,role:!0,tabindex:!0});var o=P(e);n&&n.l(o),t=N(o),o.forEach(h),this.h()},h(){C(e,"class","cell svelte-10z11uh"),C(e,"id",`board-cell-${r[8]}`),C(e,"role","cell"),C(e,"tabindex","0")},m(u,o){A(u,e,o),n&&n.m(e,null),v(e,t),l=!0,s||(a=[W(e,"mouseenter",r[2](r[8])),W(e,"click",r[3](r[8]))],s=!0)},p(u,o){r=u,r[0].grid[r[8]]?n?(n.p(r,o),o&1&&I(n,1)):(n=Se(r),n.c(),I(n,1),n.m(e,t)):n&&(ae(),S(n,1,1,()=>{n=null}),oe())},i(u){l||(I(n),l=!0)},o(u){S(n),l=!1},d(u){u&&h(e),n&&n.d(),s=!1,Ne(a)}}}function nt(r){let e,t,l,s,a,n,u,o,f,i,c,T,d,p,m,g,$,V,X,z;s=new ee({props:{class:"shadow",name:"board-layer-black"}});let R=we(Array(7*6)),E=[];for(let _=0;_<R.length;_+=1)E[_]=Pe(Te(r,R,_));const re=_=>S(E[_],1,1,()=>{E[_]=null});return o=new ee({props:{class:"overlay",name:"board-layer-white"}}),c=new Xe({}),m=new tt({}),{c(){e=k("div"),t=k("div"),l=k("div"),U(s.$$.fragment),a=D(),n=k("div");for(let _=0;_<E.length;_+=1)E[_].c();u=D(),U(o.$$.fragment),f=D(),i=k("div"),U(c.$$.fragment),d=D(),p=k("div"),U(m.$$.fragment),g=D(),$=k("div"),this.h()},l(_){e=w(_,"DIV",{class:!0});var b=P(e);t=w(b,"DIV",{class:!0});var y=P(t);l=w(y,"DIV",{class:!0});var B=P(l);j(s.$$.fragment,B),a=N(B),n=w(B,"DIV",{class:!0});var be=P(n);for(let ce=0;ce<E.length;ce+=1)E[ce].l(be);be.forEach(h),u=N(B),j(o.$$.fragment,B),f=N(B),i=w(B,"DIV",{});var ye=P(i);j(c.$$.fragment,ye),ye.forEach(h),B.forEach(h),y.forEach(h),d=N(b),p=w(b,"DIV",{class:!0});var Ce=P(p);j(m.$$.fragment,Ce),Ce.forEach(h),g=N(b),$=w(b,"DIV",{class:!0,style:!0}),P($).forEach(h),b.forEach(h),this.h()},h(){C(n,"class","cells svelte-10z11uh"),C(l,"class","board-grid svelte-10z11uh"),C(t,"class","board"),C(p,"class","game-status svelte-10z11uh"),C($,"class","game-status-background svelte-10z11uh"),C($,"style",V=`background-color: var(--${r[1]?r[1]:"dark-purple"})`),C(e,"class","board-container svelte-10z11uh")},m(_,b){A(_,e,b),v(e,t),v(t,l),M(s,l,null),v(l,a),v(l,n);for(let y=0;y<E.length;y+=1)E[y]&&E[y].m(n,null);v(l,u),M(o,l,null),v(l,f),v(l,i),M(c,i,null),v(e,d),v(e,p),M(m,p,null),v(e,g),v(e,$),z=!0},p(_,[b]){if(b&13){R=we(Array(7*6));let y;for(y=0;y<R.length;y+=1){const B=Te(_,R,y);E[y]?(E[y].p(B,b),I(E[y],1)):(E[y]=Pe(B),E[y].c(),I(E[y],1),E[y].m(n,null))}for(ae(),y=R.length;y<E.length;y+=1)re(y);oe()}(!z||b&2&&V!==(V=`background-color: var(--${_[1]?_[1]:"dark-purple"})`))&&C($,"style",V)},i(_){if(!z){I(s.$$.fragment,_);for(let b=0;b<R.length;b+=1)I(E[b]);I(o.$$.fragment,_),I(c.$$.fragment,_),_&&(T||H(()=>{T=x(i,Be,{delay:1e3}),T.start()})),I(m.$$.fragment,_),_&&(X||H(()=>{X=x($,F,{delay:1e3,y:300}),X.start()})),z=!0}},o(_){S(s.$$.fragment,_),E=E.filter(Boolean);for(let b=0;b<E.length;b+=1)S(E[b]);S(o.$$.fragment,_),S(c.$$.fragment,_),S(m.$$.fragment,_),z=!1},d(_){_&&h(e),G(s),Ue(E,_),G(o),G(c),G(m)}}}function rt(r,e,t){let l,s,a;O(r,L,f=>t(5,l=f)),O(r,le,f=>t(0,s=f)),O(r,fe,f=>t(1,a=f)),pe(()=>{$e()});let n;function u(f){return()=>{clearTimeout(n),l||(n=setTimeout(()=>{Le(f)},150))}}function o(f){return()=>{l||We({indexColumn:f%7})}}return[s,a,u,o]}class lt extends te{constructor(e){super(),ne(this,e,rt,nt,J,{})}}function st(r){let e,t,l="Menu",s,a,n,u,o="Restart",f,i,c,T="PAUSE",d,p,m="Continue game",g,$,V="Restart",X,z,R="Quit Game",E,re,_;return a=new ee({props:{class:"logo",name:"logo"}}),{c(){e=k("div"),t=k("button"),t.textContent=l,s=D(),U(a.$$.fragment),n=D(),u=k("button"),u.textContent=o,f=D(),i=k("dialog"),c=k("span"),c.textContent=T,d=D(),p=k("button"),p.textContent=m,g=D(),$=k("button"),$.textContent=V,X=D(),z=k("button"),z.textContent=R,this.h()},l(b){e=w(b,"DIV",{class:!0});var y=P(e);t=w(y,"BUTTON",{class:!0,"data-svelte-h":!0}),q(t)!=="svelte-jmehzd"&&(t.textContent=l),s=N(y),j(a.$$.fragment,y),n=N(y),u=w(y,"BUTTON",{class:!0,"data-svelte-h":!0}),q(u)!=="svelte-j25n9j"&&(u.textContent=o),y.forEach(h),f=N(b),i=w(b,"DIALOG",{class:!0});var B=P(i);c=w(B,"SPAN",{"data-svelte-h":!0}),q(c)!=="svelte-16naano"&&(c.textContent=T),d=N(B),p=w(B,"BUTTON",{class:!0,"data-svelte-h":!0}),q(p)!=="svelte-vst0ui"&&(p.textContent=m),g=N(B),$=w(B,"BUTTON",{class:!0,"data-svelte-h":!0}),q($)!=="svelte-15pdyjx"&&($.textContent=V),X=N(B),z=w(B,"BUTTON",{class:!0,"data-svelte-h":!0}),q(z)!=="svelte-1xzbx5t"&&(z.textContent=R),B.forEach(h),this.h()},h(){C(t,"class","flat-button button-purple"),C(u,"class","flat-button button-purple"),C(e,"class","menu svelte-6c595u"),C(p,"class","text-button raised-button button-white"),C($,"class","text-button raised-button button-white"),C(z,"class","text-button raised-button button-red"),C(i,"class","svelte-6c595u")},m(b,y){A(b,e,y),v(e,t),v(e,s),M(a,e,null),v(e,n),v(e,u),A(b,f,y),A(b,i,y),v(i,c),v(i,d),v(i,p),v(i,g),v(i,$),v(i,X),v(i,z),r[5](i),E=!0,re||(_=[W(t,"click",r[1]),W(u,"click",r[3]),W(p,"click",r[2]),W($,"click",r[3]),W(z,"click",r[4])],re=!0)},p:se,i(b){E||(I(a.$$.fragment,b),E=!0)},o(b){S(a.$$.fragment,b),E=!1},d(b){b&&(h(e),h(f),h(i)),G(a),r[5](null),re=!1,Ne(_)}}}function at(r,e,t){let l;O(r,L,i=>t(6,l=i));let s;const a=()=>{s.showModal(),Q(L,l=!0,l)},n=()=>{s.close(),Q(L,l=!1,l)},u=()=>{$e(),n()},o=()=>{n(),Me(`${Re}${Ge("/")}`)};function f(i){Oe[i?"unshift":"push"](()=>{s=i,t(0,s)})}return[s,a,n,u,o,f]}class ot extends te{constructor(e){super(),ne(this,e,at,st,J,{})}}function ut(r){let e;return{c(){e=Y(r[4])},l(t){e=Z(t,r[4])},m(t,l){A(t,e,l)},p:se,d(t){t&&h(e)}}}function it(r){let e;return{c(){e=Y(r[3])},l(t){e=Z(t,r[3])},m(t,l){A(t,e,l)},p:se,d(t){t&&h(e)}}}function ft(r){let e,t,l,s,a,n,u="12",o,f,i;t=new ee({props:{class:`${!r[1]&&r[0]===r[2].turn?"active":""} icon ${r[0]}`,name:r[0]==="red"?r[5]:r[6]}});function c(p,m){return p[0]==="red"?it:ut}let T=c(r),d=T(r);return{c(){e=k("div"),U(t.$$.fragment),l=D(),s=k("span"),d.c(),a=D(),n=k("span"),n.textContent=u,this.h()},l(p){e=w(p,"DIV",{class:!0});var m=P(e);j(t.$$.fragment,m),l=N(m),s=w(m,"SPAN",{class:!0});var g=P(s);d.l(g),g.forEach(h),a=N(m),n=w(m,"SPAN",{class:!0,"data-svelte-h":!0}),q(n)!=="svelte-dbx7z1"&&(n.textContent=u),m.forEach(h),this.h()},h(){C(s,"class","svelte-1gtaefu"),C(n,"class","svelte-1gtaefu"),C(e,"class",o=ue(`score-board ${r[0]}`)+" svelte-1gtaefu")},m(p,m){A(p,e,m),M(t,e,null),v(e,l),v(e,s),d.m(s,null),v(e,a),v(e,n),i=!0},p(p,[m]){r=p;const g={};m&7&&(g.class=`${!r[1]&&r[0]===r[2].turn?"active":""} icon ${r[0]}`),m&1&&(g.name=r[0]==="red"?r[5]:r[6]),t.$set(g),T===(T=c(r))&&d?d.p(r,m):(d.d(1),d=T(r),d&&(d.c(),d.m(s,null))),(!i||m&1&&o!==(o=ue(`score-board ${r[0]}`)+" svelte-1gtaefu"))&&C(e,"class",o)},i(p){i||(I(t.$$.fragment,p),p&&(f||H(()=>{f=x(e,F,{x:300*(r[0]==="red"?-1:1),delay:1e3}),f.start()})),i=!0)},o(p){S(t.$$.fragment,p),i=!1},d(p){p&&h(e),G(t),d.d()}}}function ct(r,e,t){let l,s,a;O(r,qe,c=>t(7,l=c)),O(r,L,c=>t(1,s=c)),O(r,le,c=>t(2,a=c));let{player:n}=e;const u=l.params.mode==="vs-player"?"player 1":"you",o=l.params.mode==="vs-player"?"player 2":"cpu",f=l.params.mode==="vs-player"?"player-one":"you",i=l.params.mode==="vs-player"?"player-two":"cpu";return r.$$set=c=>{"player"in c&&t(0,n=c.player)},[n,s,a,u,o,f,i]}class De extends te{constructor(e){super(),ne(this,e,ct,ft,J,{player:0})}}function dt(r){let e,t,l,s,a,n,u,o,f;return t=new ot({}),s=new De({props:{player:"red"}}),n=new De({props:{player:"yellow"}}),o=new lt({}),{c(){e=k("main"),U(t.$$.fragment),l=D(),U(s.$$.fragment),a=D(),U(n.$$.fragment),u=D(),U(o.$$.fragment),this.h()},l(i){e=w(i,"MAIN",{class:!0});var c=P(e);j(t.$$.fragment,c),l=N(c),j(s.$$.fragment,c),a=N(c),j(n.$$.fragment,c),u=N(c),j(o.$$.fragment,c),c.forEach(h),this.h()},h(){C(e,"class","svelte-q24hre")},m(i,c){A(i,e,c),M(t,e,null),v(e,l),M(s,e,null),v(e,a),M(n,e,null),v(e,u),M(o,e,null),f=!0},p:se,i(i){f||(I(t.$$.fragment,i),I(s.$$.fragment,i),I(n.$$.fragment,i),I(o.$$.fragment,i),f=!0)},o(i){S(t.$$.fragment,i),S(s.$$.fragment,i),S(n.$$.fragment,i),S(o.$$.fragment,i),f=!1},d(i){i&&h(e),G(t),G(s),G(n),G(o)}}}class bt extends te{constructor(e){super(),ne(this,e,null,dt,J,{})}}export{bt as component};

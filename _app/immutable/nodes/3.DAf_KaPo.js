import{s as j,e as K,c as H,o as Q,n as X,r as ve,E as ne}from"../chunks/scheduler.Bp73tsFP.js";import{S as q,i as z,e as C,k as x,c as w,a as N,l as A,d as m,g as k,o as P,p as g,B as me,q as v,C as _e,r as B,w as re,v as L,z as R,x as O,n as y,s as I,t as U,f as S,b as W,h as b,j as le,D as be,m as M}from"../chunks/index.WTjgDaL3.js";import{d as ye,w as F}from"../chunks/index.CpYc9ZES.js";import{f as de,a as Ce}from"../chunks/index.BXk-0J-c.js";import{I as T,r as we}from"../chunks/Image.BskmUcby.js";import{b as ke}from"../chunks/paths.iotGKV9u.js";function se(a){return(a==null?void 0:a.length)!==void 0?a:Array.from(a)}const $e=Array(7*6).fill(void 0),pe="red",Y=F(pe),Z=F($e),ee=F(0),G=ye([Z,Y,ee],([a,e,n])=>({grid:a,turn:e,activeColumn:n}));function Ee(a){return new Promise(e=>{Z.update(n=>{const r=[...n],s=n.map((l,t)=>({value:l,column:t%7,index:t})).filter(l=>l.column===a.indexColumn&&l.value===void 0).pop();return s?(Y.update(l=>(r[s.index]=l,l==="red"?"yellow":"red")),e(!0),r):(e(!1),n)})})}function ge(){Z.set($e),Y.set(pe),ee.set(0)}function Ie(a){ee.set(a%7)}function Se(a){let e,n,r,s,l;return n=new T({props:{name:`counter-${a[0]}`}}),{c(){e=C("div"),x(n.$$.fragment)},l(t){e=w(t,"DIV",{});var i=N(e);A(n.$$.fragment,i),i.forEach(m)},m(t,i){k(t,e,i),P(n,e,null),l=!0},p(t,[i]){const u={};i&1&&(u.name=`counter-${t[0]}`),n.$set(u)},i(t){l||(g(n.$$.fragment,t),t&&K(()=>{l&&(s&&s.end(1),r=me(e,de,{y:-1e3,duration:600}),r.start())}),l=!0)},o(t){v(n.$$.fragment,t),r&&r.invalidate(),t&&(s=_e(e,Ce,{})),l=!1},d(t){t&&m(e),B(n),t&&s&&s.end()}}}function xe(a,e,n){let{color:r}=e;return a.$$set=s=>{"color"in s&&n(0,r=s.color)},[r]}class Ae extends q{constructor(e){super(),z(this,e,xe,Se,j,{color:0})}}function ae(a){let e,n=a[2].current,r,s=oe(a);return{c(){e=C("div"),s.c(),this.h()},l(l){e=w(l,"DIV",{class:!0});var t=N(e);s.l(t),t.forEach(m),this.h()},h(){y(e,"class","board-cursor svelte-7k3e")},m(l,t){k(l,e,t),s.m(e,null),r=!0},p(l,t){t&4&&j(n,n=l[2].current)?(R(),v(s,1,1,X),O(),s=oe(l),s.c(),g(s,1),s.m(e,null)):s.p(l,t)},i(l){r||(g(s),r=!0)},o(l){v(s),r=!1},d(l){l&&m(e),s.d(l)}}}function oe(a){let e,n,r,s,l;return n=new T({props:{name:`marker-${a[3].turn}`}}),{c(){e=C("div"),x(n.$$.fragment),this.h()},l(t){e=w(t,"DIV",{style:!0});var i=N(e);A(n.$$.fragment,i),i.forEach(m),this.h()},h(){y(e,"style",r=`grid-area: cell-${a[2].current}`)},m(t,i){k(t,e,i),P(n,e,null),l=!0},p(t,i){a=t;const u={};i&8&&(u.name=`marker-${a[3].turn}`),n.$set(u),(!l||i&4&&r!==(r=`grid-area: cell-${a[2].current}`))&&y(e,"style",r)},i(t){l||(g(n.$$.fragment,t),t&&(s||K(()=>{s=me(e,de,{x:-a[0],duration:200,opacity:1}),s.start()})),l=!0)},o(t){v(n.$$.fragment,t),l=!1},d(t){t&&m(e),B(n)}}}function Pe(a){let e,n,r,s;K(a[5]);let l=a[1]>768&&ae(a);return{c(){l&&l.c(),e=re()},l(t){l&&l.l(t),e=re()},m(t,i){l&&l.m(t,i),k(t,e,i),n=!0,r||(s=L(window,"resize",a[5]),r=!0)},p(t,[i]){t[1]>768?l?(l.p(t,i),i&2&&g(l,1)):(l=ae(t),l.c(),g(l,1),l.m(e.parentNode,e)):l&&(R(),v(l,1,1,()=>{l=null}),O())},i(t){n||(g(l),n=!0)},o(t){v(l),n=!1},d(t){t&&m(e),l&&l.d(t),r=!1,s()}}}function Be(a,e,n){let r,s;H(a,G,o=>n(3,s=o));let l=0;const t=F({});H(a,t,o=>n(2,r=o)),Q(()=>{t.subscribe(({current:o,previous:c})=>{if(o!==void 0&&c!==void 0){const d=document.getElementById(`board-cell-${c}`).getClientRects()[0],f=document.getElementById(`board-cell-${o}`).getClientRects()[0];n(0,l=f.x-d.x)}}),G.subscribe(o=>{t.update(c=>c.current!==o.activeColumn?{current:o.activeColumn,previous:c.current}:c)})});let i;function u(){n(1,i=window.innerWidth)}return[l,i,r,s,t,u]}class De extends q{constructor(e){super(),z(this,e,Be,Pe,j,{})}}function Ne(a){let e,n,r,s,l,t,i,u,o,c,d;return n=new T({props:{name:`turn-background-${a[2].turn}`}}),{c(){e=C("div"),x(n.$$.fragment),r=I(),s=C("span"),l=U(a[1]),t=U(" turn"),i=I(),u=C("span"),o=U(a[0]),c=U("s"),this.h()},l(f){e=w(f,"DIV",{class:!0});var h=N(e);A(n.$$.fragment,h),r=S(h),s=w(h,"SPAN",{});var D=N(s);l=W(D,a[1]),t=W(D," turn"),D.forEach(m),i=S(h),u=w(h,"SPAN",{});var p=N(u);o=W(p,a[0]),c=W(p,"s"),p.forEach(m),h.forEach(m),this.h()},h(){y(e,"class","display-turn svelte-10g0ndx")},m(f,h){k(f,e,h),P(n,e,null),b(e,r),b(e,s),b(s,l),b(s,t),b(e,i),b(e,u),b(u,o),b(u,c),d=!0},p(f,[h]){const D={};h&4&&(D.name=`turn-background-${f[2].turn}`),n.$set(D),(!d||h&2)&&le(l,f[1]),(!d||h&1)&&le(o,f[0])},i(f){d||(g(n.$$.fragment,f),d=!0)},o(f){v(n.$$.fragment,f),d=!1},d(f){f&&m(e),B(n)}}}function Ve(a,e,n){let r,s;H(a,G,i=>n(2,s=i));let l="red",t=30;return Q(()=>{const i=setInterval(()=>{n(0,t=t-1)},1e3);return G.subscribe(({turn:u})=>{u!==l&&(n(3,l=u),n(0,t=30))}),()=>{clearInterval(i)}}),a.$$.update=()=>{a.$$.dirty&8&&n(1,r=l==="red"?"Player 1's":"Player 2's")},[t,r,s,l]}class Te extends q{constructor(e){super(),z(this,e,Ve,Ne,j,{})}}function ie(a,e,n){const r=a.slice();return r[4]=e[n],r[6]=n,r}function ue(a){let e,n;return e=new Ae({props:{color:a[0].grid[a[6]]}}),{c(){x(e.$$.fragment)},l(r){A(e.$$.fragment,r)},m(r,s){P(e,r,s),n=!0},p(r,s){const l={};s&1&&(l.color=r[0].grid[r[6]]),e.$set(l)},i(r){n||(g(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function ce(a){let e,n,r,s,l,t=a[0].grid[a[6]]&&ue(a);return{c(){e=C("button"),t&&t.c(),n=I(),this.h()},l(i){e=w(i,"BUTTON",{class:!0,id:!0,role:!0,tabindex:!0});var u=N(e);t&&t.l(u),n=S(u),u.forEach(m),this.h()},h(){y(e,"class","cell svelte-1jcmusq"),y(e,"id",`board-cell-${a[6]}`),y(e,"role","cell"),y(e,"tabindex","0")},m(i,u){k(i,e,u),t&&t.m(e,null),b(e,n),r=!0,s||(l=[L(e,"mouseenter",a[1](a[6])),L(e,"click",a[2](a[6]))],s=!0)},p(i,u){a=i,a[0].grid[a[6]]?t?(t.p(a,u),u&1&&g(t,1)):(t=ue(a),t.c(),g(t,1),t.m(e,n)):t&&(R(),v(t,1,1,()=>{t=null}),O())},i(i){r||(g(t),r=!0)},o(i){v(t),r=!1},d(i){i&&m(e),t&&t.d(),s=!1,ve(l)}}}function je(a){let e,n,r,s,l,t,i,u,o,c,d,f,h;s=new T({props:{class:"shadow",name:"board-layer-black"}});let D=se(Array(7*6)),p=[];for(let $=0;$<D.length;$+=1)p[$]=ce(ie(a,D,$));const he=$=>v(p[$],1,1,()=>{p[$]=null});return u=new T({props:{class:"overlay",name:"board-layer-white"}}),c=new De({}),f=new Te({}),{c(){e=C("div"),n=C("div"),r=C("div"),x(s.$$.fragment),l=I(),t=C("div");for(let $=0;$<p.length;$+=1)p[$].c();i=I(),x(u.$$.fragment),o=I(),x(c.$$.fragment),d=I(),x(f.$$.fragment),this.h()},l($){e=w($,"DIV",{class:!0});var E=N(e);n=w(E,"DIV",{class:!0});var _=N(n);r=w(_,"DIV",{class:!0});var V=N(r);A(s.$$.fragment,V),l=S(V),t=w(V,"DIV",{class:!0});var te=N(t);for(let J=0;J<p.length;J+=1)p[J].l(te);te.forEach(m),i=S(V),A(u.$$.fragment,V),o=S(V),A(c.$$.fragment,V),V.forEach(m),_.forEach(m),d=S(E),A(f.$$.fragment,E),E.forEach(m),this.h()},h(){y(t,"class","cells svelte-1jcmusq"),y(r,"class","board-grid svelte-1jcmusq"),y(n,"class","board"),y(e,"class","board-container svelte-1jcmusq")},m($,E){k($,e,E),b(e,n),b(n,r),P(s,r,null),b(r,l),b(r,t);for(let _=0;_<p.length;_+=1)p[_]&&p[_].m(t,null);b(r,i),P(u,r,null),b(r,o),P(c,r,null),b(e,d),P(f,e,null),h=!0},p($,[E]){if(E&7){D=se(Array(7*6));let _;for(_=0;_<D.length;_+=1){const V=ie($,D,_);p[_]?(p[_].p(V,E),g(p[_],1)):(p[_]=ce(V),p[_].c(),g(p[_],1),p[_].m(t,null))}for(R(),_=D.length;_<p.length;_+=1)he(_);O()}},i($){if(!h){g(s.$$.fragment,$);for(let E=0;E<D.length;E+=1)g(p[E]);g(u.$$.fragment,$),g(c.$$.fragment,$),g(f.$$.fragment,$),h=!0}},o($){v(s.$$.fragment,$),p=p.filter(Boolean);for(let E=0;E<p.length;E+=1)v(p[E]);v(u.$$.fragment,$),v(c.$$.fragment,$),v(f.$$.fragment,$),h=!1},d($){$&&m(e),B(s),be(p,$),B(u),B(c),B(f)}}}function qe(a,e,n){let r;H(a,G,i=>n(0,r=i)),Q(()=>{ge()});let s;function l(i){return()=>{clearTimeout(s),s=setTimeout(()=>{Ie(i)},150)}}function t(i){return()=>{Ee({indexColumn:i%7})}}return[r,l,t]}class ze extends q{constructor(e){super(),z(this,e,qe,je,j,{})}}function Me(a){let e,n,r="Menu",s,l,t,i,u="Restart",o,c,d;return l=new T({props:{class:"logo",name:"logo"}}),{c(){e=C("div"),n=C("a"),n.textContent=r,s=I(),x(l.$$.fragment),t=I(),i=C("button"),i.textContent=u,this.h()},l(f){e=w(f,"DIV",{class:!0});var h=N(e);n=w(h,"A",{href:!0,class:!0,"data-svelte-h":!0}),M(n)!=="svelte-axxoo7"&&(n.textContent=r),s=S(h),A(l.$$.fragment,h),t=S(h),i=w(h,"BUTTON",{class:!0,"data-svelte-h":!0}),M(i)!=="svelte-1akbaj5"&&(i.textContent=u),h.forEach(m),this.h()},h(){y(n,"href",`${ke}${we("/")}`),y(n,"class","flat-button button-purple"),y(i,"class","flat-button button-purple"),y(e,"class","menu svelte-1bcp1gc")},m(f,h){k(f,e,h),b(e,n),b(e,s),P(l,e,null),b(e,t),b(e,i),o=!0,c||(d=L(i,"click",a[0]),c=!0)},p:X,i(f){o||(g(l.$$.fragment,f),o=!0)},o(f){v(l.$$.fragment,f),o=!1},d(f){f&&m(e),B(l),c=!1,d()}}}function Ge(a){return[()=>{ge()}]}class Re extends q{constructor(e){super(),z(this,e,Ge,Me,j,{})}}function Oe(a){let e,n,r,s="Player 2",l,t,i="23",u;return e=new T({props:{class:"icon yellow",name:"player-two"}}),{c(){x(e.$$.fragment),n=I(),r=C("span"),r.textContent=s,l=I(),t=C("span"),t.textContent=i,this.h()},l(o){A(e.$$.fragment,o),n=S(o),r=w(o,"SPAN",{class:!0,"data-svelte-h":!0}),M(r)!=="svelte-1j8zg49"&&(r.textContent=s),l=S(o),t=w(o,"SPAN",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-19edwfx"&&(t.textContent=i),this.h()},h(){y(r,"class","svelte-1n48oai"),y(t,"class","svelte-1n48oai")},m(o,c){P(e,o,c),k(o,n,c),k(o,r,c),k(o,l,c),k(o,t,c),u=!0},i(o){u||(g(e.$$.fragment,o),u=!0)},o(o){v(e.$$.fragment,o),u=!1},d(o){o&&(m(n),m(r),m(l),m(t)),B(e,o)}}}function Ue(a){let e,n,r,s="Player 1",l,t,i="12",u;return e=new T({props:{class:"icon red",name:"player-one"}}),{c(){x(e.$$.fragment),n=I(),r=C("span"),r.textContent=s,l=I(),t=C("span"),t.textContent=i,this.h()},l(o){A(e.$$.fragment,o),n=S(o),r=w(o,"SPAN",{class:!0,"data-svelte-h":!0}),M(r)!=="svelte-bxk3g8"&&(r.textContent=s),l=S(o),t=w(o,"SPAN",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-dbx7z1"&&(t.textContent=i),this.h()},h(){y(r,"class","svelte-1n48oai"),y(t,"class","svelte-1n48oai")},m(o,c){P(e,o,c),k(o,n,c),k(o,r,c),k(o,l,c),k(o,t,c),u=!0},i(o){u||(g(e.$$.fragment,o),u=!0)},o(o){v(e.$$.fragment,o),u=!1},d(o){o&&(m(n),m(r),m(l),m(t)),B(e,o)}}}function We(a){let e,n,r,s,l;const t=[Ue,Oe],i=[];function u(o,c){return o[0]==="red"?0:1}return n=u(a),r=i[n]=t[n](a),{c(){e=C("div"),r.c(),this.h()},l(o){e=w(o,"DIV",{class:!0});var c=N(e);r.l(c),c.forEach(m),this.h()},h(){y(e,"class",s=ne(`score-board ${a[0]}`)+" svelte-1n48oai")},m(o,c){k(o,e,c),i[n].m(e,null),l=!0},p(o,[c]){let d=n;n=u(o),n!==d&&(R(),v(i[d],1,1,()=>{i[d]=null}),O(),r=i[n],r||(r=i[n]=t[n](o),r.c()),g(r,1),r.m(e,null)),(!l||c&1&&s!==(s=ne(`score-board ${o[0]}`)+" svelte-1n48oai"))&&y(e,"class",s)},i(o){l||(g(r),l=!0)},o(o){v(r),l=!1},d(o){o&&m(e),i[n].d()}}}function He(a,e,n){let{player:r}=e;return a.$$set=s=>{"player"in s&&n(0,r=s.player)},[r]}class fe extends q{constructor(e){super(),z(this,e,He,We,j,{player:0})}}function Le(a){let e,n,r,s,l,t,i,u,o;return n=new Re({}),s=new fe({props:{player:"red"}}),t=new fe({props:{player:"yellow"}}),u=new ze({}),{c(){e=C("main"),x(n.$$.fragment),r=I(),x(s.$$.fragment),l=I(),x(t.$$.fragment),i=I(),x(u.$$.fragment),this.h()},l(c){e=w(c,"MAIN",{class:!0});var d=N(e);A(n.$$.fragment,d),r=S(d),A(s.$$.fragment,d),l=S(d),A(t.$$.fragment,d),i=S(d),A(u.$$.fragment,d),d.forEach(m),this.h()},h(){y(e,"class","svelte-1fmyuk2")},m(c,d){k(c,e,d),P(n,e,null),b(e,r),P(s,e,null),b(e,l),P(t,e,null),b(e,i),P(u,e,null),o=!0},p:X,i(c){o||(g(n.$$.fragment,c),g(s.$$.fragment,c),g(t.$$.fragment,c),g(u.$$.fragment,c),o=!0)},o(c){v(n.$$.fragment,c),v(s.$$.fragment,c),v(t.$$.fragment,c),v(u.$$.fragment,c),o=!1},d(c){c&&m(e),B(n),B(s),B(t),B(u)}}}class Ze extends q{constructor(e){super(),z(this,e,null,Le,j,{})}}export{Ze as component};

import{s as R,b as V,i as Z,k as x,n as z,r as ee,c as J,o as ie}from"../chunks/scheduler.CfH2YMek.js";import{S as F,i as G,k as q,l as M,a as _,d as v,g as I,B as te,e as B,s as D,c as A,f as T,n as g,h as $,r as p,v as P,q as U,p as y,D as ce,E as K,x as le,y as ne,z as se,A as oe}from"../chunks/index.Cf0r2nA0.js";import{b as k}from"../chunks/paths.BnH8Pw5N.js";import{i as N}from"../chunks/inline-svg.action.CPrgV8CR.js";import{w as j,d as ue}from"../chunks/index.C5hTy8eg.js";import{f as re}from"../chunks/index.BGTp2OyQ.js";function L(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function fe(t){let e,l,n,s,i;return{c(){e=q("svg")},l(o){e=M(o,"svg",{}),_(e).forEach(v)},m(o,a){I(o,e,a),s||(i=V(l=N.call(null,e,`${k}/images/counter-${t[0]}-large.svg`)),s=!0)},p(o,[a]){l&&Z(l.update)&&a&1&&l.update.call(null,`${k}/images/counter-${o[0]}-large.svg`)},i(o){o&&(n||x(()=>{n=te(e,re,{y:-1e3,duration:600}),n.start()}))},o:z,d(o){o&&v(e),s=!1,i()}}}function me(t,e,l){let{color:n}=e;return t.$$set=s=>{"color"in s&&l(0,n=s.color)},[n]}class de extends F{constructor(e){super(),G(this,e,me,fe,R,{color:0})}}const ge=Array(7*6).fill(void 0),{set:De,update:he,subscribe:ve}=j(ge),pe={subscribe:ve};function _e(t){he(e=>{const l=[...e],n=e.map((s,i)=>({value:s,column:i%7,index:i})).filter(s=>s.column===t.indexColumn&&s.value===void 0).pop();return n?(l[n.index]=t.color,l):e})}function Q(t,e,l){const n=t.slice();return n[10]=e[l],n[12]=l,n}function W(t){let e,l;return e=new de({props:{color:t[2][t[12]]}}),{c(){le(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,s){se(e,n,s),l=!0},p(n,s){const i={};s&4&&(i.color=n[2][n[12]]),e.$set(i)},i(n){l||(p(e.$$.fragment,n),l=!0)},o(n){y(e.$$.fragment,n),l=!1},d(n){oe(e,n)}}}function X(t){let e,l,n,s,i,o=t[2][t[12]]&&W(t);return{c(){e=B("button"),o&&o.c(),l=D(),this.h()},l(a){e=A(a,"BUTTON",{class:!0,id:!0,role:!0,tabindex:!0});var u=_(e);o&&o.l(u),l=T(u),u.forEach(v),this.h()},h(){g(e,"class","cell"),g(e,"id",`board-cell-${t[12]}`),g(e,"role","cell"),g(e,"tabindex","0")},m(a,u){I(a,e,u),o&&o.m(e,null),$(e,l),n=!0,s||(i=[K(e,"mouseenter",t[5](t[12])),K(e,"click",t[6](t[12]))],s=!0)},p(a,u){t=a,t[2][t[12]]?o?(o.p(t,u),u&4&&p(o,1)):(o=W(t),o.c(),p(o,1),o.m(e,l)):o&&(P(),y(o,1,1,()=>{o=null}),U())},i(a){n||(p(o),n=!0)},o(a){y(o),n=!1},d(a){a&&v(e),o&&o.d(),s=!1,ee(i)}}}function Y(t){let e,l,n,s,i,o;return{c(){e=q("svg"),this.h()},l(a){e=M(a,"svg",{style:!0,width:!0,height:!0}),_(e).forEach(v),this.h()},h(){g(e,"style",l=`grid-area: cell-${t[3].column}`),g(e,"width","38"),g(e,"height","30")},m(a,u){I(a,e,u),i||(o=V(n=N.call(null,e,k+"/images/marker-"+t[1]+".svg")),i=!0)},p(a,u){t=a,u&8&&l!==(l=`grid-area: cell-${t[3].column}`)&&g(e,"style",l),n&&Z(n.update)&&u&2&&n.update.call(null,k+"/images/marker-"+t[1]+".svg")},i(a){a&&(s||x(()=>{s=te(e,re,{x:-t[0],duration:ae,opacity:1}),s.start()}))},o:z,d(a){a&&v(e),i=!1,o()}}}function be(t){let e,l,n,s,i,o,a,u,E=t[3].column,C,b,S,d=L(Array(7*6)),r=[];for(let c=0;c<d.length;c+=1)r[c]=X(Q(t,d,c));const H=c=>y(r[c],1,1,()=>{r[c]=null});let h=Y(t);return{c(){e=B("div"),l=q("svg"),n=D(),s=B("div");for(let c=0;c<r.length;c+=1)r[c].c();i=D(),o=q("svg"),a=D(),u=B("div"),h.c(),this.h()},l(c){e=A(c,"DIV",{class:!0});var f=_(e);l=M(f,"svg",{class:!0,height:!0}),_(l).forEach(v),n=T(f),s=A(f,"DIV",{class:!0});var m=_(s);for(let O=0;O<r.length;O+=1)r[O].l(m);m.forEach(v),i=T(f),o=M(f,"svg",{class:!0}),_(o).forEach(v),a=T(f),u=A(f,"DIV",{class:!0});var w=_(u);h.l(w),w.forEach(v),f.forEach(v),this.h()},h(){g(l,"class","shadow"),g(l,"height","594"),g(s,"class","cells"),g(o,"class","overlay"),g(u,"class","board-cursor"),g(e,"class","board svelte-1e4pdv4")},m(c,f){I(c,e,f),$(e,l),$(e,n),$(e,s);for(let m=0;m<r.length;m+=1)r[m]&&r[m].m(s,null);$(e,i),$(e,o),$(e,a),$(e,u),h.m(u,null),C=!0,b||(S=[V(N.call(null,l,k+"/images/board-layer-black-large.svg")),V(N.call(null,o,k+"/images/board-layer-white-large.svg"))],b=!0)},p(c,[f]){if(f&100){d=L(Array(7*6));let m;for(m=0;m<d.length;m+=1){const w=Q(c,d,m);r[m]?(r[m].p(w,f),p(r[m],1)):(r[m]=X(w),r[m].c(),p(r[m],1),r[m].m(s,null))}for(P(),m=d.length;m<r.length;m+=1)H(m);U()}f&8&&R(E,E=c[3].column)?(P(),y(h,1,1,z),U(),h=Y(c),h.c(),p(h,1),h.m(u,null)):h.p(c,f)},i(c){if(!C){for(let f=0;f<d.length;f+=1)p(r[f]);p(h),C=!0}},o(c){r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)y(r[f]);y(h),C=!1},d(c){c&&v(e),ce(r,c),h.d(c),b=!1,ee(S)}}}let ae=200;function $e(t,e,l){let n,s;J(t,pe,d=>l(2,n=d));const i=j(0),o=j(0);let a=0;const u=ue([i,o],([d,r])=>({column:d,prevColumn:r}));J(t,u,d=>l(3,s=d)),ie(()=>{u.subscribe(({column:d,prevColumn:r})=>{const H=document.getElementById(`board-cell-${r}`).getClientRects()[0],h=document.getElementById(`board-cell-${d}`).getClientRects()[0];l(0,a=h.x-H.x)})});let E;function C(d){return()=>{clearTimeout(E),E=setTimeout(()=>{i.update(r=>(o.set(r),d%7))},ae*.75)}}let b="red";function S(d){return r=>{_e({indexColumn:d%7,color:b}),l(1,b=b==="red"?"yellow":"red")}}return[a,b,n,s,u,C,S]}class ye extends F{constructor(e){super(),G(this,e,$e,be,R,{})}}function Ce(t){let e,l,n;return l=new ye({}),{c(){e=B("main"),le(l.$$.fragment),this.h()},l(s){e=A(s,"MAIN",{class:!0});var i=_(e);ne(l.$$.fragment,i),i.forEach(v),this.h()},h(){g(e,"class","svelte-bts22h")},m(s,i){I(s,e,i),se(l,e,null),n=!0},p:z,i(s){n||(p(l.$$.fragment,s),n=!0)},o(s){y(l.$$.fragment,s),n=!1},d(s){s&&v(e),oe(l)}}}function ke(t){return[]}class Te extends F{constructor(e){super(),G(this,e,ke,Ce,R,{})}}export{Te as component};

import{s as R,e as q,c as O,o as se,n as ae,E as Z,r as Se}from"../chunks/scheduler.Bp73tsFP.js";import{S as W,i as H,e as I,k as A,c as S,a as D,l as B,d as v,g as T,o as z,p as h,B as J,q as C,C as De,r as N,w as de,v as x,z as ee,x as te,n as _,s as P,t as L,f as V,b as F,h as g,j as me,D as Pe,m as le}from"../chunks/index.WTjgDaL3.js";import{d as Ve,w as K}from"../chunks/index.CpYc9ZES.js";import{f as Y,a as ye}from"../chunks/index.BXk-0J-c.js";import{I as U,r as Ae}from"../chunks/Image.DQnCJXXv.js";import{b as Be}from"../chunks/paths.7acawR9i.js";function $e(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}const ke=Array(7*6).fill(void 0),we="red",oe=K(we),ie=K(ke),ue=K(0),Ce=K(0),ze=K(),X=Ve([ie,oe,ue],([n,e,t])=>({grid:n,turn:e,activeColumn:t}));function Ne(n){return new Promise(e=>{ie.update(t=>{const s=[...t],a=t.map((l,r)=>({value:l,column:r%7,index:r})).filter(l=>l.column===n.indexColumn&&l.value===void 0).pop();return a?(oe.update(l=>(s[a.index]=l,l==="red"?"yellow":"red")),e(!0),s):(e(!1),t)})})}function Ee(){ie.set(ke),oe.set(we),ue.set(0),Ce.update(n=>n+1)}function Te(n){ue.set(n%7)}function Me(n){let e,t,s,a,l;return t=new U({props:{name:`counter-${n[0]}`}}),{c(){e=I("div"),A(t.$$.fragment)},l(r){e=S(r,"DIV",{});var o=D(e);B(t.$$.fragment,o),o.forEach(v)},m(r,o){T(r,e,o),z(t,e,null),l=!0},p(r,[o]){const i={};o&1&&(i.name=`counter-${r[0]}`),t.$set(i)},i(r){l||(h(t.$$.fragment,r),r&&q(()=>{l&&(a&&a.end(1),s=J(e,Y,{y:-1e3,duration:600}),s.start())}),l=!0)},o(r){C(t.$$.fragment,r),s&&s.invalidate(),r&&(a=De(e,ye,{})),l=!1},d(r){r&&v(e),N(t),r&&a&&a.end()}}}function Ge(n,e,t){let{color:s}=e;return n.$$set=a=>{"color"in a&&t(0,s=a.color)},[s]}class Re extends W{constructor(e){super(),H(this,e,Ge,Me,R,{color:0})}}function pe(n){let e,t=n[2].current,s,a=ge(n);return{c(){e=I("div"),a.c(),this.h()},l(l){e=S(l,"DIV",{class:!0});var r=D(e);a.l(r),r.forEach(v),this.h()},h(){_(e,"class","board-cursor svelte-7k3e")},m(l,r){T(l,e,r),a.m(e,null),s=!0},p(l,r){r&4&&R(t,t=l[2].current)?(ee(),C(a,1,1,ae),te(),a=ge(l),a.c(),h(a,1),a.m(e,null)):a.p(l,r)},i(l){s||(h(a),s=!0)},o(l){C(a),s=!1},d(l){l&&v(e),a.d(l)}}}function ge(n){let e,t,s,a,l;return t=new U({props:{name:`marker-${n[3].turn}`}}),{c(){e=I("div"),A(t.$$.fragment),this.h()},l(r){e=S(r,"DIV",{style:!0});var o=D(e);B(t.$$.fragment,o),o.forEach(v),this.h()},h(){_(e,"style",s=`grid-area: cell-${n[2].current}`)},m(r,o){T(r,e,o),z(t,e,null),l=!0},p(r,o){n=r;const i={};o&8&&(i.name=`marker-${n[3].turn}`),t.$set(i),(!l||o&4&&s!==(s=`grid-area: cell-${n[2].current}`))&&_(e,"style",s)},i(r){l||(h(t.$$.fragment,r),r&&(a||q(()=>{a=J(e,Y,{x:-n[0],duration:200,opacity:1}),a.start()})),l=!0)},o(r){C(t.$$.fragment,r),l=!1},d(r){r&&v(e),N(t)}}}function je(n){let e,t,s,a;q(n[5]);let l=n[1]>1079&&pe(n);return{c(){l&&l.c(),e=de()},l(r){l&&l.l(r),e=de()},m(r,o){l&&l.m(r,o),T(r,e,o),t=!0,s||(a=x(window,"resize",n[5]),s=!0)},p(r,[o]){r[1]>1079?l?(l.p(r,o),o&2&&h(l,1)):(l=pe(r),l.c(),h(l,1),l.m(e.parentNode,e)):l&&(ee(),C(l,1,1,()=>{l=null}),te())},i(r){t||(h(l),t=!0)},o(r){C(l),t=!1},d(r){r&&v(e),l&&l.d(r),s=!1,a()}}}function qe(n,e,t){let s,a;O(n,X,d=>t(3,a=d));let l=0;const r=K({});O(n,r,d=>t(2,s=d)),se(()=>{r.subscribe(({current:d,previous:u})=>{if(d!==void 0&&u!==void 0){const m=document.getElementById(`board-cell-${u}`).getClientRects()[0],b=document.getElementById(`board-cell-${d}`).getClientRects()[0];t(0,l=b.x-m.x)}}),X.subscribe(d=>{r.update(u=>u.current!==d.activeColumn?{current:d.activeColumn,previous:u.current}:u)})});let o;function i(){t(1,o=window.innerWidth)}return[l,o,s,a,r,i]}class Oe extends W{constructor(e){super(),H(this,e,qe,je,R,{})}}function Ue(n){let e,t,s,a,l,r,o,i,d,u,m,b,p;return t=new U({props:{name:`turn-background-${n[0].turn}`}}),{c(){e=I("div"),A(t.$$.fragment),s=P(),a=I("span"),l=L(n[2]),r=L(" turn"),o=P(),i=I("span"),d=L(n[1]),u=L("s"),this.h()},l(c){e=S(c,"DIV",{class:!0});var $=D(e);B(t.$$.fragment,$),s=V($),a=S($,"SPAN",{});var w=D(a);l=F(w,n[2]),r=F(w," turn"),w.forEach(v),o=V($),i=S($,"SPAN",{});var G=D(i);d=F(G,n[1]),u=F(G,"s"),G.forEach(v),$.forEach(v),this.h()},h(){_(e,"class",m=Z(`display-turn ${n[0].turn}`)+" svelte-1vn90zz")},m(c,$){T(c,e,$),z(t,e,null),g(e,s),g(e,a),g(a,l),g(a,r),g(e,o),g(e,i),g(i,d),g(i,u),p=!0},p(c,[$]){const w={};$&1&&(w.name=`turn-background-${c[0].turn}`),t.$set(w),(!p||$&4)&&me(l,c[2]),(!p||$&2)&&me(d,c[1]),(!p||$&1&&m!==(m=Z(`display-turn ${c[0].turn}`)+" svelte-1vn90zz"))&&_(e,"class",m)},i(c){p||(h(t.$$.fragment,c),c&&(b||q(()=>{b=J(e,Y,{delay:1e3,y:300}),b.start()})),p=!0)},o(c){C(t.$$.fragment,c),p=!1},d(c){c&&v(e),N(t)}}}function We(n,e,t){let s,a,l;O(n,X,i=>t(0,a=i)),O(n,Ce,i=>t(4,l=i));let r="red",o=31;return se(()=>{const i=setInterval(()=>{t(1,o=o-1)},1e3);return()=>{clearInterval(i)}}),n.$$.update=()=>{n.$$.dirty&16&&l&&(t(3,r="red"),t(1,o=30)),n.$$.dirty&9&&a.turn!==r&&(t(3,r=a.turn),t(1,o=30)),n.$$.dirty&8&&t(2,s=r==="red"?"Player 1's":"Player 2's")},[a,o,s,r,l]}class He extends W{constructor(e){super(),H(this,e,We,Ue,R,{})}}function ve(n,e,t){const s=n.slice();return s[5]=e[t],s[7]=t,s}function he(n){let e,t;return e=new Re({props:{color:n[0].grid[n[7]]}}),{c(){A(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,a){const l={};a&1&&(l.color=s[0].grid[s[7]]),e.$set(l)},i(s){t||(h(e.$$.fragment,s),t=!0)},o(s){C(e.$$.fragment,s),t=!1},d(s){N(e,s)}}}function _e(n){let e,t,s,a,l,r=n[0].grid[n[7]]&&he(n);return{c(){e=I("button"),r&&r.c(),t=P(),this.h()},l(o){e=S(o,"BUTTON",{class:!0,id:!0,role:!0,tabindex:!0});var i=D(e);r&&r.l(i),t=V(i),i.forEach(v),this.h()},h(){_(e,"class","cell svelte-1r3s0pc"),_(e,"id",`board-cell-${n[7]}`),_(e,"role","cell"),_(e,"tabindex","0")},m(o,i){T(o,e,i),r&&r.m(e,null),g(e,t),s=!0,a||(l=[x(e,"mouseenter",n[2](n[7])),x(e,"click",n[3](n[7]))],a=!0)},p(o,i){n=o,n[0].grid[n[7]]?r?(r.p(n,i),i&1&&h(r,1)):(r=he(n),r.c(),h(r,1),r.m(e,t)):r&&(ee(),C(r,1,1,()=>{r=null}),te())},i(o){s||(h(r),s=!0)},o(o){C(r),s=!1},d(o){o&&v(e),r&&r.d(),a=!1,Se(l)}}}function Le(n){let e,t,s,a,l,r,o,i,d,u,m,b,p,c,$,w,G,re,Q;a=new U({props:{class:"shadow",name:"board-layer-black"}});let j=$e(Array(7*6)),y=[];for(let f=0;f<j.length;f+=1)y[f]=_e(ve(n,j,f));const Ie=f=>C(y[f],1,1,()=>{y[f]=null});return i=new U({props:{class:"overlay",name:"board-layer-white"}}),m=new Oe({}),c=new He({}),{c(){e=I("div"),t=I("div"),s=I("div"),A(a.$$.fragment),l=P(),r=I("div");for(let f=0;f<y.length;f+=1)y[f].c();o=P(),A(i.$$.fragment),d=P(),u=I("div"),A(m.$$.fragment),p=P(),A(c.$$.fragment),$=P(),w=I("div"),this.h()},l(f){e=S(f,"DIV",{class:!0});var E=D(e);t=S(E,"DIV",{class:!0});var k=D(t);s=S(k,"DIV",{class:!0});var M=D(s);B(a.$$.fragment,M),l=V(M),r=S(M,"DIV",{class:!0});var ce=D(r);for(let ne=0;ne<y.length;ne+=1)y[ne].l(ce);ce.forEach(v),o=V(M),B(i.$$.fragment,M),d=V(M),u=S(M,"DIV",{});var fe=D(u);B(m.$$.fragment,fe),fe.forEach(v),M.forEach(v),k.forEach(v),p=V(E),B(c.$$.fragment,E),$=V(E),w=S(E,"DIV",{class:!0,style:!0}),D(w).forEach(v),E.forEach(v),this.h()},h(){_(r,"class","cells svelte-1r3s0pc"),_(s,"class","board-grid svelte-1r3s0pc"),_(t,"class","board"),_(w,"class","game-status-background svelte-1r3s0pc"),_(w,"style",G=`background-color: var(--${n[1]?n[1]:"dark-purple"})`),_(e,"class","board-container svelte-1r3s0pc")},m(f,E){T(f,e,E),g(e,t),g(t,s),z(a,s,null),g(s,l),g(s,r);for(let k=0;k<y.length;k+=1)y[k]&&y[k].m(r,null);g(s,o),z(i,s,null),g(s,d),g(s,u),z(m,u,null),g(e,p),z(c,e,null),g(e,$),g(e,w),Q=!0},p(f,[E]){if(E&13){j=$e(Array(7*6));let k;for(k=0;k<j.length;k+=1){const M=ve(f,j,k);y[k]?(y[k].p(M,E),h(y[k],1)):(y[k]=_e(M),y[k].c(),h(y[k],1),y[k].m(r,null))}for(ee(),k=j.length;k<y.length;k+=1)Ie(k);te()}(!Q||E&2&&G!==(G=`background-color: var(--${f[1]?f[1]:"dark-purple"})`))&&_(w,"style",G)},i(f){if(!Q){h(a.$$.fragment,f);for(let E=0;E<j.length;E+=1)h(y[E]);h(i.$$.fragment,f),h(m.$$.fragment,f),f&&(b||q(()=>{b=J(u,ye,{delay:1e3}),b.start()})),h(c.$$.fragment,f),f&&(re||q(()=>{re=J(w,Y,{delay:1e3,y:300}),re.start()})),Q=!0}},o(f){C(a.$$.fragment,f),y=y.filter(Boolean);for(let E=0;E<y.length;E+=1)C(y[E]);C(i.$$.fragment,f),C(m.$$.fragment,f),C(c.$$.fragment,f),Q=!1},d(f){f&&v(e),N(a),Pe(y,f),N(i),N(m),N(c)}}}function Fe(n,e,t){let s,a;O(n,X,i=>t(0,s=i)),O(n,ze,i=>t(1,a=i)),se(()=>{Ee()});let l;function r(i){return()=>{clearTimeout(l),l=setTimeout(()=>{Te(i)},150)}}function o(i){return()=>{Ne({indexColumn:i%7})}}return[s,a,r,o]}class Je extends W{constructor(e){super(),H(this,e,Fe,Le,R,{})}}function Ke(n){let e,t,s="Menu",a,l,r,o,i="Restart",d,u,m;return l=new U({props:{class:"logo",name:"logo"}}),{c(){e=I("div"),t=I("a"),t.textContent=s,a=P(),A(l.$$.fragment),r=P(),o=I("button"),o.textContent=i,this.h()},l(b){e=S(b,"DIV",{class:!0});var p=D(e);t=S(p,"A",{href:!0,class:!0,"data-svelte-h":!0}),le(t)!=="svelte-axxoo7"&&(t.textContent=s),a=V(p),B(l.$$.fragment,p),r=V(p),o=S(p,"BUTTON",{class:!0,"data-svelte-h":!0}),le(o)!=="svelte-1akbaj5"&&(o.textContent=i),p.forEach(v),this.h()},h(){_(t,"href",`${Be}${Ae("/")}`),_(t,"class","flat-button button-purple"),_(o,"class","flat-button button-purple"),_(e,"class","menu svelte-1bcp1gc")},m(b,p){T(b,e,p),g(e,t),g(e,a),z(l,e,null),g(e,r),g(e,o),d=!0,u||(m=x(o,"click",n[0]),u=!0)},p:ae,i(b){d||(h(l.$$.fragment,b),d=!0)},o(b){C(l.$$.fragment,b),d=!1},d(b){b&&v(e),N(l),u=!1,m()}}}function Qe(n){return[()=>{Ee()}]}class Xe extends W{constructor(e){super(),H(this,e,Qe,Ke,R,{})}}function Ye(n){let e;return{c(){e=L("Player 2")},l(t){e=F(t,"Player 2")},m(t,s){T(t,e,s)},d(t){t&&v(e)}}}function Ze(n){let e;return{c(){e=L("Player 1")},l(t){e=F(t,"Player 1")},m(t,s){T(t,e,s)},d(t){t&&v(e)}}}function xe(n){let e,t,s,a,l,r,o="12",i,d,u;t=new U({props:{class:`${n[0]===n[1].turn?"active":""} icon ${n[0]}`,name:n[0]==="red"?"player-one":"player-two"}});function m(c,$){return c[0]==="red"?Ze:Ye}let b=m(n),p=b(n);return{c(){e=I("div"),A(t.$$.fragment),s=P(),a=I("span"),p.c(),l=P(),r=I("span"),r.textContent=o,this.h()},l(c){e=S(c,"DIV",{class:!0});var $=D(e);B(t.$$.fragment,$),s=V($),a=S($,"SPAN",{class:!0});var w=D(a);p.l(w),w.forEach(v),l=V($),r=S($,"SPAN",{class:!0,"data-svelte-h":!0}),le(r)!=="svelte-dbx7z1"&&(r.textContent=o),$.forEach(v),this.h()},h(){_(a,"class","svelte-ukks6l"),_(r,"class","svelte-ukks6l"),_(e,"class",i=Z(`score-board ${n[0]}`)+" svelte-ukks6l")},m(c,$){T(c,e,$),z(t,e,null),g(e,s),g(e,a),p.m(a,null),g(e,l),g(e,r),u=!0},p(c,[$]){n=c;const w={};$&3&&(w.class=`${n[0]===n[1].turn?"active":""} icon ${n[0]}`),$&1&&(w.name=n[0]==="red"?"player-one":"player-two"),t.$set(w),b!==(b=m(n))&&(p.d(1),p=b(n),p&&(p.c(),p.m(a,null))),(!u||$&1&&i!==(i=Z(`score-board ${n[0]}`)+" svelte-ukks6l"))&&_(e,"class",i)},i(c){u||(h(t.$$.fragment,c),c&&(d||q(()=>{d=J(e,Y,{x:300*(n[0]==="red"?-1:1),delay:1e3}),d.start()})),u=!0)},o(c){C(t.$$.fragment,c),u=!1},d(c){c&&v(e),N(t),p.d()}}}function et(n,e,t){let s;O(n,X,l=>t(1,s=l));let{player:a}=e;return n.$$set=l=>{"player"in l&&t(0,a=l.player)},[a,s]}class be extends W{constructor(e){super(),H(this,e,et,xe,R,{player:0})}}function tt(n){let e,t,s,a,l,r,o,i,d;return t=new Xe({}),a=new be({props:{player:"red"}}),r=new be({props:{player:"yellow"}}),i=new Je({}),{c(){e=I("main"),A(t.$$.fragment),s=P(),A(a.$$.fragment),l=P(),A(r.$$.fragment),o=P(),A(i.$$.fragment),this.h()},l(u){e=S(u,"MAIN",{class:!0});var m=D(e);B(t.$$.fragment,m),s=V(m),B(a.$$.fragment,m),l=V(m),B(r.$$.fragment,m),o=V(m),B(i.$$.fragment,m),m.forEach(v),this.h()},h(){_(e,"class","svelte-1a8y0ai")},m(u,m){T(u,e,m),z(t,e,null),g(e,s),z(a,e,null),g(e,l),z(r,e,null),g(e,o),z(i,e,null),d=!0},p:ae,i(u){d||(h(t.$$.fragment,u),h(a.$$.fragment,u),h(r.$$.fragment,u),h(i.$$.fragment,u),d=!0)},o(u){C(t.$$.fragment,u),C(a.$$.fragment,u),C(r.$$.fragment,u),C(i.$$.fragment,u),d=!1},d(u){u&&v(e),N(t),N(a),N(r),N(i)}}}class it extends W{constructor(e){super(),H(this,e,null,tt,R,{})}}export{it as component};

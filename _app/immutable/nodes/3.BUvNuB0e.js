import{s as P,b as T,i as V,k as U,n as R,r as ee,c as K,o as ae}from"../chunks/scheduler.CfH2YMek.js";import{S as j,i as F,k as q,l as M,a as p,d as g,g as E,B as le,e as z,s as I,c as B,f as D,n as v,h as y,D as H,r as _,v as G,q as J,p as w,E as ue,x as te,y as ne,z as se,A as oe}from"../chunks/index.RMjbSyLa.js";import{b as $}from"../chunks/paths.5epGHpYn.js";import{i as N}from"../chunks/inline-svg.action.CPrgV8CR.js";import{w as O,d as ce}from"../chunks/index.C5hTy8eg.js";import{f as re}from"../chunks/index.BGTp2OyQ.js";function L(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function fe(l){let e,n,t,s,o;return{c(){e=q("svg")},l(r){e=M(r,"svg",{}),p(e).forEach(g)},m(r,a){E(r,e,a),s||(o=T(n=N.call(null,e,`${$}/images/counter-${l[0]}-${l[1]}.svg`)),s=!0)},p(r,[a]){n&&V(n.update)&&a&3&&n.update.call(null,`${$}/images/counter-${r[0]}-${r[1]}.svg`)},i(r){r&&(t||U(()=>{t=le(e,re,{y:-1e3,duration:600}),t.start()}))},o:R,d(r){r&&g(e),s=!1,o()}}}function me(l,e,n){let{color:t}=e,{imageSize:s}=e;return l.$$set=o=>{"color"in o&&n(0,t=o.color),"imageSize"in o&&n(1,s=o.imageSize)},[t,s]}class de extends j{constructor(e){super(),F(this,e,me,fe,P,{color:0,imageSize:1})}}const ge=Array(7*6).fill(void 0),{set:Ie,update:he,subscribe:ve}=O(ge),pe={subscribe:ve};function _e(l){return new Promise(e=>{he(n=>{const t=[...n],s=n.map((o,r)=>({value:o,column:r%7,index:r})).filter(o=>o.column===l.indexColumn&&o.value===void 0).pop();return s?(t[s.index]=l.color,e(!0),t):(e(!1),n)})})}function Q(l,e,n){const t=l.slice();return t[13]=e[n],t[15]=n,t}function X(l){let e,n;return e=new de({props:{color:l[4][l[15]],imageSize:l[3]}}),{c(){te(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,s){se(e,t,s),n=!0},p(t,s){const o={};s&16&&(o.color=t[4][t[15]]),s&8&&(o.imageSize=t[3]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){oe(e,t)}}}function Y(l){let e,n,t,s,o,r=l[4][l[15]]&&X(l);return{c(){e=z("button"),r&&r.c(),n=I(),this.h()},l(a){e=B(a,"BUTTON",{class:!0,id:!0,role:!0,tabindex:!0});var d=p(e);r&&r.l(d),n=D(d),d.forEach(g),this.h()},h(){v(e,"class","cell svelte-1twn85u"),v(e,"id",`board-cell-${l[15]}`),v(e,"role","cell"),v(e,"tabindex","0")},m(a,d){E(a,e,d),r&&r.m(e,null),y(e,n),t=!0,s||(o=[H(e,"mouseenter",l[7](l[15])),H(e,"click",l[8](l[15]))],s=!0)},p(a,d){l=a,l[4][l[15]]?r?(r.p(l,d),d&16&&_(r,1)):(r=X(l),r.c(),_(r,1),r.m(e,n)):r&&(G(),w(r,1,1,()=>{r=null}),J())},i(a){t||(_(r),t=!0)},o(a){w(r),t=!1},d(a){a&&g(e),r&&r.d(),s=!1,ee(o)}}}function Z(l){let e,n=l[5].column,t=x(l);return{c(){e=z("div"),t.c(),this.h()},l(s){e=B(s,"DIV",{class:!0});var o=p(e);t.l(o),o.forEach(g),this.h()},h(){v(e,"class","board-cursor")},m(s,o){E(s,e,o),t.m(e,null)},p(s,o){o&32&&P(n,n=s[5].column)?(G(),w(t,1,1,R),J(),t=x(s),t.c(),_(t,1),t.m(e,null)):t.p(s,o)},d(s){s&&g(e),t.d(s)}}}function x(l){let e,n,t,s,o,r;return{c(){e=q("svg"),this.h()},l(a){e=M(a,"svg",{style:!0}),p(e).forEach(g),this.h()},h(){v(e,"style",n=`grid-area: cell-${l[5].column}`)},m(a,d){E(a,e,d),o||(r=T(t=N.call(null,e,`${$}/images/marker-${l[2]}.svg`)),o=!0)},p(a,d){l=a,d&32&&n!==(n=`grid-area: cell-${l[5].column}`)&&v(e,"style",n),t&&V(t.update)&&d&4&&t.update.call(null,`${$}/images/marker-${l[2]}.svg`)},i(a){a&&(s||U(()=>{s=le(e,re,{x:-l[1],duration:ie,opacity:1}),s.start()}))},o:R,d(a){a&&g(e),o=!1,r()}}}function be(l){let e,n,t,s,o,r,a,d,k,C,b,A;U(l[9]);let h=L(Array(7*6)),c=[];for(let i=0;i<h.length;i+=1)c[i]=Y(Q(l,h,i));const W=i=>w(c[i],1,1,()=>{c[i]=null});let u=l[0]>768&&Z(l);return{c(){e=z("div"),n=q("svg"),s=I(),o=z("div");for(let i=0;i<c.length;i+=1)c[i].c();r=I(),a=q("svg"),k=I(),u&&u.c(),this.h()},l(i){e=B(i,"DIV",{class:!0});var f=p(e);n=M(f,"svg",{class:!0}),p(n).forEach(g),s=D(f),o=B(f,"DIV",{class:!0});var m=p(o);for(let S=0;S<c.length;S+=1)c[S].l(m);m.forEach(g),r=D(f),a=M(f,"svg",{class:!0}),p(a).forEach(g),k=D(f),u&&u.l(f),f.forEach(g),this.h()},h(){v(n,"class","shadow"),v(o,"class","cells svelte-1twn85u"),v(a,"class","overlay"),v(e,"class","board svelte-1twn85u")},m(i,f){E(i,e,f),y(e,n),y(e,s),y(e,o);for(let m=0;m<c.length;m+=1)c[m]&&c[m].m(o,null);y(e,r),y(e,a),y(e,k),u&&u.m(e,null),C=!0,b||(A=[H(window,"resize",l[9]),T(t=N.call(null,n,`${$}/images/board-layer-black-${l[3]}.svg`)),T(d=N.call(null,a,`${$}/images/board-layer-white-${l[3]}.svg`))],b=!0)},p(i,[f]){if(t&&V(t.update)&&f&8&&t.update.call(null,`${$}/images/board-layer-black-${i[3]}.svg`),f&408){h=L(Array(7*6));let m;for(m=0;m<h.length;m+=1){const S=Q(i,h,m);c[m]?(c[m].p(S,f),_(c[m],1)):(c[m]=Y(S),c[m].c(),_(c[m],1),c[m].m(o,null))}for(G(),m=h.length;m<c.length;m+=1)W(m);J()}d&&V(d.update)&&f&8&&d.update.call(null,`${$}/images/board-layer-white-${i[3]}.svg`),i[0]>768?u?u.p(i,f):(u=Z(i),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i(i){if(!C){for(let f=0;f<h.length;f+=1)_(c[f]);C=!0}},o(i){c=c.filter(Boolean);for(let f=0;f<c.length;f+=1)w(c[f]);C=!1},d(i){i&&g(e),ue(c,i),u&&u.d(),b=!1,ee(A)}}}let ie=200;function $e(l,e,n){let t,s;K(l,pe,u=>n(4,t=u));const o=O(0),r=O(0);let a=0;const d=ce([o,r],([u,i])=>({column:u,prevColumn:i}));K(l,d,u=>n(5,s=u)),ae(()=>{d.subscribe(({column:u,prevColumn:i})=>{const f=document.getElementById(`board-cell-${i}`).getClientRects()[0],m=document.getElementById(`board-cell-${u}`).getClientRects()[0];n(1,a=m.x-f.x)})});let k;function C(u){return()=>{clearTimeout(k),k=setTimeout(()=>{o.update(i=>(r.set(i),u%7))},ie*.75)}}let b="red";function A(u){return async i=>{await _e({indexColumn:u%7,color:b})&&n(2,b=b==="red"?"yellow":"red")}}let h,c="large";function W(){n(0,h=window.innerWidth)}return l.$$.update=()=>{l.$$.dirty&1&&n(3,c=h<640?"small":"large"),l.$$.dirty&1&&console.log({innerWidth:h})},[h,a,b,c,t,s,d,C,A,W]}class ye extends j{constructor(e){super(),F(this,e,$e,be,P,{})}}function we(l){let e,n,t;return n=new ye({}),{c(){e=z("main"),te(n.$$.fragment),this.h()},l(s){e=B(s,"MAIN",{class:!0});var o=p(e);ne(n.$$.fragment,o),o.forEach(g),this.h()},h(){v(e,"class","svelte-bts22h")},m(s,o){E(s,e,o),se(n,e,null),t=!0},p:R,i(s){t||(_(n.$$.fragment,s),t=!0)},o(s){w(n.$$.fragment,s),t=!1},d(s){s&&g(e),oe(n)}}}function ke(l){return[]}class De extends j{constructor(e){super(),F(this,e,ke,we,P,{})}}export{De as component};

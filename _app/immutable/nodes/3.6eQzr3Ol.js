import{s as L,b as H,c as G,o as ie,n as ce,D as se,E as le,r as we,j as Be}from"../chunks/scheduler.BDrQ4VOq.js";import{S as J,i as K,e as C,k as V,c as k,a as B,l as z,d as v,g as j,o as O,p as w,B as te,q as P,C as De,r as U,w as pe,v as q,z as ae,x as oe,n as h,s as S,t as x,f as T,b as ee,h as g,j as $e,D as Ae,m as Q}from"../chunks/index.HB6mBGce.js";import{d as Ne,w as X,g as Ve}from"../chunks/entry.BPYifwnj.js";import{f as re,a as Ee}from"../chunks/index.CQ7-t1xP.js";import{I as F,r as ze}from"../chunks/Image.B4FoLQTb.js";import{b as Oe}from"../chunks/paths.BdlPZKF5.js";function ve(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}const Ie=Array(7*6).fill(void 0),Pe="red",fe=X(Pe),de=X(Ie),me=X(0),Se=X(0),Ue=X(),W=X(!1),ne=Ne([de,fe,me],([r,e,n])=>({grid:r,turn:e,activeColumn:n}));function je(r){return new Promise(e=>{de.update(n=>{const l=[...n],a=n.map((s,t)=>({value:s,column:t%7,index:t})).filter(s=>s.column===r.indexColumn&&s.value===void 0).pop();return a?(fe.update(s=>(l[a.index]=s,s==="red"?"yellow":"red")),e(!0),l):(e(!1),n)})})}function Te(){de.set(Ie),fe.set(Pe),me.set(0),Se.update(r=>r+1)}function Me(r){me.set(r%7)}function Ge(r){let e,n,l,a,s;return n=new F({props:{name:`counter-${r[0]}`}}),{c(){e=C("div"),V(n.$$.fragment)},l(t){e=k(t,"DIV",{});var o=B(e);z(n.$$.fragment,o),o.forEach(v)},m(t,o){j(t,e,o),O(n,e,null),s=!0},p(t,[o]){const u={};o&1&&(u.name=`counter-${t[0]}`),n.$set(u)},i(t){s||(w(n.$$.fragment,t),t&&H(()=>{s&&(a&&a.end(1),l=te(e,re,{y:-1e3,duration:600}),l.start())}),s=!0)},o(t){P(n.$$.fragment,t),l&&l.invalidate(),t&&(a=De(e,Ee,{})),s=!1},d(t){t&&v(e),U(n),t&&a&&a.end()}}}function Re(r,e,n){let{color:l}=e;return r.$$set=a=>{"color"in a&&n(0,l=a.color)},[l]}class qe extends J{constructor(e){super(),K(this,e,Re,Ge,L,{color:0})}}function he(r){let e,n=r[2].current,l,a=_e(r);return{c(){e=C("div"),a.c(),this.h()},l(s){e=k(s,"DIV",{class:!0});var t=B(e);a.l(t),t.forEach(v),this.h()},h(){h(e,"class","board-cursor svelte-7k3e")},m(s,t){j(s,e,t),a.m(e,null),l=!0},p(s,t){t&4&&L(n,n=s[2].current)?(ae(),P(a,1,1,ce),oe(),a=_e(s),a.c(),w(a,1),a.m(e,null)):a.p(s,t)},i(s){l||(w(a),l=!0)},o(s){P(a),l=!1},d(s){s&&v(e),a.d(s)}}}function _e(r){let e,n,l,a,s;return n=new F({props:{name:`marker-${r[3].turn}`}}),{c(){e=C("div"),V(n.$$.fragment),this.h()},l(t){e=k(t,"DIV",{style:!0});var o=B(e);z(n.$$.fragment,o),o.forEach(v),this.h()},h(){h(e,"style",l=`grid-area: cell-${r[2].current}`)},m(t,o){j(t,e,o),O(n,e,null),s=!0},p(t,o){r=t;const u={};o&8&&(u.name=`marker-${r[3].turn}`),n.$set(u),(!s||o&4&&l!==(l=`grid-area: cell-${r[2].current}`))&&h(e,"style",l)},i(t){s||(w(n.$$.fragment,t),t&&(a||H(()=>{a=te(e,re,{x:-r[0],duration:200,opacity:1}),a.start()})),s=!0)},o(t){P(n.$$.fragment,t),s=!1},d(t){t&&v(e),U(n)}}}function Le(r){let e,n,l,a;H(r[5]);let s=r[1]>1079&&he(r);return{c(){s&&s.c(),e=pe()},l(t){s&&s.l(t),e=pe()},m(t,o){s&&s.m(t,o),j(t,e,o),n=!0,l||(a=q(window,"resize",r[5]),l=!0)},p(t,[o]){t[1]>1079?s?(s.p(t,o),o&2&&w(s,1)):(s=he(t),s.c(),w(s,1),s.m(e.parentNode,e)):s&&(ae(),P(s,1,1,()=>{s=null}),oe())},i(t){n||(w(s),n=!0)},o(t){P(s),n=!1},d(t){t&&v(e),s&&s.d(t),l=!1,a()}}}function Qe(r,e,n){let l,a;G(r,ne,f=>n(3,a=f));let s=0;const t=X({});G(r,t,f=>n(2,l=f)),ie(()=>{t.subscribe(({current:f,previous:i})=>{if(f!==void 0&&i!==void 0){const p=document.getElementById(`board-cell-${i}`).getClientRects()[0],D=document.getElementById(`board-cell-${f}`).getClientRects()[0];n(0,s=D.x-p.x)}}),ne.subscribe(f=>{t.update(i=>i.current!==f.activeColumn?{current:f.activeColumn,previous:i.current}:i)})});let o;function u(){n(1,o=window.innerWidth)}return[s,o,l,a,t,u]}class We extends J{constructor(e){super(),K(this,e,Qe,Le,L,{})}}function He(r){let e,n,l,a,s,t,o,u,f,i,p,D,y;return n=new F({props:{name:`turn-background-${r[0].turn}`}}),{c(){e=C("div"),V(n.$$.fragment),l=S(),a=C("span"),s=x(r[2]),t=x(" turn"),o=S(),u=C("span"),f=x(r[1]),i=x("s"),this.h()},l(c){e=k(c,"DIV",{class:!0});var $=B(e);z(n.$$.fragment,$),l=T($),a=k($,"SPAN",{});var b=B(a);s=ee(b,r[2]),t=ee(b," turn"),b.forEach(v),o=T($),u=k($,"SPAN",{});var A=B(u);f=ee(A,r[1]),i=ee(A,"s"),A.forEach(v),$.forEach(v),this.h()},h(){h(e,"class",p=se(`display-turn ${r[0].turn}`)+" svelte-1vn90zz")},m(c,$){j(c,e,$),O(n,e,null),g(e,l),g(e,a),g(a,s),g(a,t),g(e,o),g(e,u),g(u,f),g(u,i),y=!0},p(c,[$]){const b={};$&1&&(b.name=`turn-background-${c[0].turn}`),n.$set(b),(!y||$&4)&&$e(s,c[2]),(!y||$&2)&&$e(f,c[1]),(!y||$&1&&p!==(p=se(`display-turn ${c[0].turn}`)+" svelte-1vn90zz"))&&h(e,"class",p)},i(c){y||(w(n.$$.fragment,c),c&&(D||H(()=>{D=te(e,re,{delay:1e3,y:300}),D.start()})),y=!0)},o(c){P(n.$$.fragment,c),y=!1},d(c){c&&v(e),U(n)}}}function Fe(r,e,n){let l,a,s,t;G(r,W,f=>n(5,a=f)),G(r,ne,f=>n(0,s=f)),G(r,Se,f=>n(4,t=f));let o="red",u=30;return ie(()=>{le(W,a=!0,a),setTimeout(()=>{le(W,a=!1,a)},3e3);const f=setInterval(()=>{a||n(1,u=u-1)},1e3);return()=>{clearInterval(f)}}),r.$$.update=()=>{r.$$.dirty&16&&t&&(n(3,o="red"),n(1,u=30)),r.$$.dirty&9&&s.turn!==o&&(n(3,o=s.turn),n(1,u=30)),r.$$.dirty&8&&n(2,l=o==="red"?"Player 1's":"Player 2's")},[s,u,l,o,t]}class Je extends J{constructor(e){super(),K(this,e,Fe,He,L,{})}}function be(r,e,n){const l=r.slice();return l[5]=e[n],l[7]=n,l}function ye(r){let e,n;return e=new qe({props:{color:r[0].grid[r[7]]}}),{c(){V(e.$$.fragment)},l(l){z(e.$$.fragment,l)},m(l,a){O(e,l,a),n=!0},p(l,a){const s={};a&1&&(s.color=l[0].grid[l[7]]),e.$set(s)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){P(e.$$.fragment,l),n=!1},d(l){U(e,l)}}}function Ce(r){let e,n,l,a,s,t=r[0].grid[r[7]]&&ye(r);return{c(){e=C("button"),t&&t.c(),n=S(),this.h()},l(o){e=k(o,"BUTTON",{class:!0,id:!0,role:!0,tabindex:!0});var u=B(e);t&&t.l(u),n=T(u),u.forEach(v),this.h()},h(){h(e,"class","cell svelte-1rn172u"),h(e,"id",`board-cell-${r[7]}`),h(e,"role","cell"),h(e,"tabindex","0")},m(o,u){j(o,e,u),t&&t.m(e,null),g(e,n),l=!0,a||(s=[q(e,"mouseenter",r[2](r[7])),q(e,"click",r[3](r[7]))],a=!0)},p(o,u){r=o,r[0].grid[r[7]]?t?(t.p(r,u),u&1&&w(t,1)):(t=ye(r),t.c(),w(t,1),t.m(e,n)):t&&(ae(),P(t,1,1,()=>{t=null}),oe())},i(o){l||(w(t),l=!0)},o(o){P(t),l=!1},d(o){o&&v(e),t&&t.d(),a=!1,we(s)}}}function Ke(r){let e,n,l,a,s,t,o,u,f,i,p,D,y,c,$,b,A,Y,R;a=new F({props:{class:"shadow",name:"board-layer-black"}});let N=ve(Array(7*6)),_=[];for(let d=0;d<N.length;d+=1)_[d]=Ce(be(r,N,d));const Z=d=>P(_[d],1,1,()=>{_[d]=null});return u=new F({props:{class:"overlay",name:"board-layer-white"}}),p=new We({}),c=new Je({}),{c(){e=C("div"),n=C("div"),l=C("div"),V(a.$$.fragment),s=S(),t=C("div");for(let d=0;d<_.length;d+=1)_[d].c();o=S(),V(u.$$.fragment),f=S(),i=C("div"),V(p.$$.fragment),y=S(),V(c.$$.fragment),$=S(),b=C("div"),this.h()},l(d){e=k(d,"DIV",{class:!0});var E=B(e);n=k(E,"DIV",{class:!0});var m=B(n);l=k(m,"DIV",{class:!0});var I=B(l);z(a.$$.fragment,I),s=T(I),t=k(I,"DIV",{class:!0});var M=B(t);for(let ue=0;ue<_.length;ue+=1)_[ue].l(M);M.forEach(v),o=T(I),z(u.$$.fragment,I),f=T(I),i=k(I,"DIV",{});var ge=B(i);z(p.$$.fragment,ge),ge.forEach(v),I.forEach(v),m.forEach(v),y=T(E),z(c.$$.fragment,E),$=T(E),b=k(E,"DIV",{class:!0,style:!0}),B(b).forEach(v),E.forEach(v),this.h()},h(){h(t,"class","cells svelte-1rn172u"),h(l,"class","board-grid svelte-1rn172u"),h(n,"class","board"),h(b,"class","game-status-background svelte-1rn172u"),h(b,"style",A=`background-color: var(--${r[1]?r[1]:"dark-purple"})`),h(e,"class","board-container svelte-1rn172u")},m(d,E){j(d,e,E),g(e,n),g(n,l),O(a,l,null),g(l,s),g(l,t);for(let m=0;m<_.length;m+=1)_[m]&&_[m].m(t,null);g(l,o),O(u,l,null),g(l,f),g(l,i),O(p,i,null),g(e,y),O(c,e,null),g(e,$),g(e,b),R=!0},p(d,[E]){if(E&13){N=ve(Array(7*6));let m;for(m=0;m<N.length;m+=1){const I=be(d,N,m);_[m]?(_[m].p(I,E),w(_[m],1)):(_[m]=Ce(I),_[m].c(),w(_[m],1),_[m].m(t,null))}for(ae(),m=N.length;m<_.length;m+=1)Z(m);oe()}(!R||E&2&&A!==(A=`background-color: var(--${d[1]?d[1]:"dark-purple"})`))&&h(b,"style",A)},i(d){if(!R){w(a.$$.fragment,d);for(let E=0;E<N.length;E+=1)w(_[E]);w(u.$$.fragment,d),w(p.$$.fragment,d),d&&(D||H(()=>{D=te(i,Ee,{delay:1e3}),D.start()})),w(c.$$.fragment,d),d&&(Y||H(()=>{Y=te(b,re,{delay:1e3,y:300}),Y.start()})),R=!0}},o(d){P(a.$$.fragment,d),_=_.filter(Boolean);for(let E=0;E<_.length;E+=1)P(_[E]);P(u.$$.fragment,d),P(p.$$.fragment,d),P(c.$$.fragment,d),R=!1},d(d){d&&v(e),U(a),Ae(_,d),U(u),U(p),U(c)}}}function Xe(r,e,n){let l,a;G(r,ne,u=>n(0,l=u)),G(r,Ue,u=>n(1,a=u)),ie(()=>{Te()});let s;function t(u){return()=>{clearTimeout(s),s=setTimeout(()=>{Me(u)},150)}}function o(u){return()=>{je({indexColumn:u%7})}}return[l,a,t,o]}class Ye extends J{constructor(e){super(),K(this,e,Xe,Ke,L,{})}}function Ze(r){let e,n,l="Menu",a,s,t,o,u="Restart",f,i,p,D="PAUSE",y,c,$="Continue game",b,A,Y="Restart",R,N,_="Quit Game",Z,d,E;return s=new F({props:{class:"logo",name:"logo"}}),{c(){e=C("div"),n=C("button"),n.textContent=l,a=S(),V(s.$$.fragment),t=S(),o=C("button"),o.textContent=u,f=S(),i=C("dialog"),p=C("span"),p.textContent=D,y=S(),c=C("button"),c.textContent=$,b=S(),A=C("button"),A.textContent=Y,R=S(),N=C("button"),N.textContent=_,this.h()},l(m){e=k(m,"DIV",{class:!0});var I=B(e);n=k(I,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(n)!=="svelte-jmehzd"&&(n.textContent=l),a=T(I),z(s.$$.fragment,I),t=T(I),o=k(I,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(o)!=="svelte-j25n9j"&&(o.textContent=u),I.forEach(v),f=T(m),i=k(m,"DIALOG",{class:!0});var M=B(i);p=k(M,"SPAN",{"data-svelte-h":!0}),Q(p)!=="svelte-16naano"&&(p.textContent=D),y=T(M),c=k(M,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(c)!=="svelte-vst0ui"&&(c.textContent=$),b=T(M),A=k(M,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(A)!=="svelte-15pdyjx"&&(A.textContent=Y),R=T(M),N=k(M,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(N)!=="svelte-1xzbx5t"&&(N.textContent=_),M.forEach(v),this.h()},h(){h(n,"class","flat-button button-purple"),h(o,"class","flat-button button-purple"),h(e,"class","menu svelte-6c595u"),h(c,"class","text-button raised-button button-white"),h(A,"class","text-button raised-button button-white"),h(N,"class","text-button raised-button button-red"),h(i,"class","svelte-6c595u")},m(m,I){j(m,e,I),g(e,n),g(e,a),O(s,e,null),g(e,t),g(e,o),j(m,f,I),j(m,i,I),g(i,p),g(i,y),g(i,c),g(i,b),g(i,A),g(i,R),g(i,N),r[5](i),Z=!0,d||(E=[q(n,"click",r[1]),q(o,"click",r[3]),q(c,"click",r[2]),q(A,"click",r[3]),q(N,"click",r[4])],d=!0)},p:ce,i(m){Z||(w(s.$$.fragment,m),Z=!0)},o(m){P(s.$$.fragment,m),Z=!1},d(m){m&&(v(e),v(f),v(i)),U(s),r[5](null),d=!1,we(E)}}}function xe(r,e,n){let l;G(r,W,i=>n(6,l=i));let a;const s=()=>{a.showModal(),le(W,l=!0,l)},t=()=>{a.close(),le(W,l=!1,l)},o=()=>{Te(),t()},u=()=>{t(),Ve(`${Oe}${ze("/")}`)};function f(i){Be[i?"unshift":"push"](()=>{a=i,n(0,a)})}return[a,s,t,o,u,f]}class et extends J{constructor(e){super(),K(this,e,xe,Ze,L,{})}}function tt(r){let e;return{c(){e=x("Player 2")},l(n){e=ee(n,"Player 2")},m(n,l){j(n,e,l)},d(n){n&&v(e)}}}function nt(r){let e;return{c(){e=x("Player 1")},l(n){e=ee(n,"Player 1")},m(n,l){j(n,e,l)},d(n){n&&v(e)}}}function rt(r){let e,n,l,a,s,t,o="12",u,f,i;n=new F({props:{class:`${!r[1]&&r[0]===r[2].turn?"active":""} icon ${r[0]}`,name:r[0]==="red"?"player-one":"player-two"}});function p(c,$){return c[0]==="red"?nt:tt}let D=p(r),y=D(r);return{c(){e=C("div"),V(n.$$.fragment),l=S(),a=C("span"),y.c(),s=S(),t=C("span"),t.textContent=o,this.h()},l(c){e=k(c,"DIV",{class:!0});var $=B(e);z(n.$$.fragment,$),l=T($),a=k($,"SPAN",{class:!0});var b=B(a);y.l(b),b.forEach(v),s=T($),t=k($,"SPAN",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-dbx7z1"&&(t.textContent=o),$.forEach(v),this.h()},h(){h(a,"class","svelte-ukks6l"),h(t,"class","svelte-ukks6l"),h(e,"class",u=se(`score-board ${r[0]}`)+" svelte-ukks6l")},m(c,$){j(c,e,$),O(n,e,null),g(e,l),g(e,a),y.m(a,null),g(e,s),g(e,t),i=!0},p(c,[$]){r=c;const b={};$&7&&(b.class=`${!r[1]&&r[0]===r[2].turn?"active":""} icon ${r[0]}`),$&1&&(b.name=r[0]==="red"?"player-one":"player-two"),n.$set(b),D!==(D=p(r))&&(y.d(1),y=D(r),y&&(y.c(),y.m(a,null))),(!i||$&1&&u!==(u=se(`score-board ${r[0]}`)+" svelte-ukks6l"))&&h(e,"class",u)},i(c){i||(w(n.$$.fragment,c),c&&(f||H(()=>{f=te(e,re,{x:300*(r[0]==="red"?-1:1),delay:1e3}),f.start()})),i=!0)},o(c){P(n.$$.fragment,c),i=!1},d(c){c&&v(e),U(n),y.d()}}}function st(r,e,n){let l,a;G(r,W,t=>n(1,l=t)),G(r,ne,t=>n(2,a=t));let{player:s}=e;return r.$$set=t=>{"player"in t&&n(0,s=t.player)},[s,l,a]}class ke extends J{constructor(e){super(),K(this,e,st,rt,L,{player:0})}}function lt(r){let e,n,l,a,s,t,o,u,f;return n=new et({}),a=new ke({props:{player:"red"}}),t=new ke({props:{player:"yellow"}}),u=new Ye({}),{c(){e=C("main"),V(n.$$.fragment),l=S(),V(a.$$.fragment),s=S(),V(t.$$.fragment),o=S(),V(u.$$.fragment),this.h()},l(i){e=k(i,"MAIN",{class:!0});var p=B(e);z(n.$$.fragment,p),l=T(p),z(a.$$.fragment,p),s=T(p),z(t.$$.fragment,p),o=T(p),z(u.$$.fragment,p),p.forEach(v),this.h()},h(){h(e,"class","svelte-1a8y0ai")},m(i,p){j(i,e,p),O(n,e,null),g(e,l),O(a,e,null),g(e,s),O(t,e,null),g(e,o),O(u,e,null),f=!0},p:ce,i(i){f||(w(n.$$.fragment,i),w(a.$$.fragment,i),w(t.$$.fragment,i),w(u.$$.fragment,i),f=!0)},o(i){P(n.$$.fragment,i),P(a.$$.fragment,i),P(t.$$.fragment,i),P(u.$$.fragment,i),f=!1},d(i){i&&v(e),U(n),U(a),U(t),U(u)}}}class dt extends J{constructor(e){super(),K(this,e,null,lt,L,{})}}export{dt as component};

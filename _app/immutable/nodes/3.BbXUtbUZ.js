import{s as F,e as K,c as te,o as pe,r as ge,n as ie}from"../chunks/scheduler.Bf1hPX8E.js";import{S as L,i as Q,e as y,k as T,c as w,a as D,l as V,d as _,g as M,o as z,p as h,B as ue,q as g,C as ve,r as P,s as I,f as E,n as v,h as p,v as U,z as W,x as G,D as _e,m as O}from"../chunks/index.CGhscT6l.js";import{b as be}from"../chunks/paths.BMcy4S3O.js";import{I as x,r as Ce}from"../chunks/Image.DZ0T7nbJ.js";import{d as ce,w as H}from"../chunks/index.BPNK3XrK.js";import{f as fe,a as ye}from"../chunks/index.3i_vlO88.js";function ne(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}const me=Array(7*6).fill(void 0),de="red",X=H(de),Y=H(me),we=ce([Y,X],([r,e])=>({grid:r,turn:e}));function ke(r){return new Promise(e=>{Y.update(n=>{const l=[...n],o=n.map((a,t)=>({value:a,column:t%7,index:t})).filter(a=>a.column===r.indexColumn&&a.value===void 0).pop();return o?(X.update(a=>(l[o.index]=a,a==="red"?"yellow":"red")),e(!0),l):(e(!1),n)})})}function he(){Y.set(me),X.set(de)}function Ie(r){let e,n,l,o,a;return n=new x({props:{name:`counter-${r[0]}`}}),{c(){e=y("div"),T(n.$$.fragment)},l(t){e=w(t,"DIV",{});var u=D(e);V(n.$$.fragment,u),u.forEach(_)},m(t,u){M(t,e,u),z(n,e,null),a=!0},p(t,[u]){const c={};u&1&&(c.name=`counter-${t[0]}`),n.$set(c)},i(t){a||(h(n.$$.fragment,t),t&&K(()=>{a&&(o&&o.end(1),l=ue(e,fe,{y:-1e3,duration:600}),l.start())}),a=!0)},o(t){g(n.$$.fragment,t),l&&l.invalidate(),t&&(o=ve(e,ye,{})),a=!1},d(t){t&&_(e),P(n),t&&o&&o.end()}}}function Ee(r,e,n){let{color:l}=e;return r.$$set=o=>{"color"in o&&n(0,l=o.color)},[l]}class Be extends L{constructor(e){super(),Q(this,e,Ee,Ie,F,{color:0})}}function re(r,e,n){const l=r.slice();return l[12]=e[n],l[14]=n,l}function le(r){let e,n;return e=new Be({props:{color:r[2].grid[r[14]]}}),{c(){T(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,o){z(e,l,o),n=!0},p(l,o){const a={};o&4&&(a.color=l[2].grid[l[14]]),e.$set(a)},i(l){n||(h(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){P(e,l)}}}function oe(r){let e,n,l,o,a,t=r[2].grid[r[14]]&&le(r);return{c(){e=y("button"),t&&t.c(),n=I(),this.h()},l(u){e=w(u,"BUTTON",{class:!0,id:!0,role:!0,tabindex:!0});var c=D(e);t&&t.l(c),n=E(c),c.forEach(_),this.h()},h(){v(e,"class","cell svelte-68yuez"),v(e,"id",`board-cell-${r[14]}`),v(e,"role","cell"),v(e,"tabindex","0")},m(u,c){M(u,e,c),t&&t.m(e,null),p(e,n),l=!0,o||(a=[U(e,"mouseenter",r[5](r[14])),U(e,"click",r[6](r[14]))],o=!0)},p(u,c){r=u,r[2].grid[r[14]]?t?(t.p(r,c),c&4&&h(t,1)):(t=le(r),t.c(),h(t,1),t.m(e,n)):t&&(W(),g(t,1,1,()=>{t=null}),G())},i(u){l||(h(t),l=!0)},o(u){g(t),l=!1},d(u){u&&_(e),t&&t.d(),o=!1,ge(a)}}}function ae(r){let e,n=r[3].column,l,o=se(r);return{c(){e=y("div"),o.c(),this.h()},l(a){e=w(a,"DIV",{class:!0});var t=D(e);o.l(t),t.forEach(_),this.h()},h(){v(e,"class","board-cursor")},m(a,t){M(a,e,t),o.m(e,null),l=!0},p(a,t){t&8&&F(n,n=a[3].column)?(W(),g(o,1,1,ie),G(),o=se(a),o.c(),h(o,1),o.m(e,null)):o.p(a,t)},i(a){l||(h(o),l=!0)},o(a){g(o),l=!1},d(a){a&&_(e),o.d(a)}}}function se(r){let e,n,l,o,a;return n=new x({props:{name:`marker-${r[2].turn}`}}),{c(){e=y("div"),T(n.$$.fragment),this.h()},l(t){e=w(t,"DIV",{style:!0});var u=D(e);V(n.$$.fragment,u),u.forEach(_),this.h()},h(){v(e,"style",l=`grid-area: cell-${r[3].column}`)},m(t,u){M(t,e,u),z(n,e,null),a=!0},p(t,u){r=t;const c={};u&4&&(c.name=`marker-${r[2].turn}`),n.$set(c),(!a||u&8&&l!==(l=`grid-area: cell-${r[3].column}`))&&v(e,"style",l)},i(t){a||(h(n.$$.fragment,t),t&&(o||K(()=>{o=ue(e,fe,{x:-r[1],duration:$e,opacity:1}),o.start()})),a=!0)},o(t){g(n.$$.fragment,t),a=!1},d(t){t&&_(e),P(n)}}}function De(r){let e,n,l,o,a,t,u,c,B,S;K(r[7]),n=new x({props:{class:"shadow",name:"board-layer-black"}});let $=ne(Array(7*6)),m=[];for(let i=0;i<$.length;i+=1)m[i]=oe(re(r,$,i));const b=i=>g(m[i],1,1,()=>{m[i]=null});t=new x({props:{class:"overlay",name:"board-layer-white"}});let s=r[0]>768&&ae(r);return{c(){e=y("div"),T(n.$$.fragment),l=I(),o=y("div");for(let i=0;i<m.length;i+=1)m[i].c();a=I(),T(t.$$.fragment),u=I(),s&&s.c(),this.h()},l(i){e=w(i,"DIV",{class:!0});var f=D(e);V(n.$$.fragment,f),l=E(f),o=w(f,"DIV",{class:!0});var d=D(o);for(let k=0;k<m.length;k+=1)m[k].l(d);d.forEach(_),a=E(f),V(t.$$.fragment,f),u=E(f),s&&s.l(f),f.forEach(_),this.h()},h(){v(o,"class","cells svelte-68yuez"),v(e,"class","board svelte-68yuez")},m(i,f){M(i,e,f),z(n,e,null),p(e,l),p(e,o);for(let d=0;d<m.length;d+=1)m[d]&&m[d].m(o,null);p(e,a),z(t,e,null),p(e,u),s&&s.m(e,null),c=!0,B||(S=U(window,"resize",r[7]),B=!0)},p(i,[f]){if(f&100){$=ne(Array(7*6));let d;for(d=0;d<$.length;d+=1){const k=re(i,$,d);m[d]?(m[d].p(k,f),h(m[d],1)):(m[d]=oe(k),m[d].c(),h(m[d],1),m[d].m(o,null))}for(W(),d=$.length;d<m.length;d+=1)b(d);G()}i[0]>768?s?(s.p(i,f),f&1&&h(s,1)):(s=ae(i),s.c(),h(s,1),s.m(e,null)):s&&(W(),g(s,1,1,()=>{s=null}),G())},i(i){if(!c){h(n.$$.fragment,i);for(let f=0;f<$.length;f+=1)h(m[f]);h(t.$$.fragment,i),h(s),c=!0}},o(i){g(n.$$.fragment,i),m=m.filter(Boolean);for(let f=0;f<m.length;f+=1)g(m[f]);g(t.$$.fragment,i),g(s),c=!1},d(i){i&&_(e),P(n),_e(m,i),P(t),s&&s.d(),B=!1,S()}}}let $e=200;function Se(r,e,n){let l,o;te(r,we,s=>n(2,l=s));const a=H(0),t=H(0);let u=0;const c=ce([a,t],([s,i])=>({column:s,prevColumn:i}));te(r,c,s=>n(3,o=s)),pe(()=>{he(),c.subscribe(({column:s,prevColumn:i})=>{const f=document.getElementById(`board-cell-${i}`).getClientRects()[0],d=document.getElementById(`board-cell-${s}`).getClientRects()[0];n(1,u=d.x-f.x)})});let B;function S(s){return()=>{clearTimeout(B),B=setTimeout(()=>{a.update(i=>(t.set(i),s%7))},$e*.75)}}function $(s){return()=>{ke({indexColumn:s%7})}}let m;function b(){n(0,m=window.innerWidth)}return r.$$.update=()=>{r.$$.dirty&1},[m,u,l,o,c,S,$,b]}class Ae extends L{constructor(e){super(),Q(this,e,Se,De,F,{})}}function Te(r){let e,n,l,o="Menu",a,t,u,c,B="Restart",S,$,m,b,s,i,f,d="Player 1's turn",k,N,Z="3s",R,J,ee;return t=new x({props:{class:"logo",name:"logo"}}),$=new Ae({}),s=new x({props:{name:"turn-background-red"}}),{c(){e=y("main"),n=y("div"),l=y("a"),l.textContent=o,a=I(),T(t.$$.fragment),u=I(),c=y("button"),c.textContent=B,S=I(),T($.$$.fragment),m=I(),b=y("div"),T(s.$$.fragment),i=I(),f=y("span"),f.textContent=d,k=I(),N=y("span"),N.textContent=Z,this.h()},l(C){e=w(C,"MAIN",{class:!0});var A=D(e);n=w(A,"DIV",{class:!0});var j=D(n);l=w(j,"A",{href:!0,class:!0,"data-svelte-h":!0}),O(l)!=="svelte-axxoo7"&&(l.textContent=o),a=E(j),V(t.$$.fragment,j),u=E(j),c=w(j,"BUTTON",{class:!0,"data-svelte-h":!0}),O(c)!=="svelte-wnhnxd"&&(c.textContent=B),j.forEach(_),S=E(A),V($.$$.fragment,A),m=E(A),b=w(A,"DIV",{class:!0});var q=D(b);V(s.$$.fragment,q),i=E(q),f=w(q,"SPAN",{"data-svelte-h":!0}),O(f)!=="svelte-kij4ef"&&(f.textContent=d),k=E(q),N=w(q,"SPAN",{"data-svelte-h":!0}),O(N)!=="svelte-1jhyk2k"&&(N.textContent=Z),q.forEach(_),A.forEach(_),this.h()},h(){v(l,"href",`${be}${Ce("/")}`),v(l,"class","flat-button button-purple"),v(c,"class","flat-button button-purple"),v(n,"class","menu"),v(b,"class","display-turn svelte-1q1jyhl"),v(e,"class","svelte-1q1jyhl")},m(C,A){M(C,e,A),p(e,n),p(n,l),p(n,a),z(t,n,null),p(n,u),p(n,c),p(e,S),z($,e,null),p(e,m),p(e,b),z(s,b,null),p(b,i),p(b,f),p(b,k),p(b,N),R=!0,J||(ee=U(c,"click",r[0]),J=!0)},p:ie,i(C){R||(h(t.$$.fragment,C),h($.$$.fragment,C),h(s.$$.fragment,C),R=!0)},o(C){g(t.$$.fragment,C),g($.$$.fragment,C),g(s.$$.fragment,C),R=!1},d(C){C&&_(e),P(t),P($),P(s),J=!1,ee()}}}function Ve(r){return[()=>{he()}]}class Me extends L{constructor(e){super(),Q(this,e,Ve,Te,F,{})}}export{Me as component};

import{s as M,e as H,c as L,o as re,n as ne,r as Ie,E as ce}from"../chunks/scheduler.Bp73tsFP.js";import{S as j,i as O,e as C,k as D,c as E,a as S,l as P,d as g,g as T,o as V,p as _,B as F,q as k,C as Se,r as A,w as fe,v as X,z as Y,x as Z,n as w,s as B,t as U,f as N,b as W,h as p,j as de,D as De,m as te}from"../chunks/index.WTjgDaL3.js";import{d as Pe,w as K}from"../chunks/index.CpYc9ZES.js";import{f as x,a as be}from"../chunks/index.BXk-0J-c.js";import{I as R,r as Ve}from"../chunks/Image.SkTbaj59.js";import{b as Ae}from"../chunks/paths.CzInDS6K.js";function me(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}const ye=Array(7*6).fill(void 0),ke="red",ae=K(ke),le=K(ye),se=K(0),we=K(0),J=Pe([le,ae,se],([n,e,t])=>({grid:n,turn:e,activeColumn:t}));function Be(n){return new Promise(e=>{le.update(t=>{const l=[...t],s=t.map((a,r)=>({value:a,column:r%7,index:r})).filter(a=>a.column===n.indexColumn&&a.value===void 0).pop();return s?(ae.update(a=>(l[s.index]=a,a==="red"?"yellow":"red")),e(!0),l):(e(!1),t)})})}function Ce(){le.set(ye),ae.set(ke),se.set(0),we.update(n=>n+1)}function Ne(n){se.set(n%7)}function Te(n){let e,t,l,s,a;return t=new R({props:{name:`counter-${n[0]}`}}),{c(){e=C("div"),D(t.$$.fragment)},l(r){e=E(r,"DIV",{});var o=S(e);P(t.$$.fragment,o),o.forEach(g)},m(r,o){T(r,e,o),V(t,e,null),a=!0},p(r,[o]){const i={};o&1&&(i.name=`counter-${r[0]}`),t.$set(i)},i(r){a||(_(t.$$.fragment,r),r&&H(()=>{a&&(s&&s.end(1),l=F(e,x,{y:-1e3,duration:600}),l.start())}),a=!0)},o(r){k(t.$$.fragment,r),l&&l.invalidate(),r&&(s=Se(e,be,{})),a=!1},d(r){r&&g(e),A(t),r&&s&&s.end()}}}function qe(n,e,t){let{color:l}=e;return n.$$set=s=>{"color"in s&&t(0,l=s.color)},[l]}class ze extends j{constructor(e){super(),O(this,e,qe,Te,M,{color:0})}}function $e(n){let e,t=n[2].current,l,s=pe(n);return{c(){e=C("div"),s.c(),this.h()},l(a){e=E(a,"DIV",{class:!0});var r=S(e);s.l(r),r.forEach(g),this.h()},h(){w(e,"class","board-cursor svelte-7k3e")},m(a,r){T(a,e,r),s.m(e,null),l=!0},p(a,r){r&4&&M(t,t=a[2].current)?(Y(),k(s,1,1,ne),Z(),s=pe(a),s.c(),_(s,1),s.m(e,null)):s.p(a,r)},i(a){l||(_(s),l=!0)},o(a){k(s),l=!1},d(a){a&&g(e),s.d(a)}}}function pe(n){let e,t,l,s,a;return t=new R({props:{name:`marker-${n[3].turn}`}}),{c(){e=C("div"),D(t.$$.fragment),this.h()},l(r){e=E(r,"DIV",{style:!0});var o=S(e);P(t.$$.fragment,o),o.forEach(g),this.h()},h(){w(e,"style",l=`grid-area: cell-${n[2].current}`)},m(r,o){T(r,e,o),V(t,e,null),a=!0},p(r,o){n=r;const i={};o&8&&(i.name=`marker-${n[3].turn}`),t.$set(i),(!a||o&4&&l!==(l=`grid-area: cell-${n[2].current}`))&&w(e,"style",l)},i(r){a||(_(t.$$.fragment,r),r&&(s||H(()=>{s=F(e,x,{x:-n[0],duration:200,opacity:1}),s.start()})),a=!0)},o(r){k(t.$$.fragment,r),a=!1},d(r){r&&g(e),A(t)}}}function Me(n){let e,t,l,s;H(n[5]);let a=n[1]>1079&&$e(n);return{c(){a&&a.c(),e=fe()},l(r){a&&a.l(r),e=fe()},m(r,o){a&&a.m(r,o),T(r,e,o),t=!0,l||(s=X(window,"resize",n[5]),l=!0)},p(r,[o]){r[1]>1079?a?(a.p(r,o),o&2&&_(a,1)):(a=$e(r),a.c(),_(a,1),a.m(e.parentNode,e)):a&&(Y(),k(a,1,1,()=>{a=null}),Z())},i(r){t||(_(a),t=!0)},o(r){k(a),t=!1},d(r){r&&g(e),a&&a.d(r),l=!1,s()}}}function Ge(n,e,t){let l,s;L(n,J,m=>t(3,s=m));let a=0;const r=K({});L(n,r,m=>t(2,l=m)),re(()=>{r.subscribe(({current:m,previous:u})=>{if(m!==void 0&&u!==void 0){const d=document.getElementById(`board-cell-${u}`).getClientRects()[0],f=document.getElementById(`board-cell-${m}`).getClientRects()[0];t(0,a=f.x-d.x)}}),J.subscribe(m=>{r.update(u=>u.current!==m.activeColumn?{current:m.activeColumn,previous:u.current}:u)})});let o;function i(){t(1,o=window.innerWidth)}return[a,o,l,s,r,i]}class Re extends j{constructor(e){super(),O(this,e,Ge,Me,M,{})}}function je(n){let e,t,l,s,a,r,o,i,m,u,d;return t=new R({props:{name:`turn-background-${n[0].turn}`}}),{c(){e=C("div"),D(t.$$.fragment),l=B(),s=C("span"),a=U(n[2]),r=U(" turn"),o=B(),i=C("span"),m=U(n[1]),u=U("s"),this.h()},l(f){e=E(f,"DIV",{class:!0});var c=S(e);P(t.$$.fragment,c),l=N(c),s=E(c,"SPAN",{});var h=S(s);a=W(h,n[2]),r=W(h," turn"),h.forEach(g),o=N(c),i=E(c,"SPAN",{});var v=S(i);m=W(v,n[1]),u=W(v,"s"),v.forEach(g),c.forEach(g),this.h()},h(){w(e,"class","display-turn svelte-10g0ndx")},m(f,c){T(f,e,c),V(t,e,null),p(e,l),p(e,s),p(s,a),p(s,r),p(e,o),p(e,i),p(i,m),p(i,u),d=!0},p(f,[c]){const h={};c&1&&(h.name=`turn-background-${f[0].turn}`),t.$set(h),(!d||c&4)&&de(a,f[2]),(!d||c&2)&&de(m,f[1])},i(f){d||(_(t.$$.fragment,f),d=!0)},o(f){k(t.$$.fragment,f),d=!1},d(f){f&&g(e),A(t)}}}function Oe(n,e,t){let l,s,a;L(n,J,i=>t(0,s=i)),L(n,we,i=>t(4,a=i));let r="red",o=30;return re(()=>{const i=setInterval(()=>{t(1,o=o-1)},1e3);return()=>{clearInterval(i)}}),n.$$.update=()=>{n.$$.dirty&16&&a&&t(3,r="red"),n.$$.dirty&9&&s.turn!==r&&(t(3,r=s.turn),t(1,o=30)),n.$$.dirty&8&&t(2,l=r==="red"?"Player 1's":"Player 2's")},[s,o,l,r,a]}class Ue extends j{constructor(e){super(),O(this,e,Oe,je,M,{})}}function ge(n,e,t){const l=n.slice();return l[4]=e[t],l[6]=t,l}function he(n){let e,t;return e=new ze({props:{color:n[0].grid[n[6]]}}),{c(){D(e.$$.fragment)},l(l){P(e.$$.fragment,l)},m(l,s){V(e,l,s),t=!0},p(l,s){const a={};s&1&&(a.color=l[0].grid[l[6]]),e.$set(a)},i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){k(e.$$.fragment,l),t=!1},d(l){A(e,l)}}}function ve(n){let e,t,l,s,a,r=n[0].grid[n[6]]&&he(n);return{c(){e=C("button"),r&&r.c(),t=B(),this.h()},l(o){e=E(o,"BUTTON",{class:!0,id:!0,role:!0,tabindex:!0});var i=S(e);r&&r.l(i),t=N(i),i.forEach(g),this.h()},h(){w(e,"class","cell svelte-1d4iqeb"),w(e,"id",`board-cell-${n[6]}`),w(e,"role","cell"),w(e,"tabindex","0")},m(o,i){T(o,e,i),r&&r.m(e,null),p(e,t),l=!0,s||(a=[X(e,"mouseenter",n[1](n[6])),X(e,"click",n[2](n[6]))],s=!0)},p(o,i){n=o,n[0].grid[n[6]]?r?(r.p(n,i),i&1&&_(r,1)):(r=he(n),r.c(),_(r,1),r.m(e,t)):r&&(Y(),k(r,1,1,()=>{r=null}),Z())},i(o){l||(_(r),l=!0)},o(o){k(r),l=!1},d(o){o&&g(e),r&&r.d(),s=!1,Ie(a)}}}function We(n){let e,t,l,s,a,r,o,i,m,u,d,f,c,h,v,z,Q;s=new R({props:{class:"shadow",name:"board-layer-black"}});let G=me(Array(7*6)),b=[];for(let $=0;$<G.length;$+=1)b[$]=ve(ge(n,G,$));const Ee=$=>k(b[$],1,1,()=>{b[$]=null});return i=new R({props:{class:"overlay",name:"board-layer-white"}}),d=new Re({}),v=new Ue({}),{c(){e=C("div"),t=C("div"),l=C("div"),D(s.$$.fragment),a=B(),r=C("div");for(let $=0;$<b.length;$+=1)b[$].c();o=B(),D(i.$$.fragment),m=B(),u=C("div"),D(d.$$.fragment),c=B(),h=C("div"),D(v.$$.fragment),this.h()},l($){e=E($,"DIV",{class:!0});var I=S(e);t=E(I,"DIV",{class:!0});var y=S(t);l=E(y,"DIV",{class:!0});var q=S(l);P(s.$$.fragment,q),a=N(q),r=E(q,"DIV",{class:!0});var oe=S(r);for(let ee=0;ee<b.length;ee+=1)b[ee].l(oe);oe.forEach(g),o=N(q),P(i.$$.fragment,q),m=N(q),u=E(q,"DIV",{});var ie=S(u);P(d.$$.fragment,ie),ie.forEach(g),q.forEach(g),y.forEach(g),c=N(I),h=E(I,"DIV",{});var ue=S(h);P(v.$$.fragment,ue),ue.forEach(g),I.forEach(g),this.h()},h(){w(r,"class","cells svelte-1d4iqeb"),w(l,"class","board-grid svelte-1d4iqeb"),w(t,"class","board"),w(e,"class","board-container svelte-1d4iqeb")},m($,I){T($,e,I),p(e,t),p(t,l),V(s,l,null),p(l,a),p(l,r);for(let y=0;y<b.length;y+=1)b[y]&&b[y].m(r,null);p(l,o),V(i,l,null),p(l,m),p(l,u),V(d,u,null),p(e,c),p(e,h),V(v,h,null),Q=!0},p($,[I]){if(I&7){G=me(Array(7*6));let y;for(y=0;y<G.length;y+=1){const q=ge($,G,y);b[y]?(b[y].p(q,I),_(b[y],1)):(b[y]=ve(q),b[y].c(),_(b[y],1),b[y].m(r,null))}for(Y(),y=G.length;y<b.length;y+=1)Ee(y);Z()}},i($){if(!Q){_(s.$$.fragment,$);for(let I=0;I<G.length;I+=1)_(b[I]);_(i.$$.fragment,$),_(d.$$.fragment,$),$&&(f||H(()=>{f=F(u,be,{delay:1e3}),f.start()})),_(v.$$.fragment,$),$&&(z||H(()=>{z=F(h,x,{delay:1e3,y:300}),z.start()})),Q=!0}},o($){k(s.$$.fragment,$),b=b.filter(Boolean);for(let I=0;I<b.length;I+=1)k(b[I]);k(i.$$.fragment,$),k(d.$$.fragment,$),k(v.$$.fragment,$),Q=!1},d($){$&&g(e),A(s),De(b,$),A(i),A(d),A(v)}}}function He(n,e,t){let l;L(n,J,o=>t(0,l=o)),re(()=>{Ce()});let s;function a(o){return()=>{clearTimeout(s),s=setTimeout(()=>{Ne(o)},150)}}function r(o){return()=>{Be({indexColumn:o%7})}}return[l,a,r]}class Le extends j{constructor(e){super(),O(this,e,He,We,M,{})}}function Fe(n){let e,t,l="Menu",s,a,r,o,i="Restart",m,u,d;return a=new R({props:{class:"logo",name:"logo"}}),{c(){e=C("div"),t=C("a"),t.textContent=l,s=B(),D(a.$$.fragment),r=B(),o=C("button"),o.textContent=i,this.h()},l(f){e=E(f,"DIV",{class:!0});var c=S(e);t=E(c,"A",{href:!0,class:!0,"data-svelte-h":!0}),te(t)!=="svelte-axxoo7"&&(t.textContent=l),s=N(c),P(a.$$.fragment,c),r=N(c),o=E(c,"BUTTON",{class:!0,"data-svelte-h":!0}),te(o)!=="svelte-1akbaj5"&&(o.textContent=i),c.forEach(g),this.h()},h(){w(t,"href",`${Ae}${Ve("/")}`),w(t,"class","flat-button button-purple"),w(o,"class","flat-button button-purple"),w(e,"class","menu svelte-1bcp1gc")},m(f,c){T(f,e,c),p(e,t),p(e,s),V(a,e,null),p(e,r),p(e,o),m=!0,u||(d=X(o,"click",n[0]),u=!0)},p:ne,i(f){m||(_(a.$$.fragment,f),m=!0)},o(f){k(a.$$.fragment,f),m=!1},d(f){f&&g(e),A(a),u=!1,d()}}}function Je(n){return[()=>{Ce()}]}class Ke extends j{constructor(e){super(),O(this,e,Je,Fe,M,{})}}function Qe(n){let e;return{c(){e=U("Player 2")},l(t){e=W(t,"Player 2")},m(t,l){T(t,e,l)},d(t){t&&g(e)}}}function Xe(n){let e;return{c(){e=U("Player 1")},l(t){e=W(t,"Player 1")},m(t,l){T(t,e,l)},d(t){t&&g(e)}}}function Ye(n){let e,t,l,s,a,r,o="12",i,m,u;t=new R({props:{class:`${n[0]===n[1].turn?"active":""} icon ${n[0]}`,name:n[0]==="red"?"player-one":"player-two"}});function d(h,v){return h[0]==="red"?Xe:Qe}let f=d(n),c=f(n);return{c(){e=C("div"),D(t.$$.fragment),l=B(),s=C("span"),c.c(),a=B(),r=C("span"),r.textContent=o,this.h()},l(h){e=E(h,"DIV",{class:!0});var v=S(e);P(t.$$.fragment,v),l=N(v),s=E(v,"SPAN",{class:!0});var z=S(s);c.l(z),z.forEach(g),a=N(v),r=E(v,"SPAN",{class:!0,"data-svelte-h":!0}),te(r)!=="svelte-dbx7z1"&&(r.textContent=o),v.forEach(g),this.h()},h(){w(s,"class","svelte-ukks6l"),w(r,"class","svelte-ukks6l"),w(e,"class",i=ce(`score-board ${n[0]}`)+" svelte-ukks6l")},m(h,v){T(h,e,v),V(t,e,null),p(e,l),p(e,s),c.m(s,null),p(e,a),p(e,r),u=!0},p(h,[v]){n=h;const z={};v&3&&(z.class=`${n[0]===n[1].turn?"active":""} icon ${n[0]}`),v&1&&(z.name=n[0]==="red"?"player-one":"player-two"),t.$set(z),f!==(f=d(n))&&(c.d(1),c=f(n),c&&(c.c(),c.m(s,null))),(!u||v&1&&i!==(i=ce(`score-board ${n[0]}`)+" svelte-ukks6l"))&&w(e,"class",i)},i(h){u||(_(t.$$.fragment,h),h&&(m||H(()=>{m=F(e,x,{x:300*(n[0]==="red"?-1:1),delay:1e3}),m.start()})),u=!0)},o(h){k(t.$$.fragment,h),u=!1},d(h){h&&g(e),A(t),c.d()}}}function Ze(n,e,t){let l;L(n,J,a=>t(1,l=a));let{player:s}=e;return n.$$set=a=>{"player"in a&&t(0,s=a.player)},[s,l]}class _e extends j{constructor(e){super(),O(this,e,Ze,Ye,M,{player:0})}}function xe(n){let e,t,l,s,a,r,o,i,m;return t=new Ke({}),s=new _e({props:{player:"red"}}),r=new _e({props:{player:"yellow"}}),i=new Le({}),{c(){e=C("main"),D(t.$$.fragment),l=B(),D(s.$$.fragment),a=B(),D(r.$$.fragment),o=B(),D(i.$$.fragment),this.h()},l(u){e=E(u,"MAIN",{class:!0});var d=S(e);P(t.$$.fragment,d),l=N(d),P(s.$$.fragment,d),a=N(d),P(r.$$.fragment,d),o=N(d),P(i.$$.fragment,d),d.forEach(g),this.h()},h(){w(e,"class","svelte-1rup6ek")},m(u,d){T(u,e,d),V(t,e,null),p(e,l),V(s,e,null),p(e,a),V(r,e,null),p(e,o),V(i,e,null),m=!0},p:ne,i(u){m||(_(t.$$.fragment,u),_(s.$$.fragment,u),_(r.$$.fragment,u),_(i.$$.fragment,u),m=!0)},o(u){k(t.$$.fragment,u),k(s.$$.fragment,u),k(r.$$.fragment,u),k(i.$$.fragment,u),m=!1},d(u){u&&g(e),A(t),A(s),A(r),A(i)}}}class st extends j{constructor(e){super(),O(this,e,null,xe,M,{})}}export{st as component};

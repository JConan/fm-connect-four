import{s as H,d as J,c as X,o as ie,r as ue,n as le}from"../chunks/scheduler.Cz0ahc-E.js";import{S as K,i as L,e as y,k as V,c as w,a as A,l as z,d as b,g as M,o as j,p as $,B as oe,q as g,r as N,s as I,f as E,n as _,h as p,v as F,z as U,x as W,D as ce,m as O}from"../chunks/index.BNQYNzSj.js";import{b as fe}from"../chunks/paths.C3SZtXJ8.js";import{I as x,r as me}from"../chunks/Image.Cl8h9UTv.js";import{w as G,d as de}from"../chunks/index.B8O5jAbK.js";import{f as se}from"../chunks/index.C1si9dtA.js";function Y(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function he(l){let e,n,r,s;return n=new x({props:{name:`counter-${l[0]}`}}),{c(){e=y("div"),V(n.$$.fragment)},l(o){e=w(o,"DIV",{});var t=A(e);z(n.$$.fragment,t),t.forEach(b)},m(o,t){M(o,e,t),j(n,e,null),s=!0},p(o,[t]){const u={};t&1&&(u.name=`counter-${o[0]}`),n.$set(u)},i(o){s||($(n.$$.fragment,o),o&&(r||J(()=>{r=oe(e,se,{y:-1e3,duration:600}),r.start()})),s=!0)},o(o){g(n.$$.fragment,o),s=!1},d(o){o&&b(e),N(n)}}}function $e(l,e,n){let{color:r}=e;return l.$$set=s=>{"color"in s&&n(0,r=s.color)},[r]}class pe extends K{constructor(e){super(),L(this,e,$e,he,H,{color:0})}}const ge=Array(7*6).fill(void 0),{set:ze,update:ve,subscribe:_e}=G(ge),be={subscribe:_e};function Ce(l){return new Promise(e=>{ve(n=>{const r=[...n],s=n.map((o,t)=>({value:o,column:t%7,index:t})).filter(o=>o.column===l.indexColumn&&o.value===void 0).pop();return s?(r[s.index]=l.color,e(!0),r):(e(!1),n)})})}function Z(l,e,n){const r=l.slice();return r[13]=e[n],r[15]=n,r}function ee(l){let e,n;return e=new pe({props:{color:l[3][l[15]]}}),{c(){V(e.$$.fragment)},l(r){z(e.$$.fragment,r)},m(r,s){j(e,r,s),n=!0},p(r,s){const o={};s&8&&(o.color=r[3][r[15]]),e.$set(o)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function te(l){let e,n,r,s,o,t=l[3][l[15]]&&ee(l);return{c(){e=y("button"),t&&t.c(),n=I(),this.h()},l(u){e=w(u,"BUTTON",{class:!0,id:!0,role:!0,tabindex:!0});var m=A(e);t&&t.l(m),n=E(m),m.forEach(b),this.h()},h(){_(e,"class","cell svelte-68yuez"),_(e,"id",`board-cell-${l[15]}`),_(e,"role","cell"),_(e,"tabindex","0")},m(u,m){M(u,e,m),t&&t.m(e,null),p(e,n),r=!0,s||(o=[F(e,"mouseenter",l[6](l[15])),F(e,"click",l[7](l[15]))],s=!0)},p(u,m){l=u,l[3][l[15]]?t?(t.p(l,m),m&8&&$(t,1)):(t=ee(l),t.c(),$(t,1),t.m(e,n)):t&&(U(),g(t,1,1,()=>{t=null}),W())},i(u){r||($(t),r=!0)},o(u){g(t),r=!1},d(u){u&&b(e),t&&t.d(),s=!1,ue(o)}}}function ne(l){let e,n=l[4].column,r,s=re(l);return{c(){e=y("div"),s.c(),this.h()},l(o){e=w(o,"DIV",{class:!0});var t=A(e);s.l(t),t.forEach(b),this.h()},h(){_(e,"class","board-cursor")},m(o,t){M(o,e,t),s.m(e,null),r=!0},p(o,t){t&16&&H(n,n=o[4].column)?(U(),g(s,1,1,le),W(),s=re(o),s.c(),$(s,1),s.m(e,null)):s.p(o,t)},i(o){r||($(s),r=!0)},o(o){g(s),r=!1},d(o){o&&b(e),s.d(o)}}}function re(l){let e,n,r,s,o;return n=new x({props:{name:`marker-${l[2]}`}}),{c(){e=y("div"),V(n.$$.fragment),this.h()},l(t){e=w(t,"DIV",{style:!0});var u=A(e);z(n.$$.fragment,u),u.forEach(b),this.h()},h(){_(e,"style",r=`grid-area: cell-${l[4].column}`)},m(t,u){M(t,e,u),j(n,e,null),o=!0},p(t,u){l=t;const m={};u&4&&(m.name=`marker-${l[2]}`),n.$set(m),(!o||u&16&&r!==(r=`grid-area: cell-${l[4].column}`))&&_(e,"style",r)},i(t){o||($(n.$$.fragment,t),t&&(s||J(()=>{s=oe(e,se,{x:-l[1],duration:ae,opacity:1}),s.start()})),o=!0)},o(t){g(n.$$.fragment,t),o=!1},d(t){t&&b(e),N(n)}}}function ye(l){let e,n,r,s,o,t,u,m,D,B;J(l[8]),n=new x({props:{class:"shadow",name:"board-layer-black"}});let h=Y(Array(7*6)),c=[];for(let a=0;a<h.length;a+=1)c[a]=te(Z(l,h,a));const v=a=>g(c[a],1,1,()=>{c[a]=null});t=new x({props:{class:"overlay",name:"board-layer-white"}});let f=l[0]>768&&ne(l);return{c(){e=y("div"),V(n.$$.fragment),r=I(),s=y("div");for(let a=0;a<c.length;a+=1)c[a].c();o=I(),V(t.$$.fragment),u=I(),f&&f.c(),this.h()},l(a){e=w(a,"DIV",{class:!0});var i=A(e);z(n.$$.fragment,i),r=E(i),s=w(i,"DIV",{class:!0});var d=A(s);for(let k=0;k<c.length;k+=1)c[k].l(d);d.forEach(b),o=E(i),z(t.$$.fragment,i),u=E(i),f&&f.l(i),i.forEach(b),this.h()},h(){_(s,"class","cells svelte-68yuez"),_(e,"class","board svelte-68yuez")},m(a,i){M(a,e,i),j(n,e,null),p(e,r),p(e,s);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m(s,null);p(e,o),j(t,e,null),p(e,u),f&&f.m(e,null),m=!0,D||(B=F(window,"resize",l[8]),D=!0)},p(a,[i]){if(i&200){h=Y(Array(7*6));let d;for(d=0;d<h.length;d+=1){const k=Z(a,h,d);c[d]?(c[d].p(k,i),$(c[d],1)):(c[d]=te(k),c[d].c(),$(c[d],1),c[d].m(s,null))}for(U(),d=h.length;d<c.length;d+=1)v(d);W()}a[0]>768?f?(f.p(a,i),i&1&&$(f,1)):(f=ne(a),f.c(),$(f,1),f.m(e,null)):f&&(U(),g(f,1,1,()=>{f=null}),W())},i(a){if(!m){$(n.$$.fragment,a);for(let i=0;i<h.length;i+=1)$(c[i]);$(t.$$.fragment,a),$(f),m=!0}},o(a){g(n.$$.fragment,a),c=c.filter(Boolean);for(let i=0;i<c.length;i+=1)g(c[i]);g(t.$$.fragment,a),g(f),m=!1},d(a){a&&b(e),N(n),ce(c,a),N(t),f&&f.d(),D=!1,B()}}}let ae=200;function we(l,e,n){let r,s;X(l,be,a=>n(3,r=a));const o=G(0),t=G(0);let u=0;const m=de([o,t],([a,i])=>({column:a,prevColumn:i}));X(l,m,a=>n(4,s=a)),ie(()=>{m.subscribe(({column:a,prevColumn:i})=>{const d=document.getElementById(`board-cell-${i}`).getClientRects()[0],k=document.getElementById(`board-cell-${a}`).getClientRects()[0];n(1,u=k.x-d.x)})});let D;function B(a){return()=>{clearTimeout(D),D=setTimeout(()=>{o.update(i=>(t.set(i),a%7))},ae*.75)}}let h="red";function c(a){return async i=>{await Ce({indexColumn:a%7,color:h})&&n(2,h=h==="red"?"yellow":"red")}}let v;function f(){n(0,v=window.innerWidth)}return l.$$.update=()=>{l.$$.dirty&1},[v,u,h,r,s,m,B,c,f]}class ke extends K{constructor(e){super(),L(this,e,we,ye,H,{})}}function Ie(l){let e,n,r,s="Menu",o,t,u,m,D="Restart",B,h,c,v,f,a,i,d="Player 1's turn",k,P,Q="3s",R;return t=new x({props:{class:"logo",name:"logo"}}),h=new ke({}),f=new x({props:{name:"turn-background-red"}}),{c(){e=y("main"),n=y("div"),r=y("a"),r.textContent=s,o=I(),V(t.$$.fragment),u=I(),m=y("button"),m.textContent=D,B=I(),V(h.$$.fragment),c=I(),v=y("div"),V(f.$$.fragment),a=I(),i=y("span"),i.textContent=d,k=I(),P=y("span"),P.textContent=Q,this.h()},l(C){e=w(C,"MAIN",{class:!0});var T=A(e);n=w(T,"DIV",{class:!0});var S=A(n);r=w(S,"A",{href:!0,class:!0,"data-svelte-h":!0}),O(r)!=="svelte-axxoo7"&&(r.textContent=s),o=E(S),z(t.$$.fragment,S),u=E(S),m=w(S,"BUTTON",{class:!0,"data-svelte-h":!0}),O(m)!=="svelte-13ytn0j"&&(m.textContent=D),S.forEach(b),B=E(T),z(h.$$.fragment,T),c=E(T),v=w(T,"DIV",{class:!0});var q=A(v);z(f.$$.fragment,q),a=E(q),i=w(q,"SPAN",{"data-svelte-h":!0}),O(i)!=="svelte-kij4ef"&&(i.textContent=d),k=E(q),P=w(q,"SPAN",{"data-svelte-h":!0}),O(P)!=="svelte-1jhyk2k"&&(P.textContent=Q),q.forEach(b),T.forEach(b),this.h()},h(){_(r,"href",`${fe}${me("/")}`),_(r,"class","flat-button button-purple"),_(m,"class","flat-button button-purple"),_(n,"class","menu"),_(v,"class","display-turn svelte-1q1jyhl"),_(e,"class","svelte-1q1jyhl")},m(C,T){M(C,e,T),p(e,n),p(n,r),p(n,o),j(t,n,null),p(n,u),p(n,m),p(e,B),j(h,e,null),p(e,c),p(e,v),j(f,v,null),p(v,a),p(v,i),p(v,k),p(v,P),R=!0},p:le,i(C){R||($(t.$$.fragment,C),$(h.$$.fragment,C),$(f.$$.fragment,C),R=!0)},o(C){g(t.$$.fragment,C),g(h.$$.fragment,C),g(f.$$.fragment,C),R=!1},d(C){C&&b(e),N(t),N(h),N(f)}}}class je extends K{constructor(e){super(),L(this,e,null,Ie,H,{})}}export{je as component};

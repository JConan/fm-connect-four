import{s as q,b as Q,c as W,o as le,n as ie,D as re,r as Ce,j as Te}from"../chunks/scheduler.BWarvw7U.js";import{S as F,i as J,e as C,k as V,c as k,a as D,l as z,d as v,g as U,o as M,p as w,B as x,q as S,C as Be,r as O,w as me,v as R,z as se,x as ae,n as h,s as T,t as Y,f as B,b as Z,h as m,j as $e,D as De,m as L}from"../chunks/index.DsNcAgd8.js";import{d as Pe,w as ee,g as Ae}from"../chunks/entry.TvpTIF56.js";import{f as ne,a as ke}from"../chunks/index.CRhbMw8D.js";import{I as H,r as Ne}from"../chunks/Image.CtRJHuvU.js";import{b as Ve}from"../chunks/paths.BW_WbXXb.js";function pe(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}const we=Array(7*6).fill(void 0),Ee="red",ue=ee(Ee),ce=ee(we),fe=ee(0),Ie=ee(0),ze=ee(),te=Pe([ce,ue,fe],([r,e,t])=>({grid:r,turn:e,activeColumn:t}));function Me(r){return new Promise(e=>{ce.update(t=>{const s=[...t],a=t.map((l,n)=>({value:l,column:n%7,index:n})).filter(l=>l.column===r.indexColumn&&l.value===void 0).pop();return a?(ue.update(l=>(s[a.index]=l,l==="red"?"yellow":"red")),e(!0),s):(e(!1),t)})})}function Se(){ce.set(we),ue.set(Ee),fe.set(0),Ie.update(r=>r+1)}function Oe(r){fe.set(r%7)}function Ue(r){let e,t,s,a,l;return t=new H({props:{name:`counter-${r[0]}`}}),{c(){e=C("div"),V(t.$$.fragment)},l(n){e=k(n,"DIV",{});var o=D(e);z(t.$$.fragment,o),o.forEach(v)},m(n,o){U(n,e,o),M(t,e,null),l=!0},p(n,[o]){const i={};o&1&&(i.name=`counter-${n[0]}`),t.$set(i)},i(n){l||(w(t.$$.fragment,n),n&&Q(()=>{l&&(a&&a.end(1),s=x(e,ne,{y:-1e3,duration:600}),s.start())}),l=!0)},o(n){S(t.$$.fragment,n),s&&s.invalidate(),n&&(a=Be(e,ke,{})),l=!1},d(n){n&&v(e),O(t),n&&a&&a.end()}}}function je(r,e,t){let{color:s}=e;return r.$$set=a=>{"color"in a&&t(0,s=a.color)},[s]}class Ge extends F{constructor(e){super(),J(this,e,je,Ue,q,{color:0})}}function ge(r){let e,t=r[2].current,s,a=ve(r);return{c(){e=C("div"),a.c(),this.h()},l(l){e=k(l,"DIV",{class:!0});var n=D(e);a.l(n),n.forEach(v),this.h()},h(){h(e,"class","board-cursor svelte-7k3e")},m(l,n){U(l,e,n),a.m(e,null),s=!0},p(l,n){n&4&&q(t,t=l[2].current)?(se(),S(a,1,1,ie),ae(),a=ve(l),a.c(),w(a,1),a.m(e,null)):a.p(l,n)},i(l){s||(w(a),s=!0)},o(l){S(a),s=!1},d(l){l&&v(e),a.d(l)}}}function ve(r){let e,t,s,a,l;return t=new H({props:{name:`marker-${r[3].turn}`}}),{c(){e=C("div"),V(t.$$.fragment),this.h()},l(n){e=k(n,"DIV",{style:!0});var o=D(e);z(t.$$.fragment,o),o.forEach(v),this.h()},h(){h(e,"style",s=`grid-area: cell-${r[2].current}`)},m(n,o){U(n,e,o),M(t,e,null),l=!0},p(n,o){r=n;const i={};o&8&&(i.name=`marker-${r[3].turn}`),t.$set(i),(!l||o&4&&s!==(s=`grid-area: cell-${r[2].current}`))&&h(e,"style",s)},i(n){l||(w(t.$$.fragment,n),n&&(a||Q(()=>{a=x(e,ne,{x:-r[0],duration:200,opacity:1}),a.start()})),l=!0)},o(n){S(t.$$.fragment,n),l=!1},d(n){n&&v(e),O(t)}}}function Re(r){let e,t,s,a;Q(r[5]);let l=r[1]>1079&&ge(r);return{c(){l&&l.c(),e=me()},l(n){l&&l.l(n),e=me()},m(n,o){l&&l.m(n,o),U(n,e,o),t=!0,s||(a=R(window,"resize",r[5]),s=!0)},p(n,[o]){n[1]>1079?l?(l.p(n,o),o&2&&w(l,1)):(l=ge(n),l.c(),w(l,1),l.m(e.parentNode,e)):l&&(se(),S(l,1,1,()=>{l=null}),ae())},i(n){t||(w(l),t=!0)},o(n){S(l),t=!1},d(n){n&&v(e),l&&l.d(n),s=!1,a()}}}function qe(r,e,t){let s,a;W(r,te,$=>t(3,a=$));let l=0;const n=ee({});W(r,n,$=>t(2,s=$)),le(()=>{n.subscribe(({current:$,previous:u})=>{if($!==void 0&&u!==void 0){const p=document.getElementById(`board-cell-${u}`).getClientRects()[0],P=document.getElementById(`board-cell-${$}`).getClientRects()[0];t(0,l=P.x-p.x)}}),te.subscribe($=>{n.update(u=>u.current!==$.activeColumn?{current:$.activeColumn,previous:u.current}:u)})});let o;function i(){t(1,o=window.innerWidth)}return[l,o,s,a,n,i]}class Le extends F{constructor(e){super(),J(this,e,qe,Re,q,{})}}function Qe(r){let e,t,s,a,l,n,o,i,$,u,p,P,y;return t=new H({props:{name:`turn-background-${r[0].turn}`}}),{c(){e=C("div"),V(t.$$.fragment),s=T(),a=C("span"),l=Y(r[2]),n=Y(" turn"),o=T(),i=C("span"),$=Y(r[1]),u=Y("s"),this.h()},l(c){e=k(c,"DIV",{class:!0});var g=D(e);z(t.$$.fragment,g),s=B(g),a=k(g,"SPAN",{});var b=D(a);l=Z(b,r[2]),n=Z(b," turn"),b.forEach(v),o=B(g),i=k(g,"SPAN",{});var A=D(i);$=Z(A,r[1]),u=Z(A,"s"),A.forEach(v),g.forEach(v),this.h()},h(){h(e,"class",p=re(`display-turn ${r[0].turn}`)+" svelte-1vn90zz")},m(c,g){U(c,e,g),M(t,e,null),m(e,s),m(e,a),m(a,l),m(a,n),m(e,o),m(e,i),m(i,$),m(i,u),y=!0},p(c,[g]){const b={};g&1&&(b.name=`turn-background-${c[0].turn}`),t.$set(b),(!y||g&4)&&$e(l,c[2]),(!y||g&2)&&$e($,c[1]),(!y||g&1&&p!==(p=re(`display-turn ${c[0].turn}`)+" svelte-1vn90zz"))&&h(e,"class",p)},i(c){y||(w(t.$$.fragment,c),c&&(P||Q(()=>{P=x(e,ne,{delay:1e3,y:300}),P.start()})),y=!0)},o(c){S(t.$$.fragment,c),y=!1},d(c){c&&v(e),O(t)}}}function We(r,e,t){let s,a,l;W(r,te,i=>t(0,a=i)),W(r,Ie,i=>t(4,l=i));let n="red",o=31;return le(()=>{const i=setInterval(()=>{t(1,o=o-1)},1e3);return()=>{clearInterval(i)}}),r.$$.update=()=>{r.$$.dirty&16&&l&&(t(3,n="red"),t(1,o=30)),r.$$.dirty&9&&a.turn!==n&&(t(3,n=a.turn),t(1,o=30)),r.$$.dirty&8&&t(2,s=n==="red"?"Player 1's":"Player 2's")},[a,o,s,n,l]}class He extends F{constructor(e){super(),J(this,e,We,Qe,q,{})}}function he(r,e,t){const s=r.slice();return s[5]=e[t],s[7]=t,s}function _e(r){let e,t;return e=new Ge({props:{color:r[0].grid[r[7]]}}),{c(){V(e.$$.fragment)},l(s){z(e.$$.fragment,s)},m(s,a){M(e,s,a),t=!0},p(s,a){const l={};a&1&&(l.color=s[0].grid[s[7]]),e.$set(l)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){O(e,s)}}}function be(r){let e,t,s,a,l,n=r[0].grid[r[7]]&&_e(r);return{c(){e=C("button"),n&&n.c(),t=T(),this.h()},l(o){e=k(o,"BUTTON",{class:!0,id:!0,role:!0,tabindex:!0});var i=D(e);n&&n.l(i),t=B(i),i.forEach(v),this.h()},h(){h(e,"class","cell svelte-1r3s0pc"),h(e,"id",`board-cell-${r[7]}`),h(e,"role","cell"),h(e,"tabindex","0")},m(o,i){U(o,e,i),n&&n.m(e,null),m(e,t),s=!0,a||(l=[R(e,"mouseenter",r[2](r[7])),R(e,"click",r[3](r[7]))],a=!0)},p(o,i){r=o,r[0].grid[r[7]]?n?(n.p(r,i),i&1&&w(n,1)):(n=_e(r),n.c(),w(n,1),n.m(e,t)):n&&(se(),S(n,1,1,()=>{n=null}),ae())},i(o){s||(w(n),s=!0)},o(o){S(n),s=!1},d(o){o&&v(e),n&&n.d(),a=!1,Ce(l)}}}function Fe(r){let e,t,s,a,l,n,o,i,$,u,p,P,y,c,g,b,A,K,G;a=new H({props:{class:"shadow",name:"board-layer-black"}});let N=pe(Array(7*6)),_=[];for(let f=0;f<N.length;f+=1)_[f]=be(he(r,N,f));const X=f=>S(_[f],1,1,()=>{_[f]=null});return i=new H({props:{class:"overlay",name:"board-layer-white"}}),p=new Le({}),c=new He({}),{c(){e=C("div"),t=C("div"),s=C("div"),V(a.$$.fragment),l=T(),n=C("div");for(let f=0;f<_.length;f+=1)_[f].c();o=T(),V(i.$$.fragment),$=T(),u=C("div"),V(p.$$.fragment),y=T(),V(c.$$.fragment),g=T(),b=C("div"),this.h()},l(f){e=k(f,"DIV",{class:!0});var E=D(e);t=k(E,"DIV",{class:!0});var d=D(t);s=k(d,"DIV",{class:!0});var I=D(s);z(a.$$.fragment,I),l=B(I),n=k(I,"DIV",{class:!0});var j=D(n);for(let oe=0;oe<_.length;oe+=1)_[oe].l(j);j.forEach(v),o=B(I),z(i.$$.fragment,I),$=B(I),u=k(I,"DIV",{});var de=D(u);z(p.$$.fragment,de),de.forEach(v),I.forEach(v),d.forEach(v),y=B(E),z(c.$$.fragment,E),g=B(E),b=k(E,"DIV",{class:!0,style:!0}),D(b).forEach(v),E.forEach(v),this.h()},h(){h(n,"class","cells svelte-1r3s0pc"),h(s,"class","board-grid svelte-1r3s0pc"),h(t,"class","board"),h(b,"class","game-status-background svelte-1r3s0pc"),h(b,"style",A=`background-color: var(--${r[1]?r[1]:"dark-purple"})`),h(e,"class","board-container svelte-1r3s0pc")},m(f,E){U(f,e,E),m(e,t),m(t,s),M(a,s,null),m(s,l),m(s,n);for(let d=0;d<_.length;d+=1)_[d]&&_[d].m(n,null);m(s,o),M(i,s,null),m(s,$),m(s,u),M(p,u,null),m(e,y),M(c,e,null),m(e,g),m(e,b),G=!0},p(f,[E]){if(E&13){N=pe(Array(7*6));let d;for(d=0;d<N.length;d+=1){const I=he(f,N,d);_[d]?(_[d].p(I,E),w(_[d],1)):(_[d]=be(I),_[d].c(),w(_[d],1),_[d].m(n,null))}for(se(),d=N.length;d<_.length;d+=1)X(d);ae()}(!G||E&2&&A!==(A=`background-color: var(--${f[1]?f[1]:"dark-purple"})`))&&h(b,"style",A)},i(f){if(!G){w(a.$$.fragment,f);for(let E=0;E<N.length;E+=1)w(_[E]);w(i.$$.fragment,f),w(p.$$.fragment,f),f&&(P||Q(()=>{P=x(u,ke,{delay:1e3}),P.start()})),w(c.$$.fragment,f),f&&(K||Q(()=>{K=x(b,ne,{delay:1e3,y:300}),K.start()})),G=!0}},o(f){S(a.$$.fragment,f),_=_.filter(Boolean);for(let E=0;E<_.length;E+=1)S(_[E]);S(i.$$.fragment,f),S(p.$$.fragment,f),S(c.$$.fragment,f),G=!1},d(f){f&&v(e),O(a),De(_,f),O(i),O(p),O(c)}}}function Je(r,e,t){let s,a;W(r,te,i=>t(0,s=i)),W(r,ze,i=>t(1,a=i)),le(()=>{Se()});let l;function n(i){return()=>{clearTimeout(l),l=setTimeout(()=>{Oe(i)},150)}}function o(i){return()=>{Me({indexColumn:i%7})}}return[s,a,n,o]}class Ke extends F{constructor(e){super(),J(this,e,Je,Fe,q,{})}}function Xe(r){let e,t,s="Menu",a,l,n,o,i="Restart",$,u,p,P="PAUSE",y,c,g="Continue game",b,A,K="Restart",G,N,_="Quit Game",X,f,E;return l=new H({props:{class:"logo",name:"logo"}}),{c(){e=C("div"),t=C("button"),t.textContent=s,a=T(),V(l.$$.fragment),n=T(),o=C("button"),o.textContent=i,$=T(),u=C("dialog"),p=C("span"),p.textContent=P,y=T(),c=C("button"),c.textContent=g,b=T(),A=C("button"),A.textContent=K,G=T(),N=C("button"),N.textContent=_,this.h()},l(d){e=k(d,"DIV",{class:!0});var I=D(e);t=k(I,"BUTTON",{class:!0,"data-svelte-h":!0}),L(t)!=="svelte-jmehzd"&&(t.textContent=s),a=B(I),z(l.$$.fragment,I),n=B(I),o=k(I,"BUTTON",{class:!0,"data-svelte-h":!0}),L(o)!=="svelte-j25n9j"&&(o.textContent=i),I.forEach(v),$=B(d),u=k(d,"DIALOG",{class:!0});var j=D(u);p=k(j,"SPAN",{"data-svelte-h":!0}),L(p)!=="svelte-16naano"&&(p.textContent=P),y=B(j),c=k(j,"BUTTON",{class:!0,"data-svelte-h":!0}),L(c)!=="svelte-vst0ui"&&(c.textContent=g),b=B(j),A=k(j,"BUTTON",{class:!0,"data-svelte-h":!0}),L(A)!=="svelte-15pdyjx"&&(A.textContent=K),G=B(j),N=k(j,"BUTTON",{class:!0,"data-svelte-h":!0}),L(N)!=="svelte-1xzbx5t"&&(N.textContent=_),j.forEach(v),this.h()},h(){h(t,"class","flat-button button-purple"),h(o,"class","flat-button button-purple"),h(e,"class","menu svelte-6c595u"),h(c,"class","text-button raised-button button-white"),h(A,"class","text-button raised-button button-white"),h(N,"class","text-button raised-button button-red"),h(u,"class","svelte-6c595u")},m(d,I){U(d,e,I),m(e,t),m(e,a),M(l,e,null),m(e,n),m(e,o),U(d,$,I),U(d,u,I),m(u,p),m(u,y),m(u,c),m(u,b),m(u,A),m(u,G),m(u,N),r[5](u),X=!0,f||(E=[R(t,"click",r[1]),R(o,"click",r[3]),R(c,"click",r[2]),R(A,"click",r[3]),R(N,"click",r[4])],f=!0)},p:ie,i(d){X||(w(l.$$.fragment,d),X=!0)},o(d){S(l.$$.fragment,d),X=!1},d(d){d&&(v(e),v($),v(u)),O(l),r[5](null),f=!1,Ce(E)}}}function Ye(r,e,t){let s;const a=()=>s.showModal(),l=()=>s.close(),n=()=>{Se(),s.close()},o=()=>{s.close(),Ae(`${Ve}${Ne("/")}`)};le(()=>{s.showModal()});function i($){Te[$?"unshift":"push"](()=>{s=$,t(0,s)})}return[s,a,l,n,o,i]}class Ze extends F{constructor(e){super(),J(this,e,Ye,Xe,q,{})}}function xe(r){let e;return{c(){e=Y("Player 2")},l(t){e=Z(t,"Player 2")},m(t,s){U(t,e,s)},d(t){t&&v(e)}}}function et(r){let e;return{c(){e=Y("Player 1")},l(t){e=Z(t,"Player 1")},m(t,s){U(t,e,s)},d(t){t&&v(e)}}}function tt(r){let e,t,s,a,l,n,o="12",i,$,u;t=new H({props:{class:`${r[0]===r[1].turn?"active":""} icon ${r[0]}`,name:r[0]==="red"?"player-one":"player-two"}});function p(c,g){return c[0]==="red"?et:xe}let P=p(r),y=P(r);return{c(){e=C("div"),V(t.$$.fragment),s=T(),a=C("span"),y.c(),l=T(),n=C("span"),n.textContent=o,this.h()},l(c){e=k(c,"DIV",{class:!0});var g=D(e);z(t.$$.fragment,g),s=B(g),a=k(g,"SPAN",{class:!0});var b=D(a);y.l(b),b.forEach(v),l=B(g),n=k(g,"SPAN",{class:!0,"data-svelte-h":!0}),L(n)!=="svelte-dbx7z1"&&(n.textContent=o),g.forEach(v),this.h()},h(){h(a,"class","svelte-ukks6l"),h(n,"class","svelte-ukks6l"),h(e,"class",i=re(`score-board ${r[0]}`)+" svelte-ukks6l")},m(c,g){U(c,e,g),M(t,e,null),m(e,s),m(e,a),y.m(a,null),m(e,l),m(e,n),u=!0},p(c,[g]){r=c;const b={};g&3&&(b.class=`${r[0]===r[1].turn?"active":""} icon ${r[0]}`),g&1&&(b.name=r[0]==="red"?"player-one":"player-two"),t.$set(b),P!==(P=p(r))&&(y.d(1),y=P(r),y&&(y.c(),y.m(a,null))),(!u||g&1&&i!==(i=re(`score-board ${r[0]}`)+" svelte-ukks6l"))&&h(e,"class",i)},i(c){u||(w(t.$$.fragment,c),c&&($||Q(()=>{$=x(e,ne,{x:300*(r[0]==="red"?-1:1),delay:1e3}),$.start()})),u=!0)},o(c){S(t.$$.fragment,c),u=!1},d(c){c&&v(e),O(t),y.d()}}}function nt(r,e,t){let s;W(r,te,l=>t(1,s=l));let{player:a}=e;return r.$$set=l=>{"player"in l&&t(0,a=l.player)},[a,s]}class ye extends F{constructor(e){super(),J(this,e,nt,tt,q,{player:0})}}function rt(r){let e,t,s,a,l,n,o,i,$;return t=new Ze({}),a=new ye({props:{player:"red"}}),n=new ye({props:{player:"yellow"}}),i=new Ke({}),{c(){e=C("main"),V(t.$$.fragment),s=T(),V(a.$$.fragment),l=T(),V(n.$$.fragment),o=T(),V(i.$$.fragment),this.h()},l(u){e=k(u,"MAIN",{class:!0});var p=D(e);z(t.$$.fragment,p),s=B(p),z(a.$$.fragment,p),l=B(p),z(n.$$.fragment,p),o=B(p),z(i.$$.fragment,p),p.forEach(v),this.h()},h(){h(e,"class","svelte-1a8y0ai")},m(u,p){U(u,e,p),M(t,e,null),m(e,s),M(a,e,null),m(e,l),M(n,e,null),m(e,o),M(i,e,null),$=!0},p:ie,i(u){$||(w(t.$$.fragment,u),w(a.$$.fragment,u),w(n.$$.fragment,u),w(i.$$.fragment,u),$=!0)},o(u){S(t.$$.fragment,u),S(a.$$.fragment,u),S(n.$$.fragment,u),S(i.$$.fragment,u),$=!1},d(u){u&&v(e),O(t),O(a),O(n),O(i)}}}class ct extends F{constructor(e){super(),J(this,e,null,rt,q,{})}}export{ct as component};

import{s as M,e as j,c as F,o as le,n as ae,E as Z,r as Ie}from"../chunks/scheduler.Bp73tsFP.js";import{S as U,i as W,e as E,k as A,c as I,a as D,l as B,d as h,g as T,o as z,p as v,B as J,q as w,C as Se,r as N,w as fe,v as x,z as ee,x as te,n as k,s as P,t as H,f as V,b as L,h as p,j as de,D as De,m as ne}from"../chunks/index.WTjgDaL3.js";import{d as Pe,w as Q}from"../chunks/index.CpYc9ZES.js";import{f as X,a as be}from"../chunks/index.BXk-0J-c.js";import{I as O,r as Ve}from"../chunks/Image.D_qDVnnI.js";import{b as Ae}from"../chunks/paths.DaXRxL_Z.js";function me(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}const ye=Array(7*6).fill(void 0),ke="red",se=Q(ke),oe=Q(ye),ie=Q(0),we=Q(0),K=Pe([oe,se,ie],([n,e,t])=>({grid:n,turn:e,activeColumn:t}));function Be(n){return new Promise(e=>{oe.update(t=>{const a=[...t],s=t.map((l,r)=>({value:l,column:r%7,index:r})).filter(l=>l.column===n.indexColumn&&l.value===void 0).pop();return s?(se.update(l=>(a[s.index]=l,l==="red"?"yellow":"red")),e(!0),a):(e(!1),t)})})}function Ce(){oe.set(ye),se.set(ke),ie.set(0),we.update(n=>n+1)}function ze(n){ie.set(n%7)}function Ne(n){let e,t,a,s,l;return t=new O({props:{name:`counter-${n[0]}`}}),{c(){e=E("div"),A(t.$$.fragment)},l(r){e=I(r,"DIV",{});var o=D(e);B(t.$$.fragment,o),o.forEach(h)},m(r,o){T(r,e,o),z(t,e,null),l=!0},p(r,[o]){const i={};o&1&&(i.name=`counter-${r[0]}`),t.$set(i)},i(r){l||(v(t.$$.fragment,r),r&&j(()=>{l&&(s&&s.end(1),a=J(e,X,{y:-1e3,duration:600}),a.start())}),l=!0)},o(r){w(t.$$.fragment,r),a&&a.invalidate(),r&&(s=Se(e,be,{})),l=!1},d(r){r&&h(e),N(t),r&&s&&s.end()}}}function Te(n,e,t){let{color:a}=e;return n.$$set=s=>{"color"in s&&t(0,a=s.color)},[a]}class qe extends U{constructor(e){super(),W(this,e,Te,Ne,M,{color:0})}}function $e(n){let e,t=n[2].current,a,s=ge(n);return{c(){e=E("div"),s.c(),this.h()},l(l){e=I(l,"DIV",{class:!0});var r=D(e);s.l(r),r.forEach(h),this.h()},h(){k(e,"class","board-cursor svelte-7k3e")},m(l,r){T(l,e,r),s.m(e,null),a=!0},p(l,r){r&4&&M(t,t=l[2].current)?(ee(),w(s,1,1,ae),te(),s=ge(l),s.c(),v(s,1),s.m(e,null)):s.p(l,r)},i(l){a||(v(s),a=!0)},o(l){w(s),a=!1},d(l){l&&h(e),s.d(l)}}}function ge(n){let e,t,a,s,l;return t=new O({props:{name:`marker-${n[3].turn}`}}),{c(){e=E("div"),A(t.$$.fragment),this.h()},l(r){e=I(r,"DIV",{style:!0});var o=D(e);B(t.$$.fragment,o),o.forEach(h),this.h()},h(){k(e,"style",a=`grid-area: cell-${n[2].current}`)},m(r,o){T(r,e,o),z(t,e,null),l=!0},p(r,o){n=r;const i={};o&8&&(i.name=`marker-${n[3].turn}`),t.$set(i),(!l||o&4&&a!==(a=`grid-area: cell-${n[2].current}`))&&k(e,"style",a)},i(r){l||(v(t.$$.fragment,r),r&&(s||j(()=>{s=J(e,X,{x:-n[0],duration:200,opacity:1}),s.start()})),l=!0)},o(r){w(t.$$.fragment,r),l=!1},d(r){r&&h(e),N(t)}}}function Me(n){let e,t,a,s;j(n[5]);let l=n[1]>1079&&$e(n);return{c(){l&&l.c(),e=fe()},l(r){l&&l.l(r),e=fe()},m(r,o){l&&l.m(r,o),T(r,e,o),t=!0,a||(s=x(window,"resize",n[5]),a=!0)},p(r,[o]){r[1]>1079?l?(l.p(r,o),o&2&&v(l,1)):(l=$e(r),l.c(),v(l,1),l.m(e.parentNode,e)):l&&(ee(),w(l,1,1,()=>{l=null}),te())},i(r){t||(v(l),t=!0)},o(r){w(l),t=!1},d(r){r&&h(e),l&&l.d(r),a=!1,s()}}}function Ge(n,e,t){let a,s;F(n,K,f=>t(3,s=f));let l=0;const r=Q({});F(n,r,f=>t(2,a=f)),le(()=>{r.subscribe(({current:f,previous:u})=>{if(f!==void 0&&u!==void 0){const m=document.getElementById(`board-cell-${u}`).getClientRects()[0],_=document.getElementById(`board-cell-${f}`).getClientRects()[0];t(0,l=_.x-m.x)}}),K.subscribe(f=>{r.update(u=>u.current!==f.activeColumn?{current:f.activeColumn,previous:u.current}:u)})});let o;function i(){t(1,o=window.innerWidth)}return[l,o,a,s,r,i]}class Re extends U{constructor(e){super(),W(this,e,Ge,Me,M,{})}}function je(n){let e,t,a,s,l,r,o,i,f,u,m,_,g;return t=new O({props:{name:`turn-background-${n[0].turn}`}}),{c(){e=E("div"),A(t.$$.fragment),a=P(),s=E("span"),l=H(n[2]),r=H(" turn"),o=P(),i=E("span"),f=H(n[1]),u=H("s"),this.h()},l(c){e=I(c,"DIV",{class:!0});var $=D(e);B(t.$$.fragment,$),a=V($),s=I($,"SPAN",{});var C=D(s);l=L(C,n[2]),r=L(C," turn"),C.forEach(h),o=V($),i=I($,"SPAN",{});var G=D(i);f=L(G,n[1]),u=L(G,"s"),G.forEach(h),$.forEach(h),this.h()},h(){k(e,"class",m=Z(`display-turn ${n[0].turn}`)+" svelte-1vn90zz")},m(c,$){T(c,e,$),z(t,e,null),p(e,a),p(e,s),p(s,l),p(s,r),p(e,o),p(e,i),p(i,f),p(i,u),g=!0},p(c,[$]){const C={};$&1&&(C.name=`turn-background-${c[0].turn}`),t.$set(C),(!g||$&4)&&de(l,c[2]),(!g||$&2)&&de(f,c[1]),(!g||$&1&&m!==(m=Z(`display-turn ${c[0].turn}`)+" svelte-1vn90zz"))&&k(e,"class",m)},i(c){g||(v(t.$$.fragment,c),c&&(_||j(()=>{_=J(e,X,{delay:1e3,y:300}),_.start()})),g=!0)},o(c){w(t.$$.fragment,c),g=!1},d(c){c&&h(e),N(t)}}}function Oe(n,e,t){let a,s,l;F(n,K,i=>t(0,s=i)),F(n,we,i=>t(4,l=i));let r="red",o=30;return le(()=>{const i=setInterval(()=>{t(1,o=o-1)},1e3);return()=>{clearInterval(i)}}),n.$$.update=()=>{n.$$.dirty&16&&l&&t(3,r="red"),n.$$.dirty&9&&s.turn!==r&&(t(3,r=s.turn),t(1,o=30)),n.$$.dirty&8&&t(2,a=r==="red"?"Player 1's":"Player 2's")},[s,o,a,r,l]}class Ue extends U{constructor(e){super(),W(this,e,Oe,je,M,{})}}function pe(n,e,t){const a=n.slice();return a[4]=e[t],a[6]=t,a}function he(n){let e,t;return e=new qe({props:{color:n[0].grid[n[6]]}}),{c(){A(e.$$.fragment)},l(a){B(e.$$.fragment,a)},m(a,s){z(e,a,s),t=!0},p(a,s){const l={};s&1&&(l.color=a[0].grid[a[6]]),e.$set(l)},i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){w(e.$$.fragment,a),t=!1},d(a){N(e,a)}}}function ve(n){let e,t,a,s,l,r=n[0].grid[n[6]]&&he(n);return{c(){e=E("button"),r&&r.c(),t=P(),this.h()},l(o){e=I(o,"BUTTON",{class:!0,id:!0,role:!0,tabindex:!0});var i=D(e);r&&r.l(i),t=V(i),i.forEach(h),this.h()},h(){k(e,"class","cell svelte-1rxi44q"),k(e,"id",`board-cell-${n[6]}`),k(e,"role","cell"),k(e,"tabindex","0")},m(o,i){T(o,e,i),r&&r.m(e,null),p(e,t),a=!0,s||(l=[x(e,"mouseenter",n[1](n[6])),x(e,"click",n[2](n[6]))],s=!0)},p(o,i){n=o,n[0].grid[n[6]]?r?(r.p(n,i),i&1&&v(r,1)):(r=he(n),r.c(),v(r,1),r.m(e,t)):r&&(ee(),w(r,1,1,()=>{r=null}),te())},i(o){a||(v(r),a=!0)},o(o){w(r),a=!1},d(o){o&&h(e),r&&r.d(),s=!1,Ie(l)}}}function We(n){let e,t,a,s,l,r,o,i,f,u,m,_,g,c,$,C,G,Y;s=new O({props:{class:"shadow",name:"board-layer-black"}});let R=me(Array(7*6)),b=[];for(let d=0;d<R.length;d+=1)b[d]=ve(pe(n,R,d));const Ee=d=>w(b[d],1,1,()=>{b[d]=null});return i=new O({props:{class:"overlay",name:"board-layer-white"}}),m=new Re({}),c=new Ue({}),{c(){e=E("div"),t=E("div"),a=E("div"),A(s.$$.fragment),l=P(),r=E("div");for(let d=0;d<b.length;d+=1)b[d].c();o=P(),A(i.$$.fragment),f=P(),u=E("div"),A(m.$$.fragment),g=P(),A(c.$$.fragment),$=P(),C=E("div"),this.h()},l(d){e=I(d,"DIV",{class:!0});var S=D(e);t=I(S,"DIV",{class:!0});var y=D(t);a=I(y,"DIV",{class:!0});var q=D(a);B(s.$$.fragment,q),l=V(q),r=I(q,"DIV",{class:!0});var ue=D(r);for(let re=0;re<b.length;re+=1)b[re].l(ue);ue.forEach(h),o=V(q),B(i.$$.fragment,q),f=V(q),u=I(q,"DIV",{});var ce=D(u);B(m.$$.fragment,ce),ce.forEach(h),q.forEach(h),y.forEach(h),g=V(S),B(c.$$.fragment,S),$=V(S),C=I(S,"DIV",{class:!0}),D(C).forEach(h),S.forEach(h),this.h()},h(){k(r,"class","cells svelte-1rxi44q"),k(a,"class","board-grid svelte-1rxi44q"),k(t,"class","board"),k(C,"class","game-status-background svelte-1rxi44q"),k(e,"class","board-container svelte-1rxi44q")},m(d,S){T(d,e,S),p(e,t),p(t,a),z(s,a,null),p(a,l),p(a,r);for(let y=0;y<b.length;y+=1)b[y]&&b[y].m(r,null);p(a,o),z(i,a,null),p(a,f),p(a,u),z(m,u,null),p(e,g),z(c,e,null),p(e,$),p(e,C),Y=!0},p(d,[S]){if(S&7){R=me(Array(7*6));let y;for(y=0;y<R.length;y+=1){const q=pe(d,R,y);b[y]?(b[y].p(q,S),v(b[y],1)):(b[y]=ve(q),b[y].c(),v(b[y],1),b[y].m(r,null))}for(ee(),y=R.length;y<b.length;y+=1)Ee(y);te()}},i(d){if(!Y){v(s.$$.fragment,d);for(let S=0;S<R.length;S+=1)v(b[S]);v(i.$$.fragment,d),v(m.$$.fragment,d),d&&(_||j(()=>{_=J(u,be,{delay:1e3}),_.start()})),v(c.$$.fragment,d),d&&(G||j(()=>{G=J(C,X,{delay:1e3,y:300}),G.start()})),Y=!0}},o(d){w(s.$$.fragment,d),b=b.filter(Boolean);for(let S=0;S<b.length;S+=1)w(b[S]);w(i.$$.fragment,d),w(m.$$.fragment,d),w(c.$$.fragment,d),Y=!1},d(d){d&&h(e),N(s),De(b,d),N(i),N(m),N(c)}}}function He(n,e,t){let a;F(n,K,o=>t(0,a=o)),le(()=>{Ce()});let s;function l(o){return()=>{clearTimeout(s),s=setTimeout(()=>{ze(o)},150)}}function r(o){return()=>{Be({indexColumn:o%7})}}return[a,l,r]}class Le extends U{constructor(e){super(),W(this,e,He,We,M,{})}}function Fe(n){let e,t,a="Menu",s,l,r,o,i="Restart",f,u,m;return l=new O({props:{class:"logo",name:"logo"}}),{c(){e=E("div"),t=E("a"),t.textContent=a,s=P(),A(l.$$.fragment),r=P(),o=E("button"),o.textContent=i,this.h()},l(_){e=I(_,"DIV",{class:!0});var g=D(e);t=I(g,"A",{href:!0,class:!0,"data-svelte-h":!0}),ne(t)!=="svelte-axxoo7"&&(t.textContent=a),s=V(g),B(l.$$.fragment,g),r=V(g),o=I(g,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(o)!=="svelte-1akbaj5"&&(o.textContent=i),g.forEach(h),this.h()},h(){k(t,"href",`${Ae}${Ve("/")}`),k(t,"class","flat-button button-purple"),k(o,"class","flat-button button-purple"),k(e,"class","menu svelte-1bcp1gc")},m(_,g){T(_,e,g),p(e,t),p(e,s),z(l,e,null),p(e,r),p(e,o),f=!0,u||(m=x(o,"click",n[0]),u=!0)},p:ae,i(_){f||(v(l.$$.fragment,_),f=!0)},o(_){w(l.$$.fragment,_),f=!1},d(_){_&&h(e),N(l),u=!1,m()}}}function Je(n){return[()=>{Ce()}]}class Ke extends U{constructor(e){super(),W(this,e,Je,Fe,M,{})}}function Qe(n){let e;return{c(){e=H("Player 2")},l(t){e=L(t,"Player 2")},m(t,a){T(t,e,a)},d(t){t&&h(e)}}}function Xe(n){let e;return{c(){e=H("Player 1")},l(t){e=L(t,"Player 1")},m(t,a){T(t,e,a)},d(t){t&&h(e)}}}function Ye(n){let e,t,a,s,l,r,o="12",i,f,u;t=new O({props:{class:`${n[0]===n[1].turn?"active":""} icon ${n[0]}`,name:n[0]==="red"?"player-one":"player-two"}});function m(c,$){return c[0]==="red"?Xe:Qe}let _=m(n),g=_(n);return{c(){e=E("div"),A(t.$$.fragment),a=P(),s=E("span"),g.c(),l=P(),r=E("span"),r.textContent=o,this.h()},l(c){e=I(c,"DIV",{class:!0});var $=D(e);B(t.$$.fragment,$),a=V($),s=I($,"SPAN",{class:!0});var C=D(s);g.l(C),C.forEach(h),l=V($),r=I($,"SPAN",{class:!0,"data-svelte-h":!0}),ne(r)!=="svelte-dbx7z1"&&(r.textContent=o),$.forEach(h),this.h()},h(){k(s,"class","svelte-ukks6l"),k(r,"class","svelte-ukks6l"),k(e,"class",i=Z(`score-board ${n[0]}`)+" svelte-ukks6l")},m(c,$){T(c,e,$),z(t,e,null),p(e,a),p(e,s),g.m(s,null),p(e,l),p(e,r),u=!0},p(c,[$]){n=c;const C={};$&3&&(C.class=`${n[0]===n[1].turn?"active":""} icon ${n[0]}`),$&1&&(C.name=n[0]==="red"?"player-one":"player-two"),t.$set(C),_!==(_=m(n))&&(g.d(1),g=_(n),g&&(g.c(),g.m(s,null))),(!u||$&1&&i!==(i=Z(`score-board ${n[0]}`)+" svelte-ukks6l"))&&k(e,"class",i)},i(c){u||(v(t.$$.fragment,c),c&&(f||j(()=>{f=J(e,X,{x:300*(n[0]==="red"?-1:1),delay:1e3}),f.start()})),u=!0)},o(c){w(t.$$.fragment,c),u=!1},d(c){c&&h(e),N(t),g.d()}}}function Ze(n,e,t){let a;F(n,K,l=>t(1,a=l));let{player:s}=e;return n.$$set=l=>{"player"in l&&t(0,s=l.player)},[s,a]}class _e extends U{constructor(e){super(),W(this,e,Ze,Ye,M,{player:0})}}function xe(n){let e,t,a,s,l,r,o,i,f;return t=new Ke({}),s=new _e({props:{player:"red"}}),r=new _e({props:{player:"yellow"}}),i=new Le({}),{c(){e=E("main"),A(t.$$.fragment),a=P(),A(s.$$.fragment),l=P(),A(r.$$.fragment),o=P(),A(i.$$.fragment),this.h()},l(u){e=I(u,"MAIN",{class:!0});var m=D(e);B(t.$$.fragment,m),a=V(m),B(s.$$.fragment,m),l=V(m),B(r.$$.fragment,m),o=V(m),B(i.$$.fragment,m),m.forEach(h),this.h()},h(){k(e,"class","svelte-1350y6y")},m(u,m){T(u,e,m),z(t,e,null),p(e,a),z(s,e,null),p(e,l),z(r,e,null),p(e,o),z(i,e,null),f=!0},p:ae,i(u){f||(v(t.$$.fragment,u),v(s.$$.fragment,u),v(r.$$.fragment,u),v(i.$$.fragment,u),f=!0)},o(u){w(t.$$.fragment,u),w(s.$$.fragment,u),w(r.$$.fragment,u),w(i.$$.fragment,u),f=!1},d(u){u&&h(e),N(t),N(s),N(r),N(i)}}}class st extends U{constructor(e){super(),W(this,e,null,xe,M,{})}}export{st as component};

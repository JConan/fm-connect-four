import{s as M,e as Q,c as L,o as ce,n as fe,r as _e}from"../chunks/scheduler.Bf1hPX8E.js";import{S as W,i as G,e as C,k as B,c as w,a as S,l as A,d as h,g as x,o as D,p as d,B as me,q as p,C as be,r as T,w as re,v as U,z as H,x as F,n as g,s as y,f as I,h as $,D as Ce,m as O}from"../chunks/index.CGhscT6l.js";import{b as we}from"../chunks/paths.C5PvD2Vs.js";import{I as q,r as ke}from"../chunks/Image.Dc5JhaOo.js";import{d as de,w as z}from"../chunks/index.BPNK3XrK.js";import{f as $e,a as ye}from"../chunks/index.3i_vlO88.js";function le(o){return(o==null?void 0:o.length)!==void 0?o:Array.from(o)}const pe=Array(7*6).fill(void 0),he="red",X=z(he),Y=z(pe),Z=z(0),ge=de([Y,X,Z],([o,e,n])=>({grid:o,turn:e,activeColumn:n}));function Ie(o){return new Promise(e=>{Y.update(n=>{const l=[...n],s=n.map((r,t)=>({value:r,column:t%7,index:t})).filter(r=>r.column===o.indexColumn&&r.value===void 0).pop();return s?(X.update(r=>(l[s.index]=r,r==="red"?"yellow":"red")),e(!0),l):(e(!1),n)})})}function ve(){Y.set(pe),X.set(he),Z.set(0)}function Ee(o){Z.set(o%7)}function Be(o){let e,n,l,s,r;return n=new q({props:{name:`counter-${o[0]}`}}),{c(){e=C("div"),B(n.$$.fragment)},l(t){e=w(t,"DIV",{});var a=S(e);A(n.$$.fragment,a),a.forEach(h)},m(t,a){x(t,e,a),D(n,e,null),r=!0},p(t,[a]){const c={};a&1&&(c.name=`counter-${t[0]}`),n.$set(c)},i(t){r||(d(n.$$.fragment,t),t&&Q(()=>{r&&(s&&s.end(1),l=me(e,$e,{y:-1e3,duration:600}),l.start())}),r=!0)},o(t){p(n.$$.fragment,t),l&&l.invalidate(),t&&(s=be(e,ye,{})),r=!1},d(t){t&&h(e),T(n),t&&s&&s.end()}}}function Se(o,e,n){let{color:l}=e;return o.$$set=s=>{"color"in s&&n(0,l=s.color)},[l]}class Ae extends W{constructor(e){super(),G(this,e,Se,Be,M,{color:0})}}function oe(o){let e,n=o[2].column,l,s=se(o);return{c(){e=C("div"),s.c(),this.h()},l(r){e=w(r,"DIV",{class:!0});var t=S(e);s.l(t),t.forEach(h),this.h()},h(){g(e,"class","board-cursor svelte-7k3e")},m(r,t){x(r,e,t),s.m(e,null),l=!0},p(r,t){t&4&&M(n,n=r[2].column)?(H(),p(s,1,1,fe),F(),s=se(r),s.c(),d(s,1),s.m(e,null)):s.p(r,t)},i(r){l||(d(s),l=!0)},o(r){p(s),l=!1},d(r){r&&h(e),s.d(r)}}}function se(o){let e,n,l,s,r;return n=new q({props:{name:`marker-${o[3].turn}`}}),{c(){e=C("div"),B(n.$$.fragment),this.h()},l(t){e=w(t,"DIV",{style:!0});var a=S(e);A(n.$$.fragment,a),a.forEach(h),this.h()},h(){g(e,"style",l=`grid-area: cell-${o[2].column}`)},m(t,a){x(t,e,a),D(n,e,null),r=!0},p(t,a){o=t;const c={};a&8&&(c.name=`marker-${o[3].turn}`),n.$set(c),(!r||a&4&&l!==(l=`grid-area: cell-${o[2].column}`))&&g(e,"style",l)},i(t){r||(d(n.$$.fragment,t),t&&(s||Q(()=>{s=me(e,$e,{x:-o[0],duration:200,opacity:1}),s.start()})),r=!0)},o(t){p(n.$$.fragment,t),r=!1},d(t){t&&h(e),T(n)}}}function De(o){let e,n,l,s;Q(o[5]);let r=o[1]>768&&oe(o);return{c(){r&&r.c(),e=re()},l(t){r&&r.l(t),e=re()},m(t,a){r&&r.m(t,a),x(t,e,a),n=!0,l||(s=U(window,"resize",o[5]),l=!0)},p(t,[a]){t[1]>768?r?(r.p(t,a),a&2&&d(r,1)):(r=oe(t),r.c(),d(r,1),r.m(e.parentNode,e)):r&&(H(),p(r,1,1,()=>{r=null}),F())},i(t){n||(d(r),n=!0)},o(t){p(r),n=!1},d(t){t&&h(e),r&&r.d(t),l=!1,s()}}}function Te(o,e,n){let l,s;L(o,ge,u=>n(3,s=u));const r=z(0),t=z(0);let a=0;const c=de([r,t],([u,E])=>({column:u,prevColumn:E}));L(o,c,u=>n(2,l=u)),ce(()=>{c.subscribe(({column:u,prevColumn:E})=>{const i=document.getElementById(`board-cell-${E}`).getClientRects()[0],f=document.getElementById(`board-cell-${u}`).getClientRects()[0];n(0,a=f.x-i.x)})});let k;function v(){n(1,k=window.innerWidth)}return[a,k,l,s,c,v]}class Ve extends W{constructor(e){super(),G(this,e,Te,De,M,{})}}function ae(o,e,n){const l=o.slice();return l[4]=e[n],l[6]=n,l}function ie(o){let e,n;return e=new Ae({props:{color:o[0].grid[o[6]]}}),{c(){B(e.$$.fragment)},l(l){A(e.$$.fragment,l)},m(l,s){D(e,l,s),n=!0},p(l,s){const r={};s&1&&(r.color=l[0].grid[l[6]]),e.$set(r)},i(l){n||(d(e.$$.fragment,l),n=!0)},o(l){p(e.$$.fragment,l),n=!1},d(l){T(e,l)}}}function ue(o){let e,n,l,s,r,t=o[0].grid[o[6]]&&ie(o);return{c(){e=C("button"),t&&t.c(),n=y(),this.h()},l(a){e=w(a,"BUTTON",{class:!0,id:!0,role:!0,tabindex:!0});var c=S(e);t&&t.l(c),n=I(c),c.forEach(h),this.h()},h(){g(e,"class","cell svelte-1tf5dbi"),g(e,"id",`board-cell-${o[6]}`),g(e,"role","cell"),g(e,"tabindex","0")},m(a,c){x(a,e,c),t&&t.m(e,null),$(e,n),l=!0,s||(r=[U(e,"mouseenter",o[1](o[6])),U(e,"click",o[2](o[6]))],s=!0)},p(a,c){o=a,o[0].grid[o[6]]?t?(t.p(o,c),c&1&&d(t,1)):(t=ie(o),t.c(),d(t,1),t.m(e,n)):t&&(H(),p(t,1,1,()=>{t=null}),F())},i(a){l||(d(t),l=!0)},o(a){p(t),l=!1},d(a){a&&h(e),t&&t.d(),s=!1,_e(r)}}}function xe(o){let e,n,l,s,r,t,a,c,k;n=new q({props:{class:"shadow",name:"board-layer-black"}});let v=le(Array(7*6)),u=[];for(let i=0;i<v.length;i+=1)u[i]=ue(ae(o,v,i));const E=i=>p(u[i],1,1,()=>{u[i]=null});return t=new q({props:{class:"overlay",name:"board-layer-white"}}),c=new Ve({}),{c(){e=C("div"),B(n.$$.fragment),l=y(),s=C("div");for(let i=0;i<u.length;i+=1)u[i].c();r=y(),B(t.$$.fragment),a=y(),B(c.$$.fragment),this.h()},l(i){e=w(i,"DIV",{class:!0});var f=S(e);A(n.$$.fragment,f),l=I(f),s=w(f,"DIV",{class:!0});var m=S(s);for(let _=0;_<u.length;_+=1)u[_].l(m);m.forEach(h),r=I(f),A(t.$$.fragment,f),a=I(f),A(c.$$.fragment,f),f.forEach(h),this.h()},h(){g(s,"class","cells svelte-1tf5dbi"),g(e,"class","board svelte-1tf5dbi")},m(i,f){x(i,e,f),D(n,e,null),$(e,l),$(e,s);for(let m=0;m<u.length;m+=1)u[m]&&u[m].m(s,null);$(e,r),D(t,e,null),$(e,a),D(c,e,null),k=!0},p(i,[f]){if(f&7){v=le(Array(7*6));let m;for(m=0;m<v.length;m+=1){const _=ae(i,v,m);u[m]?(u[m].p(_,f),d(u[m],1)):(u[m]=ue(_),u[m].c(),d(u[m],1),u[m].m(s,null))}for(H(),m=v.length;m<u.length;m+=1)E(m);F()}},i(i){if(!k){d(n.$$.fragment,i);for(let f=0;f<v.length;f+=1)d(u[f]);d(t.$$.fragment,i),d(c.$$.fragment,i),k=!0}},o(i){p(n.$$.fragment,i),u=u.filter(Boolean);for(let f=0;f<u.length;f+=1)p(u[f]);p(t.$$.fragment,i),p(c.$$.fragment,i),k=!1},d(i){i&&h(e),T(n),Ce(u,i),T(t),T(c)}}}function Ne(o,e,n){let l;L(o,ge,a=>n(0,l=a)),ce(()=>{ve()});let s;function r(a){return()=>{clearTimeout(s),s=setTimeout(()=>{Ee(a)},150)}}function t(a){return()=>{Ie({indexColumn:a%7})}}return[l,r,t]}class Pe extends W{constructor(e){super(),G(this,e,Ne,xe,M,{})}}function je(o){let e,n,l,s="Menu",r,t,a,c,k="Restart",v,u,E,i,f,m,_,ee="Player 1's turn",J,N,te="3s",R,K,ne;return t=new q({props:{class:"logo",name:"logo"}}),u=new Pe({}),f=new q({props:{name:"turn-background-red"}}),{c(){e=C("main"),n=C("div"),l=C("a"),l.textContent=s,r=y(),B(t.$$.fragment),a=y(),c=C("button"),c.textContent=k,v=y(),B(u.$$.fragment),E=y(),i=C("div"),B(f.$$.fragment),m=y(),_=C("span"),_.textContent=ee,J=y(),N=C("span"),N.textContent=te,this.h()},l(b){e=w(b,"MAIN",{class:!0});var V=S(e);n=w(V,"DIV",{class:!0});var P=S(n);l=w(P,"A",{href:!0,class:!0,"data-svelte-h":!0}),O(l)!=="svelte-axxoo7"&&(l.textContent=s),r=I(P),A(t.$$.fragment,P),a=I(P),c=w(P,"BUTTON",{class:!0,"data-svelte-h":!0}),O(c)!=="svelte-wnhnxd"&&(c.textContent=k),P.forEach(h),v=I(V),A(u.$$.fragment,V),E=I(V),i=w(V,"DIV",{class:!0});var j=S(i);A(f.$$.fragment,j),m=I(j),_=w(j,"SPAN",{"data-svelte-h":!0}),O(_)!=="svelte-kij4ef"&&(_.textContent=ee),J=I(j),N=w(j,"SPAN",{"data-svelte-h":!0}),O(N)!=="svelte-1jhyk2k"&&(N.textContent=te),j.forEach(h),V.forEach(h),this.h()},h(){g(l,"href",`${we}${ke("/")}`),g(l,"class","flat-button button-purple"),g(c,"class","flat-button button-purple"),g(n,"class","menu"),g(i,"class","display-turn svelte-1q1jyhl"),g(e,"class","svelte-1q1jyhl")},m(b,V){x(b,e,V),$(e,n),$(n,l),$(n,r),D(t,n,null),$(n,a),$(n,c),$(e,v),D(u,e,null),$(e,E),$(e,i),D(f,i,null),$(i,m),$(i,_),$(i,J),$(i,N),R=!0,K||(ne=U(c,"click",o[0]),K=!0)},p:fe,i(b){R||(d(t.$$.fragment,b),d(u.$$.fragment,b),d(f.$$.fragment,b),R=!0)},o(b){p(t.$$.fragment,b),p(u.$$.fragment,b),p(f.$$.fragment,b),R=!1},d(b){b&&h(e),T(t),T(u),T(f),K=!1,ne()}}}function qe(o){return[()=>{ve()}]}class Ge extends W{constructor(e){super(),G(this,e,qe,je,M,{})}}export{Ge as component};

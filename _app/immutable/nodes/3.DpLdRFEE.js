import{s as O,e as Z,c as X,o as fe,n as me,r as _e}from"../chunks/scheduler.Bf1hPX8E.js";import{S as H,i as F,e as w,k as T,c as y,a as D,l as V,d as p,g as N,o as j,p as $,B as de,q as h,C as be,r as x,w as le,v as W,z as J,x as K,n as _,s as B,f as A,m as G,h as v,D as Ce}from"../chunks/index.CGhscT6l.js";import{b as ke}from"../chunks/paths.CXM0UhyG.js";import{I as M,r as we}from"../chunks/Image.BPOnY0Mb.js";import{d as ye,w as L}from"../chunks/index.BPNK3XrK.js";import{f as $e,a as Ie}from"../chunks/index.3i_vlO88.js";function se(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}const pe=Array(7*6).fill(void 0),ge="red",ee=L(ge),te=L(pe),ne=L(0),Y=ye([te,ee,ne],([s,e,n])=>({grid:s,turn:e,activeColumn:n}));function Ee(s){return new Promise(e=>{te.update(n=>{const l=[...n],a=n.map((r,t)=>({value:r,column:t%7,index:t})).filter(r=>r.column===s.indexColumn&&r.value===void 0).pop();return a?(ee.update(r=>(l[a.index]=r,r==="red"?"yellow":"red")),e(!0),l):(e(!1),n)})})}function he(){te.set(pe),ee.set(ge),ne.set(0)}function Be(s){ne.set(s%7)}function Ae(s){let e,n,l,a,r;return n=new M({props:{name:`counter-${s[0]}`}}),{c(){e=w("div"),T(n.$$.fragment)},l(t){e=y(t,"DIV",{});var o=D(e);V(n.$$.fragment,o),o.forEach(p)},m(t,o){N(t,e,o),j(n,e,null),r=!0},p(t,[o]){const u={};o&1&&(u.name=`counter-${t[0]}`),n.$set(u)},i(t){r||($(n.$$.fragment,t),t&&Z(()=>{r&&(a&&a.end(1),l=de(e,$e,{y:-1e3,duration:600}),l.start())}),r=!0)},o(t){h(n.$$.fragment,t),l&&l.invalidate(),t&&(a=be(e,Ie,{})),r=!1},d(t){t&&p(e),x(n),t&&a&&a.end()}}}function De(s,e,n){let{color:l}=e;return s.$$set=a=>{"color"in a&&n(0,l=a.color)},[l]}class Se extends H{constructor(e){super(),F(this,e,De,Ae,O,{color:0})}}function ae(s){let e,n=s[2].current,l,a=oe(s);return{c(){e=w("div"),a.c(),this.h()},l(r){e=y(r,"DIV",{class:!0});var t=D(e);a.l(t),t.forEach(p),this.h()},h(){_(e,"class","board-cursor svelte-7k3e")},m(r,t){N(r,e,t),a.m(e,null),l=!0},p(r,t){t&4&&O(n,n=r[2].current)?(J(),h(a,1,1,me),K(),a=oe(r),a.c(),$(a,1),a.m(e,null)):a.p(r,t)},i(r){l||($(a),l=!0)},o(r){h(a),l=!1},d(r){r&&p(e),a.d(r)}}}function oe(s){let e,n,l,a,r;return n=new M({props:{name:`marker-${s[3].turn}`}}),{c(){e=w("div"),T(n.$$.fragment),this.h()},l(t){e=y(t,"DIV",{style:!0});var o=D(e);V(n.$$.fragment,o),o.forEach(p),this.h()},h(){_(e,"style",l=`grid-area: cell-${s[2].current}`)},m(t,o){N(t,e,o),j(n,e,null),r=!0},p(t,o){s=t;const u={};o&8&&(u.name=`marker-${s[3].turn}`),n.$set(u),(!r||o&4&&l!==(l=`grid-area: cell-${s[2].current}`))&&_(e,"style",l)},i(t){r||($(n.$$.fragment,t),t&&(a||Z(()=>{a=de(e,$e,{x:-s[0],duration:200,opacity:1}),a.start()})),r=!0)},o(t){h(n.$$.fragment,t),r=!1},d(t){t&&p(e),x(n)}}}function Te(s){let e,n,l,a;Z(s[5]);let r=s[1]>768&&ae(s);return{c(){r&&r.c(),e=le()},l(t){r&&r.l(t),e=le()},m(t,o){r&&r.m(t,o),N(t,e,o),n=!0,l||(a=W(window,"resize",s[5]),l=!0)},p(t,[o]){t[1]>768?r?(r.p(t,o),o&2&&$(r,1)):(r=ae(t),r.c(),$(r,1),r.m(e.parentNode,e)):r&&(J(),h(r,1,1,()=>{r=null}),K())},i(t){n||($(r),n=!0)},o(t){h(r),n=!1},d(t){t&&p(e),r&&r.d(t),l=!1,a()}}}function Ve(s,e,n){let l,a;X(s,Y,d=>n(3,a=d));let r=0;const t=L({});X(s,t,d=>n(2,l=d)),fe(()=>{t.subscribe(({current:d,previous:b})=>{if(d!==void 0&&b!==void 0){const m=document.getElementById(`board-cell-${b}`).getClientRects()[0],C=document.getElementById(`board-cell-${d}`).getClientRects()[0];n(0,r=C.x-m.x)}}),Y.subscribe(d=>{t.update(b=>b.current!==d.activeColumn?{current:d.activeColumn,previous:b.current}:b)})});let o;function u(){n(1,o=window.innerWidth)}return[r,o,l,a,t,u]}class je extends H{constructor(e){super(),F(this,e,Ve,Te,O,{})}}function ie(s,e,n){const l=s.slice();return l[4]=e[n],l[6]=n,l}function ue(s){let e,n;return e=new Se({props:{color:s[0].grid[s[6]]}}),{c(){T(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,a){j(e,l,a),n=!0},p(l,a){const r={};a&1&&(r.color=l[0].grid[l[6]]),e.$set(r)},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){h(e.$$.fragment,l),n=!1},d(l){x(e,l)}}}function ce(s){let e,n,l,a,r,t=s[0].grid[s[6]]&&ue(s);return{c(){e=w("button"),t&&t.c(),n=B(),this.h()},l(o){e=y(o,"BUTTON",{class:!0,id:!0,role:!0,tabindex:!0});var u=D(e);t&&t.l(u),n=A(u),u.forEach(p),this.h()},h(){_(e,"class","cell svelte-bmk8tj"),_(e,"id",`board-cell-${s[6]}`),_(e,"role","cell"),_(e,"tabindex","0")},m(o,u){N(o,e,u),t&&t.m(e,null),v(e,n),l=!0,a||(r=[W(e,"mouseenter",s[1](s[6])),W(e,"click",s[2](s[6]))],a=!0)},p(o,u){s=o,s[0].grid[s[6]]?t?(t.p(s,u),u&1&&$(t,1)):(t=ue(s),t.c(),$(t,1),t.m(e,n)):t&&(J(),h(t,1,1,()=>{t=null}),K())},i(o){l||($(t),l=!0)},o(o){h(t),l=!1},d(o){o&&p(e),t&&t.d(),a=!1,_e(r)}}}function xe(s){let e,n,l,a,r,t,o,u,d,b,m,C,P,S,k="Player 1's turn",E,I,re="3s",U;l=new M({props:{class:"shadow",name:"board-layer-black"}});let q=se(Array(7*6)),f=[];for(let i=0;i<q.length;i+=1)f[i]=ce(ie(s,q,i));const ve=i=>h(f[i],1,1,()=>{f[i]=null});return o=new M({props:{class:"overlay",name:"board-layer-white"}}),d=new je({}),C=new M({props:{name:"turn-background-red"}}),{c(){e=w("div"),n=w("div"),T(l.$$.fragment),a=B(),r=w("div");for(let i=0;i<f.length;i+=1)f[i].c();t=B(),T(o.$$.fragment),u=B(),T(d.$$.fragment),b=B(),m=w("div"),T(C.$$.fragment),P=B(),S=w("span"),S.textContent=k,E=B(),I=w("span"),I.textContent=re,this.h()},l(i){e=y(i,"DIV",{class:!0});var g=D(e);n=y(g,"DIV",{class:!0});var c=D(n);V(l.$$.fragment,c),a=A(c),r=y(c,"DIV",{class:!0});var R=D(r);for(let Q=0;Q<f.length;Q+=1)f[Q].l(R);R.forEach(p),t=A(c),V(o.$$.fragment,c),u=A(c),V(d.$$.fragment,c),c.forEach(p),g.forEach(p),b=A(i),m=y(i,"DIV",{class:!0});var z=D(m);V(C.$$.fragment,z),P=A(z),S=y(z,"SPAN",{"data-svelte-h":!0}),G(S)!=="svelte-kij4ef"&&(S.textContent=k),E=A(z),I=y(z,"SPAN",{"data-svelte-h":!0}),G(I)!=="svelte-1jhyk2k"&&(I.textContent=re),z.forEach(p),this.h()},h(){_(r,"class","cells svelte-bmk8tj"),_(n,"class","board-grid svelte-bmk8tj"),_(e,"class","board"),_(m,"class","display-turn svelte-bmk8tj")},m(i,g){N(i,e,g),v(e,n),j(l,n,null),v(n,a),v(n,r);for(let c=0;c<f.length;c+=1)f[c]&&f[c].m(r,null);v(n,t),j(o,n,null),v(n,u),j(d,n,null),N(i,b,g),N(i,m,g),j(C,m,null),v(m,P),v(m,S),v(m,E),v(m,I),U=!0},p(i,[g]){if(g&7){q=se(Array(7*6));let c;for(c=0;c<q.length;c+=1){const R=ie(i,q,c);f[c]?(f[c].p(R,g),$(f[c],1)):(f[c]=ce(R),f[c].c(),$(f[c],1),f[c].m(r,null))}for(J(),c=q.length;c<f.length;c+=1)ve(c);K()}},i(i){if(!U){$(l.$$.fragment,i);for(let g=0;g<q.length;g+=1)$(f[g]);$(o.$$.fragment,i),$(d.$$.fragment,i),$(C.$$.fragment,i),U=!0}},o(i){h(l.$$.fragment,i),f=f.filter(Boolean);for(let g=0;g<f.length;g+=1)h(f[g]);h(o.$$.fragment,i),h(d.$$.fragment,i),h(C.$$.fragment,i),U=!1},d(i){i&&(p(e),p(b),p(m)),x(l),Ce(f,i),x(o),x(d),x(C)}}}function Ne(s,e,n){let l;X(s,Y,o=>n(0,l=o)),fe(()=>{he()});let a;function r(o){return()=>{clearTimeout(a),a=setTimeout(()=>{Be(o)},150)}}function t(o){return()=>{Ee({indexColumn:o%7})}}return[l,r,t]}class Pe extends H{constructor(e){super(),F(this,e,Ne,xe,O,{})}}function qe(s){let e,n,l,a="Menu",r,t,o,u,d="Restart",b,m,C,P,S;return t=new M({props:{class:"logo",name:"logo"}}),m=new Pe({}),{c(){e=w("main"),n=w("div"),l=w("a"),l.textContent=a,r=B(),T(t.$$.fragment),o=B(),u=w("button"),u.textContent=d,b=B(),T(m.$$.fragment),this.h()},l(k){e=y(k,"MAIN",{class:!0});var E=D(e);n=y(E,"DIV",{class:!0});var I=D(n);l=y(I,"A",{href:!0,class:!0,"data-svelte-h":!0}),G(l)!=="svelte-axxoo7"&&(l.textContent=a),r=A(I),V(t.$$.fragment,I),o=A(I),u=y(I,"BUTTON",{class:!0,"data-svelte-h":!0}),G(u)!=="svelte-wnhnxd"&&(u.textContent=d),I.forEach(p),b=A(E),V(m.$$.fragment,E),E.forEach(p),this.h()},h(){_(l,"href",`${ke}${we("/")}`),_(l,"class","flat-button button-purple"),_(u,"class","flat-button button-purple"),_(n,"class","menu"),_(e,"class","svelte-83ofkq")},m(k,E){N(k,e,E),v(e,n),v(n,l),v(n,r),j(t,n,null),v(n,o),v(n,u),v(e,b),j(m,e,null),C=!0,P||(S=W(u,"click",s[0]),P=!0)},p:me,i(k){C||($(t.$$.fragment,k),$(m.$$.fragment,k),C=!0)},o(k){h(t.$$.fragment,k),h(m.$$.fragment,k),C=!1},d(k){k&&p(e),x(t),x(m),P=!1,S()}}}function ze(s){return[()=>{he()}]}class He extends H{constructor(e){super(),F(this,e,ze,qe,O,{})}}export{He as component};

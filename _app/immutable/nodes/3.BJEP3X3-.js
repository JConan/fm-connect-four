import{s as R,b as M,i as P,k as U,n as j,r as te,c as K,o as ue}from"../chunks/scheduler.CfH2YMek.js";import{S as W,i as F,k as V,l as H,a as $,d as h,g as D,B as le,e as w,s as B,c as S,f as I,n as v,h as _,D as L,r as E,v as G,q as J,p as A,E as ce,x as ne,y as se,z as oe,A as ae,m as q}from"../chunks/index.RMjbSyLa.js";import{b as y}from"../chunks/paths.DCAJss2W.js";import{i as N,r as fe}from"../chunks/inline-svg.action.Bwy-KVm0.js";import{w as O,d as me}from"../chunks/index.C5hTy8eg.js";import{f as re}from"../chunks/index.BGTp2OyQ.js";function Q(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function de(l){let e,n,t,a,o;return{c(){e=V("svg")},l(s){e=H(s,"svg",{}),$(e).forEach(h)},m(s,r){D(s,e,r),a||(o=M(n=N.call(null,e,`${y}/images/counter-${l[0]}-${l[1]}.svg`)),a=!0)},p(s,[r]){n&&P(n.update)&&r&3&&n.update.call(null,`${y}/images/counter-${s[0]}-${s[1]}.svg`)},i(s){s&&(t||U(()=>{t=le(e,re,{y:-1e3,duration:600}),t.start()}))},o:j,d(s){s&&h(e),a=!1,o()}}}function ge(l,e,n){let{color:t}=e,{imageSize:a}=e;return l.$$set=o=>{"color"in o&&n(0,t=o.color),"imageSize"in o&&n(1,a=o.imageSize)},[t,a]}class ve extends W{constructor(e){super(),F(this,e,ge,de,R,{color:0,imageSize:1})}}const he=Array(7*6).fill(void 0),{set:Ae,update:pe,subscribe:_e}=O(he),be={subscribe:_e};function $e(l){return new Promise(e=>{pe(n=>{const t=[...n],a=n.map((o,s)=>({value:o,column:s%7,index:s})).filter(o=>o.column===l.indexColumn&&o.value===void 0).pop();return a?(t[a.index]=l.color,e(!0),t):(e(!1),n)})})}function X(l,e,n){const t=l.slice();return t[13]=e[n],t[15]=n,t}function Y(l){let e,n;return e=new ve({props:{color:l[4][l[15]],imageSize:l[3]}}),{c(){ne(e.$$.fragment)},l(t){se(e.$$.fragment,t)},m(t,a){oe(e,t,a),n=!0},p(t,a){const o={};a&16&&(o.color=t[4][t[15]]),a&8&&(o.imageSize=t[3]),e.$set(o)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){A(e.$$.fragment,t),n=!1},d(t){ae(e,t)}}}function Z(l){let e,n,t,a,o,s=l[4][l[15]]&&Y(l);return{c(){e=w("button"),s&&s.c(),n=B(),this.h()},l(r){e=S(r,"BUTTON",{class:!0,id:!0,role:!0,tabindex:!0});var m=$(e);s&&s.l(m),n=I(m),m.forEach(h),this.h()},h(){v(e,"class","cell svelte-k362so"),v(e,"id",`board-cell-${l[15]}`),v(e,"role","cell"),v(e,"tabindex","0")},m(r,m){D(r,e,m),s&&s.m(e,null),_(e,n),t=!0,a||(o=[L(e,"mouseenter",l[7](l[15])),L(e,"click",l[8](l[15]))],a=!0)},p(r,m){l=r,l[4][l[15]]?s?(s.p(l,m),m&16&&E(s,1)):(s=Y(l),s.c(),E(s,1),s.m(e,n)):s&&(G(),A(s,1,1,()=>{s=null}),J())},i(r){t||(E(s),t=!0)},o(r){A(s),t=!1},d(r){r&&h(e),s&&s.d(),a=!1,te(o)}}}function x(l){let e,n=l[5].column,t=ee(l);return{c(){e=w("div"),t.c(),this.h()},l(a){e=S(a,"DIV",{class:!0});var o=$(e);t.l(o),o.forEach(h),this.h()},h(){v(e,"class","board-cursor")},m(a,o){D(a,e,o),t.m(e,null)},p(a,o){o&32&&R(n,n=a[5].column)?(G(),A(t,1,1,j),J(),t=ee(a),t.c(),E(t,1),t.m(e,null)):t.p(a,o)},d(a){a&&h(e),t.d(a)}}}function ee(l){let e,n,t,a,o,s;return{c(){e=V("svg"),this.h()},l(r){e=H(r,"svg",{style:!0}),$(e).forEach(h),this.h()},h(){v(e,"style",n=`grid-area: cell-${l[5].column}`)},m(r,m){D(r,e,m),o||(s=M(t=N.call(null,e,`${y}/images/marker-${l[2]}.svg`)),o=!0)},p(r,m){l=r,m&32&&n!==(n=`grid-area: cell-${l[5].column}`)&&v(e,"style",n),t&&P(t.update)&&m&4&&t.update.call(null,`${y}/images/marker-${l[2]}.svg`)},i(r){r&&(a||U(()=>{a=le(e,re,{x:-l[1],duration:ie,opacity:1}),a.start()}))},o:j,d(r){r&&h(e),o=!1,s()}}}function ye(l){let e,n,t,a,o,s,r,m,k,C,p,z;U(l[9]);let g=Q(Array(7*6)),d=[];for(let i=0;i<g.length;i+=1)d[i]=Z(X(l,g,i));const T=i=>A(d[i],1,1,()=>{d[i]=null});let f=l[0]>768&&x(l);return{c(){e=w("div"),n=V("svg"),a=B(),o=w("div");for(let i=0;i<d.length;i+=1)d[i].c();s=B(),r=V("svg"),k=B(),f&&f.c(),this.h()},l(i){e=S(i,"DIV",{class:!0});var u=$(e);n=H(u,"svg",{class:!0}),$(n).forEach(h),a=I(u),o=S(u,"DIV",{class:!0});var c=$(o);for(let b=0;b<d.length;b+=1)d[b].l(c);c.forEach(h),s=I(u),r=H(u,"svg",{class:!0}),$(r).forEach(h),k=I(u),f&&f.l(u),u.forEach(h),this.h()},h(){v(n,"class","shadow svelte-k362so"),v(o,"class","cells svelte-k362so"),v(r,"class","overlay svelte-k362so"),v(e,"class","board svelte-k362so")},m(i,u){D(i,e,u),_(e,n),_(e,a),_(e,o);for(let c=0;c<d.length;c+=1)d[c]&&d[c].m(o,null);_(e,s),_(e,r),_(e,k),f&&f.m(e,null),C=!0,p||(z=[L(window,"resize",l[9]),M(t=N.call(null,n,`${y}/images/board-layer-black-${l[3]}.svg`)),M(m=N.call(null,r,`${y}/images/board-layer-white-${l[3]}.svg`))],p=!0)},p(i,[u]){if(t&&P(t.update)&&u&8&&t.update.call(null,`${y}/images/board-layer-black-${i[3]}.svg`),u&408){g=Q(Array(7*6));let c;for(c=0;c<g.length;c+=1){const b=X(i,g,c);d[c]?(d[c].p(b,u),E(d[c],1)):(d[c]=Z(b),d[c].c(),E(d[c],1),d[c].m(o,null))}for(G(),c=g.length;c<d.length;c+=1)T(c);J()}m&&P(m.update)&&u&8&&m.update.call(null,`${y}/images/board-layer-white-${i[3]}.svg`),i[0]>768?f?f.p(i,u):(f=x(i),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},i(i){if(!C){for(let u=0;u<g.length;u+=1)E(d[u]);C=!0}},o(i){d=d.filter(Boolean);for(let u=0;u<d.length;u+=1)A(d[u]);C=!1},d(i){i&&h(e),ce(d,i),f&&f.d(),p=!1,te(z)}}}let ie=200;function Ce(l,e,n){let t,a;K(l,be,f=>n(4,t=f));const o=O(0),s=O(0);let r=0;const m=me([o,s],([f,i])=>({column:f,prevColumn:i}));K(l,m,f=>n(5,a=f)),ue(()=>{m.subscribe(({column:f,prevColumn:i})=>{const u=document.getElementById(`board-cell-${i}`).getClientRects()[0],c=document.getElementById(`board-cell-${f}`).getClientRects()[0];n(1,r=c.x-u.x)})});let k;function C(f){return()=>{clearTimeout(k),k=setTimeout(()=>{o.update(i=>(s.set(i),f%7))},ie*.75)}}let p="red";function z(f){return async i=>{await $e({indexColumn:f%7,color:p})&&n(2,p=p==="red"?"yellow":"red")}}let g,d="large";function T(){n(0,g=window.innerWidth)}return l.$$.update=()=>{l.$$.dirty&1&&n(3,d=g<640?"small":"large"),l.$$.dirty&1&&console.log({innerWidth:g})},[g,r,p,d,t,a,m,C,z,T]}class ke extends W{constructor(e){super(),F(this,e,Ce,ye,R,{})}}function we(l){let e,n,t,a="Menu",o,s,r,m,k="Restart",C,p,z,g,d=`<img src="${`${y}/images/turn-background-red.svg`}" alt="display turn"/> <span>Player 1&#39;s turn</span> <span>3s</span>`,T,f,i;return p=new ke({}),{c(){e=w("main"),n=w("div"),t=w("a"),t.textContent=a,o=B(),s=V("svg"),r=B(),m=w("button"),m.textContent=k,C=B(),ne(p.$$.fragment),z=B(),g=w("div"),g.innerHTML=d,this.h()},l(u){e=S(u,"MAIN",{class:!0});var c=$(e);n=S(c,"DIV",{class:!0});var b=$(n);t=S(b,"A",{href:!0,class:!0,"data-svelte-h":!0}),q(t)!=="svelte-axxoo7"&&(t.textContent=a),o=I(b),s=H(b,"svg",{class:!0}),$(s).forEach(h),r=I(b),m=S(b,"BUTTON",{class:!0,"data-svelte-h":!0}),q(m)!=="svelte-13ytn0j"&&(m.textContent=k),b.forEach(h),C=I(c),se(p.$$.fragment,c),z=I(c),g=S(c,"DIV",{class:!0,"data-svelte-h":!0}),q(g)!=="svelte-1jr5cua"&&(g.innerHTML=d),c.forEach(h),this.h()},h(){v(t,"href",`${y}${fe("/")}`),v(t,"class","flat-button button-purple"),v(s,"class","logo"),v(m,"class","flat-button button-purple"),v(n,"class","menu"),v(g,"class","display-turn svelte-1mfabyv"),v(e,"class","svelte-1mfabyv")},m(u,c){D(u,e,c),_(e,n),_(n,t),_(n,o),_(n,s),_(n,r),_(n,m),_(e,C),oe(p,e,null),_(e,z),_(e,g),T=!0,f||(i=M(N.call(null,s,`${y}/images/logo.svg`)),f=!0)},p:j,i(u){T||(E(p.$$.fragment,u),T=!0)},o(u){A(p.$$.fragment,u),T=!1},d(u){u&&h(e),ae(p),f=!1,i()}}}class De extends W{constructor(e){super(),F(this,e,null,we,R,{})}}export{De as component};

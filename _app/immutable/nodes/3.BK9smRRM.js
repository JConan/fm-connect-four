import{s as Q,b as H,c as M,o as ce,n as re,D as ae,E as le,r as Ee,j as De}from"../chunks/scheduler.BDrQ4VOq.js";import{S as J,i as K,e as C,k as V,c as k,a as B,l as O,d as v,g as z,o as U,p as w,B as te,q as T,C as Ae,r as j,w as ge,v as q,z as oe,x as ue,n as _,s as S,t as x,f as P,b as ee,D as $e,h as g,j as ve,E as Ne,m as W}from"../chunks/index.CGzSR7g1.js";import{d as Ve,w as X,g as Oe}from"../chunks/entry.CY1Bg7M9.js";import{f as se,a as Ie}from"../chunks/index.CQ7-t1xP.js";import{I as F,r as Ue}from"../chunks/Image.BslYnONC.js";import{b as je}from"../chunks/paths.67ADtXkY.js";import{p as ze}from"../chunks/stores.Ckj2IgyA.js";function he(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}const Te=Array(7*6).fill(void 0),Se="red",fe=X(Se),de=X(Te),me=X(0),Pe=X(0),Me=X(),L=X(!1),ne=Ve([de,fe,me],([t,e,n])=>({grid:t,turn:e,activeColumn:n}));function Ge(t){return new Promise(e=>{de.update(n=>{const s=[...n],l=n.map((a,r)=>({value:a,column:r%7,index:r})).filter(a=>a.column===t.indexColumn&&a.value===void 0).pop();return l?(fe.update(a=>(s[l.index]=a,a==="red"?"yellow":"red")),e(!0),s):(e(!1),n)})})}function Be(){de.set(Te),fe.set(Se),me.set(0),Pe.update(t=>t+1)}function Re(t){me.set(t%7)}function qe(t){let e,n,s,l,a;return n=new F({props:{name:`counter-${t[0]}`}}),{c(){e=C("div"),V(n.$$.fragment)},l(r){e=k(r,"DIV",{});var u=B(e);O(n.$$.fragment,u),u.forEach(v)},m(r,u){z(r,e,u),U(n,e,null),a=!0},p(r,[u]){const i={};u&1&&(i.name=`counter-${r[0]}`),n.$set(i)},i(r){a||(w(n.$$.fragment,r),r&&H(()=>{a&&(l&&l.end(1),s=te(e,se,{y:-1e3,duration:600}),s.start())}),a=!0)},o(r){T(n.$$.fragment,r),s&&s.invalidate(),r&&(l=Ae(e,Ie,{})),a=!1},d(r){r&&v(e),j(n),r&&l&&l.end()}}}function Le(t,e,n){let{color:s}=e;return t.$$set=l=>{"color"in l&&n(0,s=l.color)},[s]}class Qe extends J{constructor(e){super(),K(this,e,Le,qe,Q,{color:0})}}function _e(t){let e,n=t[2].current,s,l=be(t);return{c(){e=C("div"),l.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var r=B(e);l.l(r),r.forEach(v),this.h()},h(){_(e,"class","board-cursor svelte-7k3e")},m(a,r){z(a,e,r),l.m(e,null),s=!0},p(a,r){r&4&&Q(n,n=a[2].current)?(oe(),T(l,1,1,re),ue(),l=be(a),l.c(),w(l,1),l.m(e,null)):l.p(a,r)},i(a){s||(w(l),s=!0)},o(a){T(l),s=!1},d(a){a&&v(e),l.d(a)}}}function be(t){let e,n,s,l,a;return n=new F({props:{name:`marker-${t[3].turn}`}}),{c(){e=C("div"),V(n.$$.fragment),this.h()},l(r){e=k(r,"DIV",{style:!0});var u=B(e);O(n.$$.fragment,u),u.forEach(v),this.h()},h(){_(e,"style",s=`grid-area: cell-${t[2].current}`)},m(r,u){z(r,e,u),U(n,e,null),a=!0},p(r,u){t=r;const i={};u&8&&(i.name=`marker-${t[3].turn}`),n.$set(i),(!a||u&4&&s!==(s=`grid-area: cell-${t[2].current}`))&&_(e,"style",s)},i(r){a||(w(n.$$.fragment,r),r&&(l||H(()=>{l=te(e,se,{x:-t[0],duration:200,opacity:1}),l.start()})),a=!0)},o(r){T(n.$$.fragment,r),a=!1},d(r){r&&v(e),j(n)}}}function We(t){let e,n,s,l;H(t[5]);let a=t[1]>1079&&_e(t);return{c(){a&&a.c(),e=ge()},l(r){a&&a.l(r),e=ge()},m(r,u){a&&a.m(r,u),z(r,e,u),n=!0,s||(l=q(window,"resize",t[5]),s=!0)},p(r,[u]){r[1]>1079?a?(a.p(r,u),u&2&&w(a,1)):(a=_e(r),a.c(),w(a,1),a.m(e.parentNode,e)):a&&(oe(),T(a,1,1,()=>{a=null}),ue())},i(r){n||(w(a),n=!0)},o(r){T(a),n=!1},d(r){r&&v(e),a&&a.d(r),s=!1,l()}}}function He(t,e,n){let s,l;M(t,ne,c=>n(3,l=c));let a=0;const r=X({});M(t,r,c=>n(2,s=c)),ce(()=>{r.subscribe(({current:c,previous:o})=>{if(c!==void 0&&o!==void 0){const d=document.getElementById(`board-cell-${o}`).getClientRects()[0],D=document.getElementById(`board-cell-${c}`).getClientRects()[0];n(0,a=D.x-d.x)}}),ne.subscribe(c=>{r.update(o=>o.current!==c.activeColumn?{current:c.activeColumn,previous:o.current}:o)})});let u;function i(){n(1,u=window.innerWidth)}return[a,u,s,l,r,i]}class Fe extends J{constructor(e){super(),K(this,e,He,We,Q,{})}}function Je(t){let e,n,s,l,a,r,u,i,c,o,d,D,h;return n=new F({props:{name:`turn-background-${t[0].turn}`}}),{c(){e=C("div"),V(n.$$.fragment),s=S(),l=C("span"),a=x(t[2]),r=x(" turn"),u=S(),i=C("span"),c=x(t[1]),o=x("s"),this.h()},l(f){e=k(f,"DIV",{class:!0});var $=B(e);O(n.$$.fragment,$),s=P($),l=k($,"SPAN",{});var y=B(l);a=ee(y,t[2]),r=ee(y," turn"),y.forEach(v),u=P($),i=k($,"SPAN",{});var A=B(i);c=ee(A,t[1]),o=ee(A,"s"),A.forEach(v),$.forEach(v),this.h()},h(){$e(i,"pause",t[3]),_(e,"class",d=ae(`display-turn ${t[0].turn}`)+" svelte-1p2h0dk")},m(f,$){z(f,e,$),U(n,e,null),g(e,s),g(e,l),g(l,a),g(l,r),g(e,u),g(e,i),g(i,c),g(i,o),h=!0},p(f,[$]){const y={};$&1&&(y.name=`turn-background-${f[0].turn}`),n.$set(y),(!h||$&4)&&ve(a,f[2]),(!h||$&2)&&ve(c,f[1]),(!h||$&8)&&$e(i,"pause",f[3]),(!h||$&1&&d!==(d=ae(`display-turn ${f[0].turn}`)+" svelte-1p2h0dk"))&&_(e,"class",d)},i(f){h||(w(n.$$.fragment,f),f&&(D||H(()=>{D=te(e,se,{delay:1e3,y:300}),D.start()})),h=!0)},o(f){T(n.$$.fragment,f),h=!1},d(f){f&&v(e),j(n)}}}function Ke(t,e,n){let s,l,a,r;M(t,L,o=>n(3,l=o)),M(t,ne,o=>n(0,a=o)),M(t,Pe,o=>n(5,r=o));let u="red",i=30;function c(o){n(1,i=30),o&&(le(L,l=!0,l),setTimeout(()=>{le(L,l=!1,l)},o))}return ce(()=>{c(3e3);const o=setInterval(()=>{l||n(1,i=i-1)},1e3);return()=>{clearInterval(o)}}),t.$$.update=()=>{t.$$.dirty&32&&r&&(n(4,u="red"),c(1e3)),t.$$.dirty&17&&a.turn!==u&&(n(4,u=a.turn),c(1e3)),t.$$.dirty&16&&n(2,s=u==="red"?"Player 1's":"Player 2's")},[a,i,s,l,u,r]}class Xe extends J{constructor(e){super(),K(this,e,Ke,Je,Q,{})}}function ye(t,e,n){const s=t.slice();return s[6]=e[n],s[8]=n,s}function Ce(t){let e,n;return e=new Qe({props:{color:t[0].grid[t[8]]}}),{c(){V(e.$$.fragment)},l(s){O(e.$$.fragment,s)},m(s,l){U(e,s,l),n=!0},p(s,l){const a={};l&1&&(a.color=s[0].grid[s[8]]),e.$set(a)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){T(e.$$.fragment,s),n=!1},d(s){j(e,s)}}}function ke(t){let e,n,s,l,a,r=t[0].grid[t[8]]&&Ce(t);return{c(){e=C("button"),r&&r.c(),n=S(),this.h()},l(u){e=k(u,"BUTTON",{class:!0,id:!0,role:!0,tabindex:!0});var i=B(e);r&&r.l(i),n=P(i),i.forEach(v),this.h()},h(){_(e,"class","cell svelte-1rn172u"),_(e,"id",`board-cell-${t[8]}`),_(e,"role","cell"),_(e,"tabindex","0")},m(u,i){z(u,e,i),r&&r.m(e,null),g(e,n),s=!0,l||(a=[q(e,"mouseenter",t[2](t[8])),q(e,"click",t[3](t[8]))],l=!0)},p(u,i){t=u,t[0].grid[t[8]]?r?(r.p(t,i),i&1&&w(r,1)):(r=Ce(t),r.c(),w(r,1),r.m(e,n)):r&&(oe(),T(r,1,1,()=>{r=null}),ue())},i(u){s||(w(r),s=!0)},o(u){T(r),s=!1},d(u){u&&v(e),r&&r.d(),l=!1,Ee(a)}}}function Ye(t){let e,n,s,l,a,r,u,i,c,o,d,D,h,f,$,y,A,Y,R;l=new F({props:{class:"shadow",name:"board-layer-black"}});let N=he(Array(7*6)),b=[];for(let m=0;m<N.length;m+=1)b[m]=ke(ye(t,N,m));const Z=m=>T(b[m],1,1,()=>{b[m]=null});return i=new F({props:{class:"overlay",name:"board-layer-white"}}),d=new Fe({}),f=new Xe({}),{c(){e=C("div"),n=C("div"),s=C("div"),V(l.$$.fragment),a=S(),r=C("div");for(let m=0;m<b.length;m+=1)b[m].c();u=S(),V(i.$$.fragment),c=S(),o=C("div"),V(d.$$.fragment),h=S(),V(f.$$.fragment),$=S(),y=C("div"),this.h()},l(m){e=k(m,"DIV",{class:!0});var E=B(e);n=k(E,"DIV",{class:!0});var p=B(n);s=k(p,"DIV",{class:!0});var I=B(s);O(l.$$.fragment,I),a=P(I),r=k(I,"DIV",{class:!0});var G=B(r);for(let ie=0;ie<b.length;ie+=1)b[ie].l(G);G.forEach(v),u=P(I),O(i.$$.fragment,I),c=P(I),o=k(I,"DIV",{});var pe=B(o);O(d.$$.fragment,pe),pe.forEach(v),I.forEach(v),p.forEach(v),h=P(E),O(f.$$.fragment,E),$=P(E),y=k(E,"DIV",{class:!0,style:!0}),B(y).forEach(v),E.forEach(v),this.h()},h(){_(r,"class","cells svelte-1rn172u"),_(s,"class","board-grid svelte-1rn172u"),_(n,"class","board"),_(y,"class","game-status-background svelte-1rn172u"),_(y,"style",A=`background-color: var(--${t[1]?t[1]:"dark-purple"})`),_(e,"class","board-container svelte-1rn172u")},m(m,E){z(m,e,E),g(e,n),g(n,s),U(l,s,null),g(s,a),g(s,r);for(let p=0;p<b.length;p+=1)b[p]&&b[p].m(r,null);g(s,u),U(i,s,null),g(s,c),g(s,o),U(d,o,null),g(e,h),U(f,e,null),g(e,$),g(e,y),R=!0},p(m,[E]){if(E&13){N=he(Array(7*6));let p;for(p=0;p<N.length;p+=1){const I=ye(m,N,p);b[p]?(b[p].p(I,E),w(b[p],1)):(b[p]=ke(I),b[p].c(),w(b[p],1),b[p].m(r,null))}for(oe(),p=N.length;p<b.length;p+=1)Z(p);ue()}(!R||E&2&&A!==(A=`background-color: var(--${m[1]?m[1]:"dark-purple"})`))&&_(y,"style",A)},i(m){if(!R){w(l.$$.fragment,m);for(let E=0;E<N.length;E+=1)w(b[E]);w(i.$$.fragment,m),w(d.$$.fragment,m),m&&(D||H(()=>{D=te(o,Ie,{delay:1e3}),D.start()})),w(f.$$.fragment,m),m&&(Y||H(()=>{Y=te(y,se,{delay:1e3,y:300}),Y.start()})),R=!0}},o(m){T(l.$$.fragment,m),b=b.filter(Boolean);for(let E=0;E<b.length;E+=1)T(b[E]);T(i.$$.fragment,m),T(d.$$.fragment,m),T(f.$$.fragment,m),R=!1},d(m){m&&v(e),j(l),Ne(b,m),j(i),j(d),j(f)}}}function Ze(t,e,n){let s,l,a;M(t,L,c=>n(5,s=c)),M(t,ne,c=>n(0,l=c)),M(t,Me,c=>n(1,a=c)),ce(()=>{Be()});let r;function u(c){return()=>{clearTimeout(r),s||(r=setTimeout(()=>{Re(c)},150))}}function i(c){return()=>{s||Ge({indexColumn:c%7})}}return[l,a,u,i]}class xe extends J{constructor(e){super(),K(this,e,Ze,Ye,Q,{})}}function et(t){let e,n,s="Menu",l,a,r,u,i="Restart",c,o,d,D="PAUSE",h,f,$="Continue game",y,A,Y="Restart",R,N,b="Quit Game",Z,m,E;return a=new F({props:{class:"logo",name:"logo"}}),{c(){e=C("div"),n=C("button"),n.textContent=s,l=S(),V(a.$$.fragment),r=S(),u=C("button"),u.textContent=i,c=S(),o=C("dialog"),d=C("span"),d.textContent=D,h=S(),f=C("button"),f.textContent=$,y=S(),A=C("button"),A.textContent=Y,R=S(),N=C("button"),N.textContent=b,this.h()},l(p){e=k(p,"DIV",{class:!0});var I=B(e);n=k(I,"BUTTON",{class:!0,"data-svelte-h":!0}),W(n)!=="svelte-jmehzd"&&(n.textContent=s),l=P(I),O(a.$$.fragment,I),r=P(I),u=k(I,"BUTTON",{class:!0,"data-svelte-h":!0}),W(u)!=="svelte-j25n9j"&&(u.textContent=i),I.forEach(v),c=P(p),o=k(p,"DIALOG",{class:!0});var G=B(o);d=k(G,"SPAN",{"data-svelte-h":!0}),W(d)!=="svelte-16naano"&&(d.textContent=D),h=P(G),f=k(G,"BUTTON",{class:!0,"data-svelte-h":!0}),W(f)!=="svelte-vst0ui"&&(f.textContent=$),y=P(G),A=k(G,"BUTTON",{class:!0,"data-svelte-h":!0}),W(A)!=="svelte-15pdyjx"&&(A.textContent=Y),R=P(G),N=k(G,"BUTTON",{class:!0,"data-svelte-h":!0}),W(N)!=="svelte-1xzbx5t"&&(N.textContent=b),G.forEach(v),this.h()},h(){_(n,"class","flat-button button-purple"),_(u,"class","flat-button button-purple"),_(e,"class","menu svelte-6c595u"),_(f,"class","text-button raised-button button-white"),_(A,"class","text-button raised-button button-white"),_(N,"class","text-button raised-button button-red"),_(o,"class","svelte-6c595u")},m(p,I){z(p,e,I),g(e,n),g(e,l),U(a,e,null),g(e,r),g(e,u),z(p,c,I),z(p,o,I),g(o,d),g(o,h),g(o,f),g(o,y),g(o,A),g(o,R),g(o,N),t[5](o),Z=!0,m||(E=[q(n,"click",t[1]),q(u,"click",t[3]),q(f,"click",t[2]),q(A,"click",t[3]),q(N,"click",t[4])],m=!0)},p:re,i(p){Z||(w(a.$$.fragment,p),Z=!0)},o(p){T(a.$$.fragment,p),Z=!1},d(p){p&&(v(e),v(c),v(o)),j(a),t[5](null),m=!1,Ee(E)}}}function tt(t,e,n){let s;M(t,L,o=>n(6,s=o));let l;const a=()=>{l.showModal(),le(L,s=!0,s)},r=()=>{l.close(),le(L,s=!1,s)},u=()=>{Be(),r()},i=()=>{r(),Oe(`${je}${Ue("/")}`)};function c(o){De[o?"unshift":"push"](()=>{l=o,n(0,l)})}return[l,a,r,u,i,c]}class nt extends J{constructor(e){super(),K(this,e,tt,et,Q,{})}}function rt(t){let e;return{c(){e=x(t[4])},l(n){e=ee(n,t[4])},m(n,s){z(n,e,s)},p:re,d(n){n&&v(e)}}}function st(t){let e;return{c(){e=x(t[3])},l(n){e=ee(n,t[3])},m(n,s){z(n,e,s)},p:re,d(n){n&&v(e)}}}function at(t){let e,n,s,l,a,r,u="12",i,c,o;n=new F({props:{class:`${!t[1]&&t[0]===t[2].turn?"active":""} icon ${t[0]}`,name:t[0]==="red"?t[5]:t[6]}});function d(f,$){return f[0]==="red"?st:rt}let D=d(t),h=D(t);return{c(){e=C("div"),V(n.$$.fragment),s=S(),l=C("span"),h.c(),a=S(),r=C("span"),r.textContent=u,this.h()},l(f){e=k(f,"DIV",{class:!0});var $=B(e);O(n.$$.fragment,$),s=P($),l=k($,"SPAN",{class:!0});var y=B(l);h.l(y),y.forEach(v),a=P($),r=k($,"SPAN",{class:!0,"data-svelte-h":!0}),W(r)!=="svelte-dbx7z1"&&(r.textContent=u),$.forEach(v),this.h()},h(){_(l,"class","svelte-1cek1mm"),_(r,"class","svelte-1cek1mm"),_(e,"class",i=ae(`score-board ${t[0]}`)+" svelte-1cek1mm")},m(f,$){z(f,e,$),U(n,e,null),g(e,s),g(e,l),h.m(l,null),g(e,a),g(e,r),o=!0},p(f,[$]){t=f;const y={};$&7&&(y.class=`${!t[1]&&t[0]===t[2].turn?"active":""} icon ${t[0]}`),$&1&&(y.name=t[0]==="red"?t[5]:t[6]),n.$set(y),D===(D=d(t))&&h?h.p(t,$):(h.d(1),h=D(t),h&&(h.c(),h.m(l,null))),(!o||$&1&&i!==(i=ae(`score-board ${t[0]}`)+" svelte-1cek1mm"))&&_(e,"class",i)},i(f){o||(w(n.$$.fragment,f),f&&(c||H(()=>{c=te(e,se,{x:300*(t[0]==="red"?-1:1),delay:1e3}),c.start()})),o=!0)},o(f){T(n.$$.fragment,f),o=!1},d(f){f&&v(e),j(n),h.d()}}}function lt(t,e,n){let s,l,a;M(t,ze,d=>n(7,s=d)),M(t,L,d=>n(1,l=d)),M(t,ne,d=>n(2,a=d));let{player:r}=e;const u=s.params.mode==="vs-player"?"player 1":"you",i=s.params.mode==="vs-player"?"player 2":"cpu",c=s.params.mode==="vs-player"?"player-one":"you",o=s.params.mode==="vs-player"?"player-two":"cpu";return t.$$set=d=>{"player"in d&&n(0,r=d.player)},[r,l,a,u,i,c,o]}class we extends J{constructor(e){super(),K(this,e,lt,at,Q,{player:0})}}function ot(t){let e,n,s,l,a,r,u,i,c;return n=new nt({}),l=new we({props:{player:"red"}}),r=new we({props:{player:"yellow"}}),i=new xe({}),{c(){e=C("main"),V(n.$$.fragment),s=S(),V(l.$$.fragment),a=S(),V(r.$$.fragment),u=S(),V(i.$$.fragment),this.h()},l(o){e=k(o,"MAIN",{class:!0});var d=B(e);O(n.$$.fragment,d),s=P(d),O(l.$$.fragment,d),a=P(d),O(r.$$.fragment,d),u=P(d),O(i.$$.fragment,d),d.forEach(v),this.h()},h(){_(e,"class","svelte-1a8y0ai")},m(o,d){z(o,e,d),U(n,e,null),g(e,s),U(l,e,null),g(e,a),U(r,e,null),g(e,u),U(i,e,null),c=!0},p:re,i(o){c||(w(n.$$.fragment,o),w(l.$$.fragment,o),w(r.$$.fragment,o),w(i.$$.fragment,o),c=!0)},o(o){T(n.$$.fragment,o),T(l.$$.fragment,o),T(r.$$.fragment,o),T(i.$$.fragment,o),c=!1},d(o){o&&v(e),j(n),j(l),j(r),j(i)}}}class gt extends J{constructor(e){super(),K(this,e,null,ot,Q,{})}}export{gt as component};

import{s as Q,b as H,c as G,o as ie,n as ce,D as se,E as le,r as Ee,j as De}from"../chunks/scheduler.BDrQ4VOq.js";import{S as J,i as K,e as C,k as V,c as k,a as B,l as O,d as h,g as z,o as U,p as w,B as te,q as P,C as Ae,r as j,w as ge,v as q,z as ae,x as oe,n as v,s as S,t as x,f as T,b as ee,D as $e,h as p,j as he,E as Ne,m as W}from"../chunks/index.CGzSR7g1.js";import{d as Ve,w as X,g as Oe}from"../chunks/entry.DBk0Qesc.js";import{f as re,a as Ie}from"../chunks/index.CQ7-t1xP.js";import{I as F,r as Ue}from"../chunks/Image.C00Aywnu.js";import{b as je}from"../chunks/paths.BdweF78n.js";function ve(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}const Pe=Array(7*6).fill(void 0),Se="red",fe=X(Se),de=X(Pe),me=X(0),Te=X(0),ze=X(),L=X(!1),ne=Ve([de,fe,me],([r,e,n])=>({grid:r,turn:e,activeColumn:n}));function Me(r){return new Promise(e=>{de.update(n=>{const l=[...n],a=n.map((s,t)=>({value:s,column:t%7,index:t})).filter(s=>s.column===r.indexColumn&&s.value===void 0).pop();return a?(fe.update(s=>(l[a.index]=s,s==="red"?"yellow":"red")),e(!0),l):(e(!1),n)})})}function Be(){de.set(Pe),fe.set(Se),me.set(0),Te.update(r=>r+1)}function Ge(r){me.set(r%7)}function Re(r){let e,n,l,a,s;return n=new F({props:{name:`counter-${r[0]}`}}),{c(){e=C("div"),V(n.$$.fragment)},l(t){e=k(t,"DIV",{});var u=B(e);O(n.$$.fragment,u),u.forEach(h)},m(t,u){z(t,e,u),U(n,e,null),s=!0},p(t,[u]){const i={};u&1&&(i.name=`counter-${t[0]}`),n.$set(i)},i(t){s||(w(n.$$.fragment,t),t&&H(()=>{s&&(a&&a.end(1),l=te(e,re,{y:-1e3,duration:600}),l.start())}),s=!0)},o(t){P(n.$$.fragment,t),l&&l.invalidate(),t&&(a=Ae(e,Ie,{})),s=!1},d(t){t&&h(e),j(n),t&&a&&a.end()}}}function qe(r,e,n){let{color:l}=e;return r.$$set=a=>{"color"in a&&n(0,l=a.color)},[l]}class Le extends J{constructor(e){super(),K(this,e,qe,Re,Q,{color:0})}}function _e(r){let e,n=r[2].current,l,a=be(r);return{c(){e=C("div"),a.c(),this.h()},l(s){e=k(s,"DIV",{class:!0});var t=B(e);a.l(t),t.forEach(h),this.h()},h(){v(e,"class","board-cursor svelte-7k3e")},m(s,t){z(s,e,t),a.m(e,null),l=!0},p(s,t){t&4&&Q(n,n=s[2].current)?(ae(),P(a,1,1,ce),oe(),a=be(s),a.c(),w(a,1),a.m(e,null)):a.p(s,t)},i(s){l||(w(a),l=!0)},o(s){P(a),l=!1},d(s){s&&h(e),a.d(s)}}}function be(r){let e,n,l,a,s;return n=new F({props:{name:`marker-${r[3].turn}`}}),{c(){e=C("div"),V(n.$$.fragment),this.h()},l(t){e=k(t,"DIV",{style:!0});var u=B(e);O(n.$$.fragment,u),u.forEach(h),this.h()},h(){v(e,"style",l=`grid-area: cell-${r[2].current}`)},m(t,u){z(t,e,u),U(n,e,null),s=!0},p(t,u){r=t;const i={};u&8&&(i.name=`marker-${r[3].turn}`),n.$set(i),(!s||u&4&&l!==(l=`grid-area: cell-${r[2].current}`))&&v(e,"style",l)},i(t){s||(w(n.$$.fragment,t),t&&(a||H(()=>{a=te(e,re,{x:-r[0],duration:200,opacity:1}),a.start()})),s=!0)},o(t){P(n.$$.fragment,t),s=!1},d(t){t&&h(e),j(n)}}}function Qe(r){let e,n,l,a;H(r[5]);let s=r[1]>1079&&_e(r);return{c(){s&&s.c(),e=ge()},l(t){s&&s.l(t),e=ge()},m(t,u){s&&s.m(t,u),z(t,e,u),n=!0,l||(a=q(window,"resize",r[5]),l=!0)},p(t,[u]){t[1]>1079?s?(s.p(t,u),u&2&&w(s,1)):(s=_e(t),s.c(),w(s,1),s.m(e.parentNode,e)):s&&(ae(),P(s,1,1,()=>{s=null}),oe())},i(t){n||(w(s),n=!0)},o(t){P(s),n=!1},d(t){t&&h(e),s&&s.d(t),l=!1,a()}}}function We(r,e,n){let l,a;G(r,ne,c=>n(3,a=c));let s=0;const t=X({});G(r,t,c=>n(2,l=c)),ie(()=>{t.subscribe(({current:c,previous:o})=>{if(c!==void 0&&o!==void 0){const g=document.getElementById(`board-cell-${o}`).getClientRects()[0],D=document.getElementById(`board-cell-${c}`).getClientRects()[0];n(0,s=D.x-g.x)}}),ne.subscribe(c=>{t.update(o=>o.current!==c.activeColumn?{current:c.activeColumn,previous:o.current}:o)})});let u;function i(){n(1,u=window.innerWidth)}return[s,u,l,a,t,i]}class He extends J{constructor(e){super(),K(this,e,We,Qe,Q,{})}}function Fe(r){let e,n,l,a,s,t,u,i,c,o,g,D,b;return n=new F({props:{name:`turn-background-${r[0].turn}`}}),{c(){e=C("div"),V(n.$$.fragment),l=S(),a=C("span"),s=x(r[2]),t=x(" turn"),u=S(),i=C("span"),c=x(r[1]),o=x("s"),this.h()},l(f){e=k(f,"DIV",{class:!0});var $=B(e);O(n.$$.fragment,$),l=T($),a=k($,"SPAN",{});var y=B(a);s=ee(y,r[2]),t=ee(y," turn"),y.forEach(h),u=T($),i=k($,"SPAN",{});var A=B(i);c=ee(A,r[1]),o=ee(A,"s"),A.forEach(h),$.forEach(h),this.h()},h(){$e(i,"pause",r[3]),v(e,"class",g=se(`display-turn ${r[0].turn}`)+" svelte-1p2h0dk")},m(f,$){z(f,e,$),U(n,e,null),p(e,l),p(e,a),p(a,s),p(a,t),p(e,u),p(e,i),p(i,c),p(i,o),b=!0},p(f,[$]){const y={};$&1&&(y.name=`turn-background-${f[0].turn}`),n.$set(y),(!b||$&4)&&he(s,f[2]),(!b||$&2)&&he(c,f[1]),(!b||$&8)&&$e(i,"pause",f[3]),(!b||$&1&&g!==(g=se(`display-turn ${f[0].turn}`)+" svelte-1p2h0dk"))&&v(e,"class",g)},i(f){b||(w(n.$$.fragment,f),f&&(D||H(()=>{D=te(e,re,{delay:1e3,y:300}),D.start()})),b=!0)},o(f){P(n.$$.fragment,f),b=!1},d(f){f&&h(e),j(n)}}}function Je(r,e,n){let l,a,s,t;G(r,L,o=>n(3,a=o)),G(r,ne,o=>n(0,s=o)),G(r,Te,o=>n(5,t=o));let u="red",i=30;function c(o){n(1,i=30),o&&(le(L,a=!0,a),setTimeout(()=>{le(L,a=!1,a)},o))}return ie(()=>{c(3e3);const o=setInterval(()=>{a||n(1,i=i-1)},1e3);return()=>{clearInterval(o)}}),r.$$.update=()=>{r.$$.dirty&32&&t&&(n(4,u="red"),c(1e3)),r.$$.dirty&17&&s.turn!==u&&(n(4,u=s.turn),c(1e3)),r.$$.dirty&16&&n(2,l=u==="red"?"Player 1's":"Player 2's")},[s,i,l,a,u,t]}class Ke extends J{constructor(e){super(),K(this,e,Je,Fe,Q,{})}}function ye(r,e,n){const l=r.slice();return l[6]=e[n],l[8]=n,l}function Ce(r){let e,n;return e=new Le({props:{color:r[0].grid[r[8]]}}),{c(){V(e.$$.fragment)},l(l){O(e.$$.fragment,l)},m(l,a){U(e,l,a),n=!0},p(l,a){const s={};a&1&&(s.color=l[0].grid[l[8]]),e.$set(s)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){P(e.$$.fragment,l),n=!1},d(l){j(e,l)}}}function ke(r){let e,n,l,a,s,t=r[0].grid[r[8]]&&Ce(r);return{c(){e=C("button"),t&&t.c(),n=S(),this.h()},l(u){e=k(u,"BUTTON",{class:!0,id:!0,role:!0,tabindex:!0});var i=B(e);t&&t.l(i),n=T(i),i.forEach(h),this.h()},h(){v(e,"class","cell svelte-1rn172u"),v(e,"id",`board-cell-${r[8]}`),v(e,"role","cell"),v(e,"tabindex","0")},m(u,i){z(u,e,i),t&&t.m(e,null),p(e,n),l=!0,a||(s=[q(e,"mouseenter",r[2](r[8])),q(e,"click",r[3](r[8]))],a=!0)},p(u,i){r=u,r[0].grid[r[8]]?t?(t.p(r,i),i&1&&w(t,1)):(t=Ce(r),t.c(),w(t,1),t.m(e,n)):t&&(ae(),P(t,1,1,()=>{t=null}),oe())},i(u){l||(w(t),l=!0)},o(u){P(t),l=!1},d(u){u&&h(e),t&&t.d(),a=!1,Ee(s)}}}function Xe(r){let e,n,l,a,s,t,u,i,c,o,g,D,b,f,$,y,A,Y,R;a=new F({props:{class:"shadow",name:"board-layer-black"}});let N=ve(Array(7*6)),_=[];for(let d=0;d<N.length;d+=1)_[d]=ke(ye(r,N,d));const Z=d=>P(_[d],1,1,()=>{_[d]=null});return i=new F({props:{class:"overlay",name:"board-layer-white"}}),g=new He({}),f=new Ke({}),{c(){e=C("div"),n=C("div"),l=C("div"),V(a.$$.fragment),s=S(),t=C("div");for(let d=0;d<_.length;d+=1)_[d].c();u=S(),V(i.$$.fragment),c=S(),o=C("div"),V(g.$$.fragment),b=S(),V(f.$$.fragment),$=S(),y=C("div"),this.h()},l(d){e=k(d,"DIV",{class:!0});var E=B(e);n=k(E,"DIV",{class:!0});var m=B(n);l=k(m,"DIV",{class:!0});var I=B(l);O(a.$$.fragment,I),s=T(I),t=k(I,"DIV",{class:!0});var M=B(t);for(let ue=0;ue<_.length;ue+=1)_[ue].l(M);M.forEach(h),u=T(I),O(i.$$.fragment,I),c=T(I),o=k(I,"DIV",{});var pe=B(o);O(g.$$.fragment,pe),pe.forEach(h),I.forEach(h),m.forEach(h),b=T(E),O(f.$$.fragment,E),$=T(E),y=k(E,"DIV",{class:!0,style:!0}),B(y).forEach(h),E.forEach(h),this.h()},h(){v(t,"class","cells svelte-1rn172u"),v(l,"class","board-grid svelte-1rn172u"),v(n,"class","board"),v(y,"class","game-status-background svelte-1rn172u"),v(y,"style",A=`background-color: var(--${r[1]?r[1]:"dark-purple"})`),v(e,"class","board-container svelte-1rn172u")},m(d,E){z(d,e,E),p(e,n),p(n,l),U(a,l,null),p(l,s),p(l,t);for(let m=0;m<_.length;m+=1)_[m]&&_[m].m(t,null);p(l,u),U(i,l,null),p(l,c),p(l,o),U(g,o,null),p(e,b),U(f,e,null),p(e,$),p(e,y),R=!0},p(d,[E]){if(E&13){N=ve(Array(7*6));let m;for(m=0;m<N.length;m+=1){const I=ye(d,N,m);_[m]?(_[m].p(I,E),w(_[m],1)):(_[m]=ke(I),_[m].c(),w(_[m],1),_[m].m(t,null))}for(ae(),m=N.length;m<_.length;m+=1)Z(m);oe()}(!R||E&2&&A!==(A=`background-color: var(--${d[1]?d[1]:"dark-purple"})`))&&v(y,"style",A)},i(d){if(!R){w(a.$$.fragment,d);for(let E=0;E<N.length;E+=1)w(_[E]);w(i.$$.fragment,d),w(g.$$.fragment,d),d&&(D||H(()=>{D=te(o,Ie,{delay:1e3}),D.start()})),w(f.$$.fragment,d),d&&(Y||H(()=>{Y=te(y,re,{delay:1e3,y:300}),Y.start()})),R=!0}},o(d){P(a.$$.fragment,d),_=_.filter(Boolean);for(let E=0;E<_.length;E+=1)P(_[E]);P(i.$$.fragment,d),P(g.$$.fragment,d),P(f.$$.fragment,d),R=!1},d(d){d&&h(e),j(a),Ne(_,d),j(i),j(g),j(f)}}}function Ye(r,e,n){let l,a,s;G(r,L,c=>n(5,l=c)),G(r,ne,c=>n(0,a=c)),G(r,ze,c=>n(1,s=c)),ie(()=>{Be()});let t;function u(c){return()=>{clearTimeout(t),l||(t=setTimeout(()=>{Ge(c)},150))}}function i(c){return()=>{l||Me({indexColumn:c%7})}}return[a,s,u,i]}class Ze extends J{constructor(e){super(),K(this,e,Ye,Xe,Q,{})}}function xe(r){let e,n,l="Menu",a,s,t,u,i="Restart",c,o,g,D="PAUSE",b,f,$="Continue game",y,A,Y="Restart",R,N,_="Quit Game",Z,d,E;return s=new F({props:{class:"logo",name:"logo"}}),{c(){e=C("div"),n=C("button"),n.textContent=l,a=S(),V(s.$$.fragment),t=S(),u=C("button"),u.textContent=i,c=S(),o=C("dialog"),g=C("span"),g.textContent=D,b=S(),f=C("button"),f.textContent=$,y=S(),A=C("button"),A.textContent=Y,R=S(),N=C("button"),N.textContent=_,this.h()},l(m){e=k(m,"DIV",{class:!0});var I=B(e);n=k(I,"BUTTON",{class:!0,"data-svelte-h":!0}),W(n)!=="svelte-jmehzd"&&(n.textContent=l),a=T(I),O(s.$$.fragment,I),t=T(I),u=k(I,"BUTTON",{class:!0,"data-svelte-h":!0}),W(u)!=="svelte-j25n9j"&&(u.textContent=i),I.forEach(h),c=T(m),o=k(m,"DIALOG",{class:!0});var M=B(o);g=k(M,"SPAN",{"data-svelte-h":!0}),W(g)!=="svelte-16naano"&&(g.textContent=D),b=T(M),f=k(M,"BUTTON",{class:!0,"data-svelte-h":!0}),W(f)!=="svelte-vst0ui"&&(f.textContent=$),y=T(M),A=k(M,"BUTTON",{class:!0,"data-svelte-h":!0}),W(A)!=="svelte-15pdyjx"&&(A.textContent=Y),R=T(M),N=k(M,"BUTTON",{class:!0,"data-svelte-h":!0}),W(N)!=="svelte-1xzbx5t"&&(N.textContent=_),M.forEach(h),this.h()},h(){v(n,"class","flat-button button-purple"),v(u,"class","flat-button button-purple"),v(e,"class","menu svelte-6c595u"),v(f,"class","text-button raised-button button-white"),v(A,"class","text-button raised-button button-white"),v(N,"class","text-button raised-button button-red"),v(o,"class","svelte-6c595u")},m(m,I){z(m,e,I),p(e,n),p(e,a),U(s,e,null),p(e,t),p(e,u),z(m,c,I),z(m,o,I),p(o,g),p(o,b),p(o,f),p(o,y),p(o,A),p(o,R),p(o,N),r[5](o),Z=!0,d||(E=[q(n,"click",r[1]),q(u,"click",r[3]),q(f,"click",r[2]),q(A,"click",r[3]),q(N,"click",r[4])],d=!0)},p:ce,i(m){Z||(w(s.$$.fragment,m),Z=!0)},o(m){P(s.$$.fragment,m),Z=!1},d(m){m&&(h(e),h(c),h(o)),j(s),r[5](null),d=!1,Ee(E)}}}function et(r,e,n){let l;G(r,L,o=>n(6,l=o));let a;const s=()=>{a.showModal(),le(L,l=!0,l)},t=()=>{a.close(),le(L,l=!1,l)},u=()=>{Be(),t()},i=()=>{t(),Oe(`${je}${Ue("/")}`)};function c(o){De[o?"unshift":"push"](()=>{a=o,n(0,a)})}return[a,s,t,u,i,c]}class tt extends J{constructor(e){super(),K(this,e,et,xe,Q,{})}}function nt(r){let e;return{c(){e=x("Player 2")},l(n){e=ee(n,"Player 2")},m(n,l){z(n,e,l)},d(n){n&&h(e)}}}function rt(r){let e;return{c(){e=x("Player 1")},l(n){e=ee(n,"Player 1")},m(n,l){z(n,e,l)},d(n){n&&h(e)}}}function st(r){let e,n,l,a,s,t,u="12",i,c,o;n=new F({props:{class:`${!r[1]&&r[0]===r[2].turn?"active":""} icon ${r[0]}`,name:r[0]==="red"?"player-one":"player-two"}});function g(f,$){return f[0]==="red"?rt:nt}let D=g(r),b=D(r);return{c(){e=C("div"),V(n.$$.fragment),l=S(),a=C("span"),b.c(),s=S(),t=C("span"),t.textContent=u,this.h()},l(f){e=k(f,"DIV",{class:!0});var $=B(e);O(n.$$.fragment,$),l=T($),a=k($,"SPAN",{class:!0});var y=B(a);b.l(y),y.forEach(h),s=T($),t=k($,"SPAN",{class:!0,"data-svelte-h":!0}),W(t)!=="svelte-dbx7z1"&&(t.textContent=u),$.forEach(h),this.h()},h(){v(a,"class","svelte-ukks6l"),v(t,"class","svelte-ukks6l"),v(e,"class",i=se(`score-board ${r[0]}`)+" svelte-ukks6l")},m(f,$){z(f,e,$),U(n,e,null),p(e,l),p(e,a),b.m(a,null),p(e,s),p(e,t),o=!0},p(f,[$]){r=f;const y={};$&7&&(y.class=`${!r[1]&&r[0]===r[2].turn?"active":""} icon ${r[0]}`),$&1&&(y.name=r[0]==="red"?"player-one":"player-two"),n.$set(y),D!==(D=g(r))&&(b.d(1),b=D(r),b&&(b.c(),b.m(a,null))),(!o||$&1&&i!==(i=se(`score-board ${r[0]}`)+" svelte-ukks6l"))&&v(e,"class",i)},i(f){o||(w(n.$$.fragment,f),f&&(c||H(()=>{c=te(e,re,{x:300*(r[0]==="red"?-1:1),delay:1e3}),c.start()})),o=!0)},o(f){P(n.$$.fragment,f),o=!1},d(f){f&&h(e),j(n),b.d()}}}function lt(r,e,n){let l,a;G(r,L,t=>n(1,l=t)),G(r,ne,t=>n(2,a=t));let{player:s}=e;return r.$$set=t=>{"player"in t&&n(0,s=t.player)},[s,l,a]}class we extends J{constructor(e){super(),K(this,e,lt,st,Q,{player:0})}}function at(r){let e,n,l,a,s,t,u,i,c;return n=new tt({}),a=new we({props:{player:"red"}}),t=new we({props:{player:"yellow"}}),i=new Ze({}),{c(){e=C("main"),V(n.$$.fragment),l=S(),V(a.$$.fragment),s=S(),V(t.$$.fragment),u=S(),V(i.$$.fragment),this.h()},l(o){e=k(o,"MAIN",{class:!0});var g=B(e);O(n.$$.fragment,g),l=T(g),O(a.$$.fragment,g),s=T(g),O(t.$$.fragment,g),u=T(g),O(i.$$.fragment,g),g.forEach(h),this.h()},h(){v(e,"class","svelte-1a8y0ai")},m(o,g){z(o,e,g),U(n,e,null),p(e,l),U(a,e,null),p(e,s),U(t,e,null),p(e,u),U(i,e,null),c=!0},p:ce,i(o){c||(w(n.$$.fragment,o),w(a.$$.fragment,o),w(t.$$.fragment,o),w(i.$$.fragment,o),c=!0)},o(o){P(n.$$.fragment,o),P(a.$$.fragment,o),P(t.$$.fragment,o),P(i.$$.fragment,o),c=!1},d(o){o&&h(e),j(n),j(a),j(t),j(i)}}}class mt extends J{constructor(e){super(),K(this,e,null,at,Q,{})}}export{mt as component};
